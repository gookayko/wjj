
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(121)},50:function(a,b){!function(a){function b(){}function c(a){g=[a]}function d(a,b,c){return a&&a.apply(b.context||b,c)}function e(a){return/\?/.test(a)?"&":"?"}function f(f){function n(a){X++||(Y(),S&&(A[U]={s:[a]}),O&&(a=O.apply(f,[a])),d(L,f,[a,v,f]),d(N,f,[f,v]))}function F(a){X++||(Y(),S&&a!=w&&(A[U]=a),d(M,f,[f,a]),d(N,f,[f,a]))}f=a.extend({},C,f);var G,H,I,J,K,L=f.success,M=f.error,N=f.complete,O=f.dataFilter,P=f.callbackParameter,Q=f.callback,R=f.cache,S=f.pageCache,T=f.charset,U=f.url,V=f.data,W=f.timeout,X=0,Y=b;return y&&y(function(a){a.done(L).fail(M),L=a.resolve,M=a.reject}).promise(f),f.abort=function(){!X++&&Y()},d(f.beforeSend,f,[f])===!1||X?f:(U=U||j,V=V?"string"==typeof V?V:a.param(V,f.traditional):j,U+=V?e(U)+V:j,P&&(U+=e(U)+encodeURIComponent(P)+"=?"),!R&&!S&&(U+=e(U)+"_"+(new Date).getTime()+"="),U=U.replace(/=\?(&|$)/,"="+Q+"$1"),S&&(G=A[U])?G.s?n(G.s[0]):F(G):(x[Q]=c,I=a(u)[0],I.id=m+B++,T&&(I[i]=T),D&&D.version()<11.6?(J=a(u)[0]).text="document.getElementById('"+I.id+"')."+p+"()":I[h]=h,E&&(I.htmlFor=I.id,I.event=o),I[q]=I[p]=I[r]=function(a){if(!I[s]||!/i/.test(I[s])){try{I[o]&&I[o]()}catch(b){}a=g,g=0,a?n(a[0]):F(k)}},I.src=U,Y=function(a){K&&clearTimeout(K),I[r]=I[q]=I[p]=null,z[t](I),J&&z[t](J)},z[l](I,H=z.firstChild),J&&z[l](J,H),K=W>0&&setTimeout(function(){F(w)},W)),f)}var g,h="async",i="charset",j="",k="error",l="insertBefore",m="_jqjsp",n="on",o=n+"click",p=n+k,q=n+"load",r=n+"readystatechange",s="readyState",t="removeChild",u="<script>",v="success",w="timeout",x=window,y=a.Deferred,z=a("head")[0]||document.documentElement,A={},B=0,C={callback:m,url:location.href},D=x.opera,E=!!a("<div>").html("<!--[if IE]><i><![endif]-->").find("i").length;f.setup=function(b){a.extend(C,b)},a.jsonp=f}(Txplayer.$)},121:function(a,b,c){function d(a){return h=Txplayer.$,this.dataset={},this.context=a,!g.mobile&&window.jQuery&&c(124),h.jsonp||c(50),this.context.config.createPlayerAfterCssLoaded?this.init():void this.init()}var e=c(122),f=c(123),g=Txplayer.util,h=Txplayer.$;d.prototype={init:function(){return this.dataset.defer=Txplayer.$.Deferred(),Txplayer.dataset.pluginsPreload&&!this.context.config.containerId?(this.dataset.defer.reject(),this.dataset.defer):this.context.config.containerId?(this.dataset.$container=h("#"+this.context.config.containerId),this.dataset.ipadClass="txp_player_pad",this.context.dataset.isWindowFocus=!0,this.dataset.$container&&this.dataset.$container.length?(this.loadHTML5PlayerSkin(),this.write(),this.exportsModuleApis(),void this.addEventListener()):(g.showError("[HtmlFrame初始化错误]","没找到id="+this.context.config.containerId+"的dom节点!"),this.dataset.defer.reject(),this.dataset.defer)):(g.showError("[HtmlFrame初始化错误]","参数containerId没找到!"),this.dataset.defer.reject(),this.dataset.defer)},getModStyle:function(){function a(a){return a=a||"100%","number"==typeof a?parseInt(a)+"px":"string"==typeof a?a.indexOf("%")>-1?a:parseInt(a)+"px":a}var b=[];return b.push("width:"+a(this.context.config.width)),b.push("height:"+a(this.context.config.height)),b.join(";")},loadHTML5PlayerSkin:function(){if("flash"===this.context.config.playerType)return void this.dataset.defer.resolve();if(!Txplayer.dataset.disableLoadTxplayerCss){var a,b=this;return(a=Txplayer.dataset.H5PlayerStyleUrl[this.context.config.playerType])?void g.loadCss(a).done(function(){b.dataset.defer.resolve()}).fail(function(){g.showError("找不到播放器的皮肤样式文件",Txplayer.dataset.HdPlayerStyleUrl)}):void b.dataset.defer.resolve()}},write:function(){var a=this.context.config.useSVG?1:Txplayer.$.inArray(this.context.config.playerType,["html5hd","ipadh5","chromehls","safarihls"])>-1?1:0;Txplayer.dataset.maxId>1&&Txplayer.$(".txp_svg_sprite").length&&(a=!1);var b="flash"!==this.context.config.playerType?'tabindex="-1"':"";if(a){document.createElement("txpdiv")}var c,d={useSVG:a,ie:g.browser.ie,playerid:"txplayer_"+this.context.config.playerId,mod_stype:this.getModStyle(),svgstr:f,tabindex:b,gradient_top:"txp-frame-gradient-top"},h=["HtmlFrame.write Error:"],i=this,j=function(){h=h.join("\n"),i.context.msg.broadcast(Txplayer.apiList.privateApi.reportError,{msg:h,code:Txplayer.define.reportCode.JS_ERROR,stack:c})};try{var k=Txplayer.$.tmpl(e,d);this.dataset.$container.html(k),this.dataset.$playermod=this.dataset.$container.find("#"+d.playerid),this.context.dataset.$playermod=this.dataset.$playermod,this.dataset.$gradientTop=this.dataset.$container.find('[data-role="'+d.gradient_top+'"]'),this.dataset.$gradientTop.addClass(Txplayer.dataset.hideClass),"v.qq.com"===location.hostname&&this.context.config.showLogo!==!0||this.dataset.$playermod.addClass("txp_player_external"),Txplayer.dataset.maxId++}catch(l){h.push(l.message),c=l.stack}return h.length>1?void j():("ipadh5"===this.context.config.playerType&&this.dataset.$playermod.addClass(this.dataset.ipadClass),void this.context.msg.on("ready",function(){i.context.dataset.playerWidth=i.context.dataset.$playermod.width(),i.context.dataset.playerHeight=i.context.dataset.$playermod.height()}))},resize:function(a){"object"!==h.type(a)||h.isEmptyObject(a)||!a.hasOwnProperty("width")&&!a.hasOwnProperty("height")||(this.dataset.$playermod.css(a),this.context.dataset.playerWidth=this.dataset.$container.width(),this.context.dataset.playerHeight=this.dataset.$container.height(),this.broadCaseResizeMsg())},autoResize:function(a){a=a||"width";var b={width:this.context.dataset.videoWidth,height:this.context.dataset.videoHeight};if(!(b&&b.width&&b.height))return!1;if("width"===a){var c=this.dataset.$playermod.width();this.resize({height:parseInt(c*(b.height/b.width))})}else{var d=this.dataset.$playermod.height();this.resize({width:parseInt(d*(b.width/b.height))})}},broadCaseResizeMsg:function(){var a={width:this.context.dataset.$playermod.width(),height:this.context.dataset.$playermod.height()};if(this.context.dataset.playerWidth!=a.width||this.context.dataset.playerHeight!=a.height){this.context.dataset.playerWidth=a.width,this.context.dataset.playerHeight=a.height,this.context.msg.broadcast("resize",a);try{this.context.userMsg.broadcast("resize",a)}catch(b){}}},destroy:function(a){var b=this;if("all"===a)for(var c in Txplayer.dataset._instance)Txplayer.dataset._instance[c]&&"function"===Txplayer.$.type(Txplayer.dataset._instance[c].destroy)&&Txplayer.dataset._instance[c].destroy();else if("HtmlFrame"===a)Txplayer.$.each(this.dataset.moduleApis,function(a,c){b.context.msg.off(a,c)}),Txplayer.$.each(this,function(a,b){b=null});else if("string"===Txplayer.$.type(a))b.context.msg.broadcast("destroyPlugin",a);else{b.dataset.$container&&"function"===Txplayer.$.type(b.dataset.$container.animate)?b.dataset.$container.animate({height:0},300,function(){b.dataset.$container.html("")}):b.dataset.$container.html("");var d=b.context.dataset.playerId;b.context.msg.broadcast("destroyPlugin"),Txplayer.dataset._instance[d]&&(Txplayer.dataset._instance[d]=null,delete Txplayer.dataset._instance[d])}},getPlayerSize:function(){return{width:this.context.dataset.playerWidth,height:this.context.dataset.playerHeight}},isPlayerInScreen:function(){return!!g.isInScreen(this.dataset.$container)},isWindowFocus:function(){return this.context.dataset.isWindowFocus},addEventListener:function(){var a=this;this.dataset.$playermod.on("click",function(b){var c=b.target,d=h(c),e=d.attr("data-report");e||(e=d.parent().attr("data-report")),e||(e=d.parent().parent().attr("data-report")),e&&a.context.msg.broadcast("reportUsrAction",{usr_action:e});var f=d.attr("data-action");if(c.nodeName&&c.nodeName.toLowerCase&&"a"===c.nodeName.toLowerCase()&&f)if("openTxVideo"===f){var i=g.getTxVideoPageURLByVid(a.context.dataset.vid);i&&window.open(i)}else if("openVIP"===f){a.context.msg.broadcast("pause"),a.context.msg.broadcast("showUIVipGuide",{openvip:!0});try{a.context.userMsg.broadcast("showUIVipGuide",{openvip:!0})}catch(j){}}else if("shareVIP"===f)try{a.context.dataset.openAccountData&&a.context.dataset.openAccountData[d.attr("data-click")]&&a.context.userMsg.broadcast("playerEmitCommonMsg",{type:"accountBannedTip",data:a.context.dataset.openAccountData[d.attr("data-click")]})}catch(j){}else"clickTips"===f&&a.context.msg.broadcast("uiTipsClicked",{type:"html5"})}),h(document).on("show",function(){a.context.dataset.isWindowFocus=!0}),h(document).on("hide",function(){a.context.dataset.isWindowFocus=!1}),this.context.msg.on("windowFullscreenChange",function(b){a.dataset.playerFullScreenChangeTimer&&(clearTimeout(a.dataset.playerFullScreenChangeTimer),a.dataset.playerFullScreenChangeTimer=null),a.dataset.playerFullScreenChangeTimer=setTimeout(function(){a.broadCaseResizeMsg()},300),b?a.dataset.$gradientTop.removeClass(Txplayer.dataset.hideClass):a.dataset.$gradientTop.addClass(Txplayer.dataset.hideClass)}),this.context.msg.on("browserFullscreenChange",function(b){a.dataset.playerFullScreenChangeTimer&&(clearTimeout(a.dataset.playerFullScreenChangeTimer),a.dataset.playerFullScreenChangeTimer=null),a.dataset.playerFullScreenChangeTimer=setTimeout(function(){a.broadCaseResizeMsg()},100),b?a.dataset.$gradientTop.removeClass(Txplayer.dataset.hideClass):a.dataset.$gradientTop.addClass(Txplayer.dataset.hideClass)}),h(window).on("resize",function(){a.dataset.documentResizeTimer&&(clearTimeout(a.dataset.documentResizeTimer),a.dataset.documentResizeTimer=null),a.dataset.documentResizeTimer=setTimeout(function(){a.broadCaseResizeMsg()},150)})},exportsModuleApis:function(){var a=this;this.dataset.moduleApis={},this.dataset.moduleApis.resize=function(){return a.resize.apply(a,arguments)},this.dataset.moduleApis.destroy=function(){return a.destroy.apply(a,arguments)},this.dataset.moduleApis.getPlayerSize=function(){return a.getPlayerSize.apply(a,arguments)},this.dataset.moduleApis.autoResize=function(){return a.autoResize.apply(a,arguments)},this.dataset.moduleApis.isPlayerInScreen=function(){return a.isPlayerInScreen.apply(a,arguments)},this.dataset.moduleApis.isWindowFocus=function(){return a.isWindowFocus.apply(a,arguments)},h.extend(this.context.userApi,this.dataset.moduleApis),this.dataset.dataApis={},this.dataset.dataApis.isPlayerInScreen=function(b,c){c.data=a.isPlayerInScreen()},h.each(this.dataset.dataApis,function(b,c){a.context.msg.setData(b,c)})}},Txplayer.register("HtmlFrame",d)},122:function(a,b){a.exports='<% if(!useSVG){ %>\r\n  <div class="txp_player" id="<%=playerid%>" style="<%=mod_stype%>"></div>\r\n<% }else{%>\r\n  <txpdiv class="txp_player txp_player_desktop txp_autohide_progress" id="<%=playerid%>" style="<%=mod_stype%>" <%=tabindex%>>\r\n  <% if(useSVG) {%>\r\n    <%=svgstr%>\r\n    <img src="//vm.gtimg.cn/tencentvideo/txp/style/img/sprite_buddy.svg" alt="preload" style="display: none;">\r\n  <% } %>\r\n  <txpdiv class="txp_gradient_top" data-role="<%=gradient_top%>"></txpdiv>\r\n  <txpdiv class="txp_gradient_bottom"></txpdiv>\r\n  </txpdiv>\r\n<% } %>'},123:function(a,b){a.exports='<svg class="txp_svg_sprite" display="none" version="1.1" xmlns="http://www.w3.org/2000/svg">\r\n\r\n\t<symbol id="txp_svg_collect" viewBox="0 0 36 36">\r\n\t\t<path d="M32.5 26H29v3.5a1.5 1.5 0 0 1-3 0V26h-3.5a1.5 1.5 0 1 1 0-3H26v-3.469a1.5 1.5 0 1 1 3 0V23h3.5a1.5 1.5 0 1 1 0 3zm.319-11.407c-.139.684-.716 1.209-1.442 1.209a1.5 1.5 0 0 1-1.5-1.5c0-.083.035-.154.048-.234l-.014-.002c.243-1.122.145-2.386-.598-3.584-.655-1.055-2.288-2.461-3.803-2.461-2.045 0-3.443.622-4.661 1.806l-3.358 3.182-3.485-3.207c-1.113-1.054-3.172-1.786-4.736-1.786-1.259 0-2.803.987-3.654 2.57-.975 1.809-.986 4.04.755 5.962l11.116 9.485.001-.001 1.015.928c.02.019.041.035.06.054l.004.004-.001.001c.256.269.419.629.419 1.03a1.5 1.5 0 0 1-1.5 1.5c-.435 0-.819-.191-1.093-.487L4.46 18.931c-3.285-3.209-3.285-8.357-.049-11.52C5.998 5.857 8.116 5 10.371 5c2.257 0 4.374.856 5.963 2.411l1.153 1.128 1.152-1.128C20.227 5.856 22.345 5 24.602 5c2.256 0 4.374.856 5.962 2.411a7.992 7.992 0 0 1 2.283 7.187l-.028-.005z"/>\r\n\t</symbol>\r\n\t<symbol id="txp_svg_collected" viewBox="0 0 36 36">\r\n\t\t<path d="M27 14.5a9.5 9.5 0 0 0-9.5 9.5c0 1.515.364 2.941.994 4.211l-1.507 1.28L3.96 18.431C.675 15.222.675 10.074 3.911 6.911 5.498 5.357 7.616 4.5 9.871 4.5c2.257 0 4.374.856 5.963 2.411l1.153 1.128 1.152-1.128C19.727 5.356 21.845 4.5 24.102 4.5c2.256 0 4.374.856 5.962 2.411a7.99 7.99 0 0 1 1.755 8.912A9.445 9.445 0 0 0 27 14.5zm0 2a7.5 7.5 0 1 1 0 15 7.5 7.5 0 0 1 0-15zm-4.042 9.485l1.811 1.81c.054.082.09.172.161.244a1.45 1.45 0 0 0 1.075.421 1.44 1.44 0 0 0 1.067-.418c.066-.066.097-.148.147-.222l3.851-3.851a1.463 1.463 0 1 0-2.069-2.07l-3.008 3.007-.978-.978a1.455 1.455 0 0 0-2.057 2.057z"/>\r\n\t</symbol>\r\n\t<symbol id="txp_svg_share" viewBox="0 0 36 36">\r\n\t\t<path d="M32.946 23.601l.023.009C30.694 29.675 24.86 34 18 34 9.163 34 2 26.837 2 18c0-6.095 3.42-11.372 8.435-14.072a1.48 1.48 0 0 1 .982-.387 1.5 1.5 0 0 1 1.5 1.5c0 .557-.317 1.023-.767 1.282l.032.064C7.927 8.523 5 12.915 5 18c0 7.18 5.82 13 13 13 5.577 0 10.319-3.518 12.165-8.45l.047.017c.154-.665.722-1.171 1.434-1.171a1.5 1.5 0 0 1 1.5 1.5c0 .26-.084.492-.2.705zM32 14.5a1.5 1.5 0 1 1-3 0V9.086l-9.455 9.455a1.498 1.498 0 0 1-2.117-2.117L26.852 7H21.5a1.5 1.5 0 0 1 0-3h8.929a1.47 1.47 0 0 1 .64.115c.546.224.931.758.931 1.385v9z"/>\r\n\t</symbol>\r\n\t<symbol id="txp_svg_play" viewBox="0 0 36 36">\r\n\t\t<path d="M25.8 18c0 .6-.3 1.1-.8 1.3L12.5 27c-.2.1-.5.2-.8.2-.8 0-1.5-.6-1.5-1.5V10c0-.8.7-1.5 1.5-1.5.3 0 .5.1.8.2l12.7 7.9c.4.5.6.9.6 1.4z"/>\r\n\t</symbol>\r\n\t<symbol id="txp_svg_replay" viewBox="0 0 36 36">\r\n\t\t<path d="M17.9 28c-4.9 0-9-3.6-9.8-8.3V19.4c0-.8.7-1.4 1.5-1.4s1.5.6 1.5 1.4c.8 3.8 4.5 6.2 8.3 5.4s6.2-4.5 5.4-8.3c-.7-3.2-3.5-5.6-6.9-5.6-1.8 0-3.6.7-4.8 2h1.3c.8 0 1.5.7 1.5 1.5s-.6 1.6-1.5 1.6h-4c-.8 0-1.5-.7-1.5-1.5v-4c0-.8.7-1.5 1.5-1.5.7 0 1.2.5 1.4 1.1C13.6 8.7 15.7 8 17.9 8c5.5 0 10 4.5 10 10s-4.4 10-10 10z" />\r\n\t</symbol>\r\n\t<symbol id="txp_svg_pause" viewBox="0 0 36 36">\r\n\t\t<path d="M23.5 28c-.8 0-1.5-.7-1.5-1.5v-17c0-.8.7-1.5 1.5-1.5s1.5.7 1.5 1.5v17c0 .8-.7 1.5-1.5 1.5zm-11 0c-.8 0-1.5-.7-1.5-1.5v-17c0-.8.7-1.5 1.5-1.5s1.5.7 1.5 1.5v17c0 .8-.7 1.5-1.5 1.5z"/>\r\n\t</symbol>\r\n\t<symbol id="svg_icon_refresh" viewBox="0 0 20 20">\r\n\t\t<path d="M10 19a9 9 0 0 1-9-8.999V10a1 1 0 1 1 2 0 7 7 0 1 0 7-7 6.952 6.952 0 0 0-4.877 2H7a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V2a1 1 0 0 1 2 0v1.314A8.935 8.935 0 0 1 10 1c4.971 0 9 4.029 9 9s-4.029 9-9 9z"/>\r\n\t</symbol>\r\n\t<symbol id="txp_svg_next" viewBox="0 0 36 36">\r\n\t\t<path d="M26.5 28c-.8 0-1.5-.7-1.5-1.5v-17c0-.8.8-1.5 1.5-1.5s1.5.7 1.5 1.5v17c0 .8-.7 1.5-1.5 1.5zm-4.7-9.1c0 .1 0 .1 0 0l-11.1 8.6s-.1.1-.2.1l-.3.2c-.3.1-.4.2-.8.2-.8 0-1.5-.7-1.5-1.5V9.5c.2-.8.9-1.5 1.7-1.5.2 0 .5.1.7.2v-.1L22 16.3c.4.3.7.7.7 1.2-.1.7-.5 1.2-.9 1.4z"/>\r\n\t</symbol>\r\n\t<symbol id="txp_svg_stop" viewBox="0 0 36 36">\r\n\t\t<path d="M14 10h8c2.2 0 4 1.8 4 4v8c0 2.2-1.8 4-4 4h-8c-2.2 0-4-1.8-4-4v-8c0-2.2 1.8-4 4-4z" />\r\n\t</symbol>\r\n\t<symbol id="txp_svg_shop" viewBox="0 0 24 24">\r\n\t\t<path d="M18 13.836V14H8.793l-.552 2H18a2 2 0 1 1-2 2c0-.368.106-.707.278-1H8.722c.172.294.278.633.278 1a2 2 0 1 1-2-2h.206l.552-2H7v-.223L5.34 5H3V4h3v.01L6.147 4l.377 2H20v1h-.206L18 13.835zM18 19a1 1 0 1 0 0-2 1 1 0 0 0 0 2zM7 17a1 1 0 1 0 0 1.998 1 1 0 0 0 0-2zM6.714 7l1.134 6h9.357l1.575-6H6.714z"/>\r\n\t</symbol>\r\n\t<symbol id="txp_svg_eye" viewBox="0 0 24 24">\r\n\t\t<path d="M12 18c-5.468 0-9-6-9-6s3.533-6 9-6c5.467 0 9 6 9 6s-3.533 6-9 6zm0-11c-5.033 0-8 5-8 5s2.967 5 8 5c5.033 0 8-5 8-5s-2.967-5-8-5zm0 8a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0-5a2 2 0 1 0 0 3.998 2 2 0 0 0 0-4z"/>\r\n\t</symbol>\r\n\t<symbol id="txp_svg_volume" viewBox="0 0 20 20">\r\n\t\t<path d="M16.714 15.593l-.01-.01a1 1 0 0 1-1.705-.708c0-.287.124-.542.317-.724C16.354 13.073 17 11.614 17 10s-.645-3.072-1.682-4.151A.993.993 0 0 1 15 5.125a1 1 0 0 1 1-1c.3 0 .561.139.744.348l.017-.016A7.969 7.969 0 0 1 19 10c0 2.178-.874 4.15-2.286 5.593zm-3.999 3.122a.956.956 0 0 1-.688.28c-.009 0-.018.005-.027.005a.984.984 0 0 1-.75-.357L5.818 15H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h3.818l5.432-3.643A.984.984 0 0 1 12 1c.009 0 .017.005.026.005a.954.954 0 0 1 .968.967c.001.01.006.018.006.028v16c0 .009-.005.017-.005.026a.959.959 0 0 1-.28.689zM6.75 6.643A.984.984 0 0 1 6 7H3v6h3c.304 0 .567.143.75.357l4.25 2.85V3.792L6.75 6.643z"></path>\r\n\t</symbol>\r\n\t<symbol id="txp_svg_volume_mute" viewBox="0 0 20 20">\r\n\t\t<path d="M16.394 12.566A5.88 5.88 0 0 0 17 10a5.97 5.97 0 0 0-1.682-4.151.993.993 0 0 1-.318-.724 1 1 0 0 1 1-1c.3 0 .561.139.745.348l.016-.016A7.969 7.969 0 0 1 19 10a7.934 7.934 0 0 1-1.116 4.055l-1.49-1.489zM11 3.792L8.978 5.149 7.62 3.792l3.63-2.435A.984.984 0 0 1 12 1c.009 0 .017.005.026.005a.954.954 0 0 1 .968.967c.001.01.006.018.006.028v7.171l-2-2V3.792zm7.864 14.072a.999.999 0 0 1-1.414 0L2.136 2.55a1 1 0 1 1 1.415-1.415L18.864 16.45a1 1 0 0 1 0 1.414zM3.171 5l2 2H3v6h3c.304 0 .567.143.75.357l4.25 2.85v-3.379l2 2V18c0 .009-.005.017-.005.027a.955.955 0 0 1-.967.968c-.01 0-.019.005-.028.005a.984.984 0 0 1-.75-.357L5.818 15H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h1.171z"></path>\r\n\t</symbol>\r\n\r\n\t<symbol id="txp_svg_setting" viewBox="0 0 24 24">\r\n\t\t<path d="M21 11v2l-2 1v-.3c-.2.7-.5 1.5-.9 2.1l.2-.2.7 2.1-1.4 1.4-2.1-.7.2-.2c-.7.4-1.4.7-2.1.9h.4l-1 2h-2l-1-2h.3c-.7-.2-1.5-.5-2.1-.9l.2.2-2.1.7-1.4-1.4.7-2.1.2.2c-.4-.7-.7-1.4-.9-2.1v.3l-2-1v-2l2-1v.4c.2-.8.5-1.6 1-2.3l-.3.4-.7-2.2 1.4-1.4 2.1.7-.3.4c.7-.5 1.5-.8 2.3-1H10l1-2h2l1 2h-.4c.8.2 1.6.5 2.3.9l-.3-.3 2.1-.7 1.4 1.4-.7 2.1-.3-.3c.4.7.7 1.4.9 2.2V10l2 1zm-9-4c-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5-2.2-5-5-5z"/>\r\n\t</symbol>\r\n\t<symbol id="txp_svg_bulb" viewBox="0 0 24 24">\r\n\t\t<path d="M15 16.317V17c0 .186-.065.35-.153.5.088.15.153.313.153.5v2a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1v-2c0-.186.064-.35.153-.5A.97.97 0 0 1 9 17v-.683A6.994 6.994 0 0 1 5 10a7 7 0 0 1 14 0 6.994 6.994 0 0 1-4 6.317zM10 20h4v-2h-4v2zm2-16a6 6 0 0 0-6 6c0 2.215 1.214 4.128 3 5.167V15c.452.36 1 .593 1 .593V17h4v-1.5s.462-.096 1-.5v.167c1.786-1.04 3-2.953 3-5.167a6 6 0 0 0-6-6z"/>\r\n\t</symbol>\r\n\t<symbol id="txp_svg_window" viewBox="0 0 24 24">\r\n\t\t<path d="M19 16H9a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1zm0-11H9v10h10V5zM5 19h10v-2h1v2a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h2v1H5v10z"/>\r\n\t</symbol>\r\n\t<symbol id="txp_svg_size_true" viewBox="0 0 24 24">\r\n\t\t<path d="M20 19H4c-.6 0-1-.4-1-1V6c0-.6.4-1 1-1h16c.6 0 1 .4 1 1v12c0 .6-.4 1-1 1zM5 7v10h14V7H5z"/>\r\n\t</symbol>\r\n\t<symbol id="txp_svg_size" viewBox="0 0 24 24">\r\n\t\t<path d="M20 19H4c-.6 0-1-.4-1-1V6c0-.6.4-1 1-1h16c.6 0 1 .4 1 1v12c0 .6-.4 1-1 1zM5 17h10V7H5v10zM19 7h-2v10h2V7z"/>\r\n\t</symbol>\r\n\t<symbol id="txp_svg_fake" viewBox="0 0 24 24">\r\n\t\t<path d="M20 20H4c-.6 0-1-.4-1-1V5c0-.6.4-1 1-1h16c.6 0 1 .4 1 1v14c0 .6-.4 1-1 1zM5 6v12h14V6H5zm12 11h-2c-.6 0-1-.4-1-1s.4-1 1-1h1v-1c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zm0-6c-.6 0-1-.4-1-1V9h-1c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1v2c0 .6-.4 1-1 1zm-8 6H7c-.6 0-1-.4-1-1v-2c0-.6.4-1 1-1s1 .4 1 1v1h1c.6 0 1 .4 1 1s-.4 1-1 1zm0-8H8v1c0 .6-.4 1-1 1s-1-.4-1-1V8c0-.6.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1z"/>\r\n\t</symbol>\r\n\t<symbol id="txp_svg_fake_true" viewBox="0 0 24 24">\r\n\t\t<path d="M20 20H4c-.6 0-1-.4-1-1V5c0-.6.4-1 1-1h16c.6 0 1 .4 1 1v14c0 .6-.4 1-1 1zM5 6v12h14V6H5zm12 9h-1v1c0 .6-.4 1-1 1s-1-.4-1-1v-2c0-.6.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zm0-4h-2c-.6 0-1-.4-1-1V8c0-.6.4-1 1-1s1 .4 1 1v1h1c.6 0 1 .4 1 1s-.4 1-1 1zm-8 6c-.6 0-1-.4-1-1v-1H7c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1v2c0 .6-.4 1-1 1zm0-6H7c-.6 0-1-.4-1-1s.4-1 1-1h1V8c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1z"/>\r\n\t</symbol>\r\n\t<symbol id="txp_svg_fullscreen" viewBox="0 0 24 24">\r\n\t\t<path d="M19.7 19.7c-.2.2-.5.3-.7.3h-4c-.6 0-1-.4-1-1s.4-1 1-1h1.6l-3.3-3.3c-.4-.4-.3-1.1.1-1.4.4-.4 1-.4 1.4 0l3.3 3.3V15c0-.6.4-1 1-1s1 .4 1 1v4c-.1.2-.2.5-.4.7zM19 10c-.6 0-1-.4-1-1V7.4l-3.3 3.3c-.4.4-1 .4-1.4 0-.4-.4-.4-1 0-1.4L16.6 6H15c-.6 0-1-.4-1-1s.4-1 1-1h4c.3 0 .5.1.7.3.2.2.3.5.3.7v4c0 .6-.4 1-1 1zM7.4 18H9c.6 0 1 .4 1 1s-.4 1-1 1H5c-.3 0-.5-.1-.7-.3-.2-.2-.3-.5-.3-.7v-4c0-.6.4-1 1-1s1 .4 1 1v1.6l3.3-3.3c.4-.4 1.1-.3 1.4.1.4.4.4 1 0 1.4L7.4 18zm1.9-7.3L6 7.4V9c0 .6-.4 1-1 1s-1-.4-1-1V5c0-.3.1-.5.3-.7.2-.2.5-.3.7-.3h4c.6 0 1 .4 1 1s-.4 1-1 1H7.4l3.3 3.3c.4.4.4 1 0 1.4-.4.4-1 .4-1.4 0z"/>\r\n\t</symbol>\r\n\t<symbol id="txp_svg_fullscreen_true" viewBox="0 0 24 24">\r\n\t\t<path d="M16.4 9H18c.6 0 1 .4 1 1s-.4 1-1 1h-4c-.3 0-.5-.1-.7-.3-.2-.2-.3-.5-.3-.7V6c0-.6.4-1 1-1s1 .4 1 1v1.6l3.3-3.3c.4-.4 1.1-.3 1.4.1.4.4.4 1 0 1.4L16.4 9zM10 19c-.6 0-1-.4-1-1v-1.6l-3.3 3.3c-.4.4-1 .4-1.4 0-.4-.4-.4-1 0-1.4L7.6 15H6c-.6 0-1-.4-1-1s.4-1 1-1h4c.3 0 .5.1.7.3.2.2.3.5.3.7v4c0 .5-.4 1-1 1zm0-8H6c-.6 0-1-.4-1-1s.4-1 1-1h1.6L4.3 5.7c-.4-.4-.4-1 .1-1.4.4-.4 1-.4 1.4 0L9 7.6V6c0-.6.4-1 1-1s1 .4 1 1v4c0 .3-.1.5-.3.7-.2.2-.5.3-.7.3zm4 2h4c.6 0 1 .4 1 1s-.4 1-1 1h-1.6l3.3 3.3c.4.4.4 1 0 1.4s-1 .4-1.4 0L15 16.4V18c0 .6-.4 1-1 1s-1-.4-1-1v-4c0-.3.1-.5.3-.7.2-.2.5-.3.7-.3z"/>\r\n\t</symbol>\r\n\t<symbol id="txp_svg_select" viewBox="0 0 12 12">\r\n\t\t<path d="M6 12c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6zM6 .9C3.2.9.9 3.2.9 6s2.3 5.1 5.1 5.1 5.1-2.3 5.1-5.1S8.8.9 6 .9z"/>\r\n\t</symbol>\r\n\t<symbol id="txp_svg_select_true" viewBox="0 0 12 12">\r\n\t\t<path d="M6 12c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6zM6 .9C3.2.9.9 3.2.9 6s2.3 5.1 5.1 5.1 5.1-2.3 5.1-5.1S8.8.9 6 .9zm-.3 7.4c-.3.3-.8.3-1.2 0L2.8 6.6c-.3-.3-.3-.8 0-1.2.3-.3.8-.3 1.2 0l1.2 1.2L8 3.7c.3-.3.8-.3 1.2 0 .3.3.3.8 0 1.2L5.7 8.3z"/>\r\n\t</symbol>\r\n\t<symbol id="txp_svg_link" viewBox="0 0 36 36">\r\n\t\t<path d="M26.5 26h-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5h5c2.5 0 4.5-2 4.5-4.5S29 14 26.5 14h-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5h5c4.1 0 7.5 3.4 7.5 7.5S30.6 26 26.5 26zM12 18.5c0-.8.7-1.5 1.5-1.5h9c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5h-9c-.8 0-1.5-.7-1.5-1.5zm2.5-4.5h-5C7 14 5 16 5 18.5S7 23 9.5 23h5c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5h-5C5.4 26 2 22.6 2 18.5S5.4 11 9.5 11h5c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5z"/>\r\n\t</symbol>\r\n\t<symbol id="txp_svg_icon_like" viewBox="0 0 20 20">\r\n\t\t<path d="M18.4 8.5l-2 9.4c-0.2 0.6-0.2 1.1-0.6 1.3 -0.4 0.3-1 0.2-1.9 0.2 -2.9 0-10.4 0-10.4 0l0-12 2.1-5c0 0 0.6-2 1.7-2 1.4 0 1.2 2 1.2 2s0 1.3 0 3c0 0.7 0.2 1 1 1 6.5 0 6.9 0 6.9 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0 1.6-0.2 1.9 0.5C18.5 7.4 18.6 7.9 18.4 8.5zM1.5 19.5c-0.6 0-1-0.4-1-1v-10c0-0.6 0.4-1 1-1s1 0.4 1 1v10C2.5 19.1 2.1 19.5 1.5 19.5z"></path>\r\n\t</symbol>\r\n\t<symbol id="txp_svg_loop" viewBox="0 0 36 36">\r\n\t\t<path d="M28.2 18.2l-2.1 2.1c-0.4 0.4-1 0.4-1.4 0 -0.2-0.2-0.3-0.5-0.3-0.7h0v-3c0-1.7-1.3-3-3-3h-5 -4c-0.6 0-1-0.4-1-1 0-0.6 0.4-1 1-1h4l0 0h6c2.2 0 4 1.8 4 4v1.6l0.3-0.3c0.4-0.4 1-0.4 1.4 0S28.6 17.8 28.2 18.2zM12.2 16.8c0.2 0.2 0.3 0.5 0.3 0.7h0v3c0 1.7 1.3 3 3 3h5 4c0.6 0 1 0.4 1 1 0 0.6-0.4 1-1 1h-4l0 0h-6c-2.2 0-4-1.8-4-4v-1.6l-0.3 0.3c-0.4 0.4-1 0.4-1.4 0 -0.4-0.4-0.4-1 0-1.4l2.1-2.1C11.2 16.4 11.8 16.4 12.2 16.8z"></path>\r\n\t</symbol>\r\n\t<symbol id="txp_svg_loop_off" viewBox="0 0 36 36">\r\n\t\t<path d="M15.5 23.5c-1.7 0-3-1.3-3-3v-3h0c0-0.3-0.1-0.5-0.3-0.7 -0.4-0.4-1-0.4-1.4 0l-2.1 2.1c-0.4 0.4-0.4 1 0 1.4 0.4 0.4 1 0.4 1.4 0l0.3-0.3v1.6c0 2.2 1.8 4 4 4h7v0l-2.4-2H15.5zM28.2 16.8c-0.4-0.4-1-0.4-1.4 0l-0.3 0.3v-1.6c0-2.2-1.8-4-4-4h-7l2.4 2h3.6c1.7 0 3 1.3 3 3v3h0c0 0.3 0.1 0.5 0.3 0.7 0.4 0.4 1 0.4 1.4 0l0.3-0.3v0l1.7-1.7C28.6 17.8 28.6 17.2 28.2 16.8zM13.1 12.8c-0.4-0.3-1-0.3-1.4 0.1 -0.4 0.4-0.3 1 0.1 1.4l12 10c0.4 0.3 1 0.3 1.4-0.1 0.4-0.4 0.3-1-0.1-1.4L13.1 12.8z"></path>\r\n\t</symbol>\r\n\t<symbol id="txp_svg_selected" viewBox="0 0 16 16">\r\n\t\t<path d="M1 8l5 5 9-10 -1-1 -8 9.2L2 7 1 8z"></path>\r\n\t</symbol>\r\n</svg>\r\n'},124:function(a,b){!function(a,b){b(a,jQuery)}("undefined"!=typeof window?window:this,function(a,b,c){"use strict";function d(){"hidden"!==e&&(g.hidden=i.pageVisibility?g[e]:c)}for(var e,f,g=a.document,h=["webkit","o","ms","moz",""],i=b.support||{},j=("onfocusin"in g&&"hasFocus"in g?"focusin focusout":"focus blur");(f=h.pop())!==c;)if(e=(f?f+"H":"h")+"idden",i.pageVisibility=g[e]!==c,i.pageVisibility){j=f+"visibilitychange";break}d(),b(/blur$/.test(j)?a:g).on(j,function(a){var c=a.type;b(g).triggerHandler(e&&g[e]||/^(?:blur|focusout)$/.test(c)?"hide":"show"),d()})})}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(96)},96:function(a,b,c){function d(a){g=Txplayer.$,this.msg=new Txplayer.Events,this.dataset={},this.context=a,this.init()}var e=c(97),f=Txplayer.util,g=Txplayer.$,h=c(98);d.prototype={init:function(){return this.updatePlayListIndex(0),this.context.dataset.playbackRate=1,this.dataset.retryTimes=0,this.context.dataset.videoCurrentTime=0,"string"===g.type(this.context.config.volume)&&/^\d+$/.test(this.context.config.volume)&&(this.context.config.volume=parseInt(this.context.config.volume)),"number"!==g.type(this.context.config.volume)||this.context.config.volume>100||this.context.config.volume<0?void f.showError("context.config.volume必须为 0~100 "):(this.context.dataset.volume=this.context.config.volume,this.playStateInit(),this.write(),this.loadSubPlugins(),this.resetVideoStatus(),this.setVolume({volume:this.context.dataset.volume,showTips:!1}),void this.keepVideoPlayingOnBadNet())},playStateInit:function(){this.setPlayState(-1)},loadSubPlugins:function(){var a=[];this.context.pluginConfig&&"array"===g.type(this.context.pluginConfig.subPlugins)&&(a=this.context.pluginConfig.subPlugins.slice(0));var b={msg:this.context.msg,userMsg:this.context.userMsg,dataset:this.context.dataset,userApi:this.context.userApi,$mod:{$videomod:this.dataset.$videomod}};f.loadPlugins.call(this,a,b)},write:function(){this.dataset.hasVideoHtmlWrited=!0,this.context.dataset.$playermod.append(this.buildHTML()),this.dataset.$videomod=this.context.dataset.$playermod.find('[data-role="'+this.dataset.renderData.videomod+'"]'),this.context.dataset.$videomod=this.dataset.$videomod,this.dataset.$video=this.dataset.$videomod.find("video"),this.addEventListener(),this.exportsModuleApis(),this.context.userMsg.emit("write")},remove:function(){this.dataset.$videomod.remove()},buildHTML:function(){var a=this,b={videomod:"txp-video-wrapper",data:{attrs:a.getAttrs().join(" "),videoStyle:a.getVideoStyles()}};this.dataset.renderData=b;var c=g.tmpl(e,b);return c},getAttrs:function(){var a={isUsePlayinline:"webkit-playsinline",isUseAirplay:"x-webkit-airplay",isUseControl:'controls="controls"',isUsePreload:['preload="auto"','preload="none"'],muted:"muted",isUseCrossOrigin:'crossOrigin="anonymous"'},b=[];for(var c in a)Txplayer.$.isArray(a[c])?this.context.config[c]===!0?b.push(a[c][0]):b.push(a[c][1]):this.context.config[c]===!0&&b.push(a[c]);return b},setVideoClass:function(a){if(a){var b=this;"array"===g.type(a.removeList)&&g(a.removeList).each(function(a,c){b.dataset.$video.hasClass(c)&&b.dataset.$video.removeClass(c)}),"array"===g.type(a.addList)&&g(a.addList).each(function(a,c){b.dataset.$video.addClass(c)})}},getVideoStyles:function(){var a=[];return a.push("background-color:#000;width:100%;height:100%;"),a.join(";")},videoHelper:function(a,b,c){if(f.v4log("videoHelper"+b,{isFocus:a.isFocus}),!(a&&a.error&&a.error.code&&"pause"===b)){c=c||[];var d,e="play"===b,g=this,h=function(){var d;if(!e||!a||a.paused)return d=c&&c.length?a[b].apply(a,c):a[b]()};if(d=h(),d&&d.then)this.dataset.videoDef=d,d.then(function(){g.dataset.videoDef=null})["catch"](function(a){f.showError("[videoHelper error]",a),g.dataset.videoDef=null});else{if(this.dataset.videoDef)return;h()}return d}},stopVideo:function(a){var b=!this.context.dataset.disableAutoPlayNext;a&&b&&(g(a).removeAttr("src"),a.load&&a.load())},resetFocusVideoUrl:function(a,b){var c=a.src;if(!this.context.dataset.useChromeHls&&!isNaN(b)){c=0==b?c.split("#t=")[0]:c.split("#t=")[0]+"#t="+Math.ceil(b);try{a.src=c,f.showInfo("resetFocusVideoUrl",c)}catch(d){}}},checkTimeisInBufferdRange:function(a){var b=this,c=b.getFocusVideoTag();if(this.isChrome56WithBug()&&this.isMp4sModel()&&!b.context.dataset.useChromeHls)return 0==a||Math.abs(c.currentTime-a)<6&&Math.abs(c.currentTime-a)>2;var d;if(!(c&&c.buffered&&c.buffered.length))return 0;for(var e=0,f=c.buffered.length;e<f;e++)if(d=c.buffered.end(e),d-=b.context.dataset.useHls?1:3,a>=c.buffered.start(e)&&a<=d)return!0;return!1},notSupportTParamInVideoSrc:function(){if(f.browser.ie)return!0},seekTo:function(a,b){var c=this,d=function(){try{if(c.checkTimeisInBufferdRange(b))return f.v4log("seekTo-checkTimeisInBufferdRange-true",{time:b}),c.context.dataset.useChromeHls?void c.videoHelper(a,"play"):(a.currentTime=b,void c.videoHelper(a,"play"));if(f.v4log("resetFocusVideoUrl-checkTimeisInBufferdRange-false",{time:b}),c.context.dataset.retrySeekTo||c.notSupportTParamInVideoSrc())return delete c.context.dataset.retrySeekTo,a&&a.duration&&(a.currentTime=b,c.videoHelper(a,"play")),void g(a).on("playing.HdPlayerSeekToPlayingHandler",function(){g(a).off("playing.HdPlayerSeekToPlayingHandler"),Math.abs(a.currentTime-b)>=5&&(a.currentTime=b,c.videoHelper(a,"play"))});c.resetFocusVideoUrl(a,b),c.videoHelper(a,"play")}catch(d){}};d()},getFocusVideoTag:function(){var a;return this.dataset.$video.each(function(b,c){if(c.isFocus)return a=c,!1}),a},getFocusVideoBuffer:function(a){var b=a||this.getFocusVideoTag();return b&&b.buffered&&b.buffered.length?b.buffered.end(b.buffered.length-1):0},updateCurrentVideoUrl:function(a){a&&(a.indexOf("blob:")>-1||a.indexOf("mediasource:")>-1||(this.context.dataset.currentVideoUrl=a))},setFocusVideoUrl:function(a){"string"===g.type(a)&&(a={url:a}),a&&"film"==a.type&&(this.context.dataset.currentPlayListType="film"),a.preload=a.preload||!0,a.autoplay=a.autoplay||!1;var b=this,c=b.getFocusVideoTag(),d=function(d){if(f.v4log("setFocusVideoUrl",{src:d,autoplay:a.autoplay}),b.updateCurrentVideoUrl(d),b.context.dataset.useChromeHls&&d&&"function"==g.type(d.indexOf)&&d.indexOf(".m3u8")!=-1)!a.currentTime&&b.context.dataset.hlsLoadStartTime&&(a.currentTime=b.context.dataset.hlsLoadStartTime),b.context.msg.broadcast("loadHlsSource",{p2pConfig:f.getP2pConfig(b.context),src:d,video:c,currentTime:a.currentTime,autoplay:a.autoplay,fromSetDefinition:a.fromSetDefinition}),a.currentTime&&(b.context.dataset.videoCurrentTime=a.currentTime);else{if(c.src!==d&&g(c).attr("src",d),a.preload)try{b.videoHelper(c,"load")}catch(e){f.showInfo(e,e.stack)}c.isFocus&&(f.showInfo("setFocusVideoUrl.setUrlAndPlay.isFocus"),a.autoplay=!0),a.currentTime?b.setVideoPlayTime(c,a.currentTime,a.autoplay):a.autoplay&&b.videoHelper(c,"play")}};a&&a.hasOwnProperty("updateIndex")&&this.translateIndex2PlayListIndex({type:a.type,index:a.updateIndex}),"string"===g.type(a.url)?d(a.url):"function"!==g.type(a.getUrlSync)||a.preloading?f.showInfo("setFocusVideoUrl参数错误, 找不到getUrlSync",a):(b.dataset.isGetingUrlSync=!0,f.showInfo("setFocusVideoUrl.getUrlSync","start"),a.getUrlSync().done(function(c){b.dataset.isGetingUrlSync=!1,b.dataset.requestPreloadUrlFail=!1,a.url=c,f.showInfo("setFocusVideoUrl.getUrlSync.setUrlAndPlay"),d(c)}).fail(function(a){b.dataset.requestPreloadUrlFail=!0,b.context.msg.broadcast("videoInterruptByError")}))},playTheNext:function(){var a=this.context.dataset.playListIndex,b=this.context.dataset.playList[a],c=this.context.dataset.playList[a+1],d="insertad"===this.context.dataset.currentPlayListType||"insertad"===b.type;return c?(d&&"insertad"!==c.type&&g(this.getFocusVideoTag()).trigger("ended",{from:"playNext"}),c.error?(this.updatePlayListIndex(this.context.dataset.playListIndex+1),void g(this.getFocusVideoTag()).trigger("error",{error:c.errorCode})):(this.updatePlayListIndex(this.context.dataset.playListIndex+1),f.showInfo("playTheNext",c),f.showInfo("playTheNext-type",this.context.dataset.currentPlayListType),c.autoplay=!0,this.setFocusVideoUrl(c),this.resetPlayListStatus("playing"),void(c.playing=!0))):void("loadingad"==b.type&&this.context.msg.broadcast("allLoadingAdPlayFail"))},resetPlayListStatus:function(a){a&&g.each(this.context.dataset.playList||[],function(b,c){c.hasOwnProperty(a)&&(c[a]=!1)})},clearFocusVideoUrl:function(){var a=this.getFocusVideoTag();this.videoHelper(a,"pause"),this.stopVideo(a),this.updateVideoStatus(a,"IDLE")},clearPreloadVideoUrl:function(){var a=this.getPreloadVideoTag();this.videoHelper(a,"pause"),this.stopVideo(a),this.updateVideoStatus(a,"IDLE")},isFocusVideoReady:function(){var a=this.getFocusVideoTag();return!(!a||!a.src)},updateVideoStatus:function(a,b){a&&(a.status=b)},updateSeeking:function(a){this.context.dataset.isVideoSeeking=!!a},setFocusVideoPlay:function(){var a=this.getFocusVideoTag();a.src?(this.videoHelper(a,"play"),this.updateVideoStatus(a,"PLAYING")):f.showInfo("play fail, video.src is null!")},setFocusVideoPause:function(){var a=this.getFocusVideoTag();a.src?(this.videoHelper(a,"pause"),this.updateVideoStatus(a,"PAUSE")):f.showInfo("pause fail, video.src is null!")},isFocusVideoBufferComplete:function(a){var b=a||this.getFocusVideoTag(),c=this.getFocusVideoBuffer(a);return parseInt(b.duration)===parseInt(c)||parseInt(b.duration)===Math.ceil(c)},getCurrentPlayListData:function(){var a={};return this.context.dataset.playList&&this.context.dataset.hasOwnProperty("playListIndex")&&this.context.dataset.playList[this.context.dataset.playListIndex]&&this.context.dataset.playList[this.context.dataset.playListIndex].data&&(a=this.context.dataset.playList[this.context.dataset.playListIndex].data),a},isMp4sModel:function(){return!!(this.context.dataset&&this.context.dataset.filmVideoData&&this.context.dataset.filmVideoData.length>1)},isChrome56WithBug:function(){return"chromehls"!==this.context.config.playerType&&(f.browser.chrome&&f.compareVersion(f.browser.chrome.version,"56.0.2924.10")>0)},isChrome56PlayAtTimeCount:function(){var a,b,c;return!!(this.isChrome56WithBug()&&(a=this.getCurrentPlayListData(),a&&a.hasOwnProperty("duration")&&(b=Number(a.duration),c=this.getFocusVideoTag(),b-10<=c.currentTime)))},isPreloadVideoBuffered:function(){var a=this.getPreloadVideoTag();return!!(a&&a.buffered&&a.buffered.length)},setVideoPlayTime:function(a,b,c){c="undefined"===g.type(c)||c,f.v4log("setVideoPlayTime",{time:b,autoplay:c}),"number"!==g.type(b)||isNaN(b)||(this.context.dataset.videoCurrentTime=b,this.seekTo(a,b),c&&this.videoHelper(a,"play"))},setFocusVideoCurrentTime:function(a){var b=this.getFocusVideoTag(),c=this;return a.time>b.duration&&!(c.context.dataset.useHls&&f.browser.safari&&a.time<=c.context.dataset.duration)?void f.showError("setFocusVideoCurrentTime Error","time="+a.time+",duration="+b.duration):this.context.dataset.useChromeHls?(c.context.msg.broadcast("setHlsCurrenTime",{video:b,currentTime:a.time,autoplay:a.autoplay}),void(a.time&&(this.context.dataset.videoCurrentTime=a.time))):void this.setVideoPlayTime(b,a.time,a.autoplay)},getFocusVideoBufferedTime:function(){var a=this.getFocusVideoTag();return a&&a.buffered&&a.buffered.length?a.buffered.end(a.buffered.length-1):0},getFocusVideoBufferedStartTime:function(){var a=this.getFocusVideoTag();return a&&a.buffered&&a.buffered.length?a.buffered.start(a.buffered.length-1):0},getPreloadVideoTag:function(){var a,b=this.getFocusVideoTag(),c=this.dataset.$video.length,d=b.index,e=this,f=function(){return d++,d>c&&(d=1),e.dataset.$video[d-1]};return a=f(),a.isFocus||"LOCK"===a.status?(a=f(),a.isFocus||"LOCK"===a.status?(a=f(),a.isFocus||"LOCK"===a.status?void 0:a):a):a},isPreloadVideoReady:function(){var a=this.getPreloadVideoTag();if(!a)return f.error("checkPreloadVideoStatus error: can not find preload video!"),!1;if(!a.src)return!1;if(this.context.dataset.playList[this.context.dataset.playListIndex+1].error)return!1;if("PRELOADING"===a.status)return!0;if("PRELOAD"===a.status){if(this.context.dataset.useChromeHls&&(a.src.indexOf("blob:")>-1||a.src.indexOf("mediasource:")>-1))return!0;var b=a.src,c=this.context.dataset.playListIndex+1;c>=this.context.dataset.playList.length&&(c=0);var d=this.context.dataset.playList[c];return b===d.url}return!1},setPreloadVideoUrl:function(a){var b,c=this,d=function(){return"string"===g.type(a)||!("object"!==g.type(a)||!a.url)};if((!this.isTheLastOfPlayList()||d())&&this.context.dataset.playList){a=a||{};var e=this.getPreloadVideoTag(),h=this.context.dataset.playListIndex+1;h>=this.context.dataset.playList.length&&(h=this.context.dataset.playListIndex);var i=function(b){if(f.v4log("setPreloadVideoUrl",{src:b,currentTime:a.currentTime,autoplay:a.autoplay}),c.dataset.hasPreload=!0,c.dataset.preloadUrl=b,c.updateVideoStatus(e,"PRELOAD"),!c.dataset.hasLoadSource||!b||"function"!=g.type(b.indexOf)||b.indexOf(".m3u8")==-1){if(c.context.dataset.useChromeHls&&b&&"function"==g.type(b.indexOf)&&b.indexOf(".m3u8")!=-1&&!c.dataset.hasLoadSource)c.dataset.hasLoadSource=!0,c.context.dataset.hlsLoadStartTime&&(a.currentTime=c.context.dataset.hlsLoadStartTime),c.context.msg.broadcast("loadHlsSource",{p2pConfig:f.getP2pConfig(c.context),src:b,currentTime:a.currentTime,video:e});else{g(e).attr("src",b),c.videoHelper(e,"pause");try{c.videoHelper(e,"load")}catch(d){f.showInfo(d,d.stack)}}e.isFocus&&(f.showInfo("setPreloadVideoUrl.setUrlAndPlay.videoIsFocus"),a.autoplay=!0),a.autoplay&&c.setPreloadVideoPlay(),c.context.dataset.preloadStartTime=+new Date}};b=a.url||this.context.dataset.playList[h],"string"===g.type(b)?i(b):b&&b.url&&!a.preload&&b.url!==e.src?i(b.url):b&&"function"===g.type(b.getUrlSync)&&!c.dataset.isGetingUrlSync&&(c.updateVideoStatus(e,"PRELOADING"),c.dataset.isGetingUrlSync=!0,b.getUrlSync().done(function(a){c.dataset.isGetingUrlSync=!1,c.dataset.requestPreloadUrlFail=!1,b.url=a,f.showInfo("setPreloadVideoUrl.setUrlAndPlay"),i(a)}).fail(function(a){c.updateVideoStatus(e,"IDLE"),c.dataset.requestPreloadUrlFail=!0}))}},setPreloadVideoPlay:function(a){a=a||{},f.v4log("setPreloadVideoPlay",a);var b=this.getPreloadVideoTag(),c=this.getFocusVideoTag(),d=a.currentTime||b.currentTime;if(b&&c){if(!b.src)return void f.error("播放失败：预加载的视频没找到播放地址");!d&&a.currentTime&&(d=a.currentTime),b.isFocus=!0,this.updateVideoStatus(b,"PLAYING"),(a.reload||b.isPreloadError)&&(this.videoHelper(b,"load"),b.isPreloadError=!1),c.isFocus=!1,this.updateVideoStatus(c,"IDLE"),this.videoHelper(c,"pause"),g(c).removeAttr("src"),a.notNeedUpdateIndex||this.updatePlayListIndex(this.context.dataset.playListIndex+1),f.v4log("updateVideoDisplay",a),this.updateVideoDisplay(),(d||"number"===g.type(d))&&(this.videoHelper(c,"pause"),this.setVideoPlayTime(b,d,!0))}},translateIndex2PlayListIndex:function(a){if(f.showInfo("translateIndex2PlayListIndex-1",a),a.hasOwnProperty("type")&&a.hasOwnProperty("index")){var b=this.context.dataset.playList||[],c=-1,d=-1;if(g.each(b,function(b,e){e.type===a.type&&(c+=1,c===a.index&&(d=b))}),a&&a.getValue)return d;d!==-1&&this.updatePlayListIndex(d),f.showInfo("translateIndex2PlayListIndex-2",d)}},updatePlayListIndex:function(a){f.showInfo("updatePlayListIndex",a),"number"!==g.type(a)||a<0||this.context.dataset.playList&&this.context.dataset.playList.length&&a>=this.context.dataset.playList.length||(this.context.dataset.playListIndex=a,this.setCurrentPlayListType())},setCurrentPlayListType:function(){if(!this.context.dataset.playList||this.context.dataset.playList&&!this.context.dataset.playList.length)return this.context.dataset.hasOwnProperty("isPlayingAd")&&(this.context.dataset.isPlayingAd=!1),void(this.context.dataset.currentPlayListType="film");var a=this.context.dataset.playList[this.context.dataset.playListIndex];a&&a.type&&(this.context.dataset.currentPlayListType=a.type,a.type===this.context.dataset.currentPlayListType&&"loadingad"===a.type,f.showInfo("setCurrentPlayListType",a.type),this.context.dataset.isTheLastOfCurrentType=this.isTheLastOfPlayList(a.type))},getLockVideoTag:function(){var a;return this.dataset.$video.each(function(b,c){if("LOCK"===c.status)return a=c,!1}),a},lockAndPreloadNext:function(a){a=a||{};var b=this.getFocusVideoTag(),c=this.getPreloadVideoTag(),d=this,e=this.context.dataset.playListIndex;if(!this.dataset.isGetingUrlSync){this.setPreloadVideoUrl(),this.updatePlayListIndex(this.context.dataset.playListIndex+1);var f=function(){b.isFocus=!1,d.updateVideoStatus(b,"LOCK"),d.videoHelper(b,"pause"),d.videoHelper(c,"play"),c.isFocus=!0,d.updateVideoStatus(c,"PLAYING"),d.updateVideoDisplay(),d.context.msg.on("videoEnd.lockAndPreloadNext",function(a){if(a.playListTypeEnd&&a.playListType){var f=d.getFocusVideoTag();d.context.msg.off("videoEnd.lockAndPreloadNext"),c.isFocus=!1,c.src=null,g(c).removeAttr("src"),d.updateVideoStatus(c,"IDLE"),f.isFocus=!1,f.src=null,g(f).removeAttr("src"),d.updateVideoStatus(f,"IDLE"),b.isFocus=!0,d.updateVideoStatus(b,"PLAYING"),d.updateVideoDisplay(),d.context.msg.once("videoPlaying",function(){d.dataset.disablePreload=!1,d.updatePlayListIndex(e)}),d.videoHelper(b,"play")}}),d.context.msg.on("videoPlaying.lockAndPreloadNext",function(){if("insertad"==d.context.dataset.currentPlayListType){var a=d.isTheLastOfPlayList(d.context.dataset.currentPlayListType);a&&(d.dataset.disablePreload=!0,d.context.msg.off("videoPlaying.lockAndPreloadNext"))}})};f()}},isTheLastOfPlayList:function(a){if(!this.context.dataset.playList||0===this.context.dataset.playList.length)return!0;var b=this.context.dataset.playList.length,c=this.context.dataset.playListIndex;if(a){var d=this.calcTotalPlaylist(a),e=this.getPlayListIndex(a);return e+1>=d}return this.context.dataset.useHls?c+1>=b:c+1>=b&&this.context.dataset.playList[this.context.dataset.playList.length-1].ended},calcTotalPlaylist:function(a){if(!a)return this.context.dataset.playList.length;var b=0;return g(this.context.dataset.playList).each(function(c,d){d.type===a&&b++}),b},getPlayListIndex:function(a){var b=0,c=this;return a&&g(c.context.dataset.playList).each(function(d,e){return c.context.dataset.playListIndex!==d&&void(e.type!==a&&b++)}),c.context.dataset.playListIndex-b},resetVideoStatus:function(){var a=this;this.dataset.$video.each(function(b,c){c.index=b,0===b?c.isFocus=!0:c.isFocus=!1,a.updateVideoStatus(c,"IDLE"),c.src&&a.stopVideo(c)}),this.updateVideoDisplay(),this.dataset.disablePreload=!1},updateVideoDisplay:function(){this.dataset.$video.each(function(a,b){b.isFocus===!0?b.style.display="block":b.style.display="none"})},play:function(a){var b=this.context.dataset.playListIndex,c=this.context.dataset.playList[b];c&&(c.autoplay=!0,this.context.dataset.isDefinitionSwitching&&this.context.dataset.useChromeHls&&this.getFocusVideoTag().src&&(c.playing=!0),c.playing&&!c.error?this.setFocusVideoPlay():c.ended?this.playTheNext():c.error?g(this.getFocusVideoTag()).trigger("error"):c.preloading&&(a.notNeedUpdateIndex||this.isPreloadVideoReady())?this.setPreloadVideoPlay(a):this.setFocusVideoUrl(c))},setVolume:function(a){var b;if("object"===g.type(a)?b=a.volume:(b=a,a={}),isNaN(b)||"number"!==g.type(b)||b>100&&b<0)return void f.showError("getVolume失败","player.setVolume(volume),volume必须为0-100的整数");if(0==b?this.mute({broadcast:!1,isUserAction:a.isUserAction}):this.unMute({broadcast:!1,isUserAction:a.isUserAction}),this.dataset.$video.each(function(a,c){c.volume=b/100}),b!==this.context.dataset.volume){this.context.dataset.volume=b,this.context.msg.broadcast("volumeChange",{volume:b,isUserAction:!!a.isUserAction});try{this.context.userMsg.broadcast("volumeChange",{volume:b,isUserAction:!!a.isUserAction})}catch(c){}a.showTips&&this.context.msg.broadcast("showUiVolumeTip",{volume:b})}},getVolume:function(){return this.context.dataset.volume},mute:function(a){if(a=a||{},a.hasOwnProperty("broadcast")||(a.broadcast=!0),this.dataset.$video.each(function(a,b){b.muted=!0}),this.context.dataset.muted=!0,a.broadcast){try{this.context.userMsg.broadcast("volumeChange",{volume:0,isUserAction:!!a.isUserAction})}catch(b){}this.context.msg.broadcast("volumeChange",{volume:0,isUserAction:!!a.isUserAction})}a.showTips&&this.context.msg.broadcast("showUiVolumeTip",{mute:!0})},unMute:function(a){if(a=a||{},a.hasOwnProperty("broadcast")||(a.broadcast=!0),this.dataset.$video.each(function(a,b){b.muted=!1}),this.context.dataset.muted=!1,a.broadcast){try{this.context.userMsg.broadcast("volumeChange",{volume:this.context.dataset.volume,isUserAction:!!a.isUserAction})}catch(b){}this.context.msg.broadcast("volumeChange",{volume:this.context.dataset.volume,isUserAction:!!a.isUserAction})}a.showTips&&this.context.msg.broadcast("showUiVolumeTip",{mute:!1})},adMute:function(a){a=a||{},a.hasOwnProperty("broadcast")||(a.broadcast=!0),this.context.dataset.muted||this.dataset.$video.each(function(a,b){b.muted=!0})},adUnMute:function(a){a=a||{},a.hasOwnProperty("broadcast")||(a.broadcast=!0),this.context.dataset.muted||this.dataset.$video.each(function(a,b){b.muted=!1})},volumeUp:function(a){var b=5;"number"===g.type(a)&&(b=parseInt(a));var c=this.getVolume();c+=b,c>100&&(c=100),this.setVolume(c)},volumeDown:function(a){var b=5;"number"===g.type(a)&&(b=parseInt(a));var c=this.getVolume();c-=b,c<0&&(c=0),this.setVolume(c)},setPlayState:function(a,b){if(b=b||{},"number"===g.type(a)&&a!==this.context.dataset.playState){this.context.dataset.playState=a,this.context.msg.broadcast("playStateChange",{state:a,vid:this.context.dataset.vid,reason:b.reason||""});try{this.context.userMsg.broadcast("playStateChange",{state:a,vid:this.context.dataset.vid,reason:b.reason||""})}catch(c){}}},getPlayState:function(){return this.context.dataset.playState},setInternalPlaybackRate:function(a){if(a>=4||a<=.4)return void this.context.msg.broadcast("showUiPlaybackRateTip",a);if(this.context.dataset.playbackRate!==a){a=Math.round(100*a)/100,this.context.dataset.playbackRate=a,this.setVideoPlaybackRate(a),this.context.msg.broadcast("showUiPlaybackRateTip",a),this.context.msg.broadcast("playbackRateChange",a);try{this.context.userMsg.broadcast("playbackRateChange",a)}catch(b){}}},setVideoPlaybackRate:function(a){this.dataset.$video.each(function(b,c){c.playbackRate=a})},getPlaybackRate:function(){return this.context.dataset.playbackRate},resetPlaybackRate:function(){this.setInternalPlaybackRate(1)},startWaitingFinder:function(){this.dataset.waitingFinder_TIMER&&this.stopWaitingFinder();var a=this.getFocusVideoTag();if(a){var b,c=this;this.dataset.waitingFinder_TIMER=setInterval(function(){if(a.isFocus||(a=c.getFocusVideoTag()),b!==a.currentTime||a.paused||a.ended)c.dataset.isBadNetWork&&c.context.msg.broadcast("networkBadEnd",{videoTag:a,playListType:c.context.dataset.currentPlayListType,index:c.getPlayListIndex(c.context.dataset.currentPlayListType)}),c.dataset.isBadNetWork=!1;else{if(c.dataset.isBadNetWork)return;c.context.msg.broadcast("networkBadStart",{videoTag:a,playListType:c.context.dataset.currentPlayListType,isOnWaiting:3===c.getPlayState(),index:c.getPlayListIndex(c.context.dataset.currentPlayListType)}),c.dataset.isBadNetWork=!0}b=a.currentTime},1500)}},stopWaitingFinder:function(){this.dataset.waitingFinder_TIMER&&(clearInterval(this.dataset.waitingFinder_TIMER),this.dataset.waitingFinder_TIMER=null)},stopVideoPlayingOnBadNet:function(){this.dataset.keepPlaying_TIMER&&(clearInterval(this.dataset.keepPlaying_TIMER),this.dataset.keepPlaying_TIMER=null)},keepVideoPlayingOnBadNet:function(){if(!this.dataset.keepPlaying_TIMER){var a=0,b=this,c=0,d=0;this.context.msg.on("vidChange",function(){a=0,c=0,d=0}),this.dataset.keepPlaying_TIMER=setInterval(function(){var e=b.getFocusVideoBuffer(),f=b.getFocusVideoTag(),g=b.context.dataset.videoCurrentTime||0;if(0!=b.context.dataset.playState&&b.context.dataset.playState!=-1&&!f.error&&!f.paused&&!f.ended&&f.src){if("BUFFERING"===f.status)return void b.startTriggerVideoError(f);d===e&&c===g?(b.updateVideoStatus(f,"BUFFER-CONFORM"),a++):(d=e,c=g,a=0,b.updateVideoStatus(f,"PLAYING")),a<5||(b.updateVideoStatus(f,"BUFFERING"),b.context.dataset.useChromeHls||(b.resetFocusVideoUrl(f,g),b.videoHelper(f,"load"),b.videoHelper(f,"play")),b.dataset.BUFFERINGTIME=0,a=0,b.msg.broadcast("videoPauseOnBadNetwork",{url:f.src,currentTime:g,index:b.context.dataset.playListIndex}))}},1e3)}},startTriggerVideoError:function(a){if(this.dataset.BUFFERINGTIME||(this.dataset.BUFFERINGTIME=0),this.dataset.BUFFERINGTIME++,this.dataset.BUFFERINGTIME>=30){if(this.context.dataset.useChromeHls&&this.dataset.BUFFERINGTIME<60)return;g(a).trigger("error",{detail:"timeout"}),this.dataset.BUFFERINGTIME=0}},triggerAndreportError:function(a,b,c,d){var e=this;c=c||e.context.dataset.currentPlayListType,d=d;var f=(a.src,{}),g={};if(g[1]=g[2]=g[3]=g[4]=g[5]="视频君与网络短暂失联，请刷新重试",e.context.dataset.useChromeHls&&"film"===c)return this.dataset.retryTimes=0,this.context.msg.broadcast("destroyHlsPlayer"),this.clearPlaylist(),this.context.dataset.currentTime&&(this.context.dataset.connectionPlayTime=this.context.dataset.currentTime),void this.context.msg.broadcast("chromehlsErrorSwitchToHtml5hd",{code:b});a&&a.error?(f.code=a.error.code,f.msg=g[f.code]):(f.code=5,f.msg=g[f.code]),f.type=c,f.videoTag=a,f.index=d,"insertad"===c&&(f.index=this.getPlayListIndex(c)),b&&(f.errCode=b),e.context.msg.broadcast("error",f);try{e.context.userMsg.broadcast("error",f)}catch(h){}"film"==c&&(this.dataset.hasReportError=!0)},addUrls2Player:function(a){var b={},c=this;if("array"===g.type(a)&&(b.data=a),"object"===g.type(a)&&"array"===g.type(a.data)&&(b=a),"array"!==g.type(b.data))return void f.showInfo("addUrls2Player 参数错误");c.context.dataset.playList&&!b.clear||(c.context.dataset.playList=[],0!==c.context.dataset.playListIndex&&c.updatePlayListIndex(0));var d;if(b.data&&b.type&&b.repalcePlayList===!0){var e=c.calcTotalPlaylist(b.type);b.data.length===e?(d=0,g(c.context.dataset.playList).each(function(a,e){e.type===b.type&&(c.context.dataset.playList[a]=b.data[d],d++)})):0===e?c.context.dataset.playList=c.context.dataset.playList.concat(b.data):(c.context.dataset.playList=[],c.context.dataset.playList=b.data)}else b.data&&b.type&&b.hasOwnProperty("startIndex")?(d=c.translateIndex2PlayListIndex({type:"film",index:b.startIndex,getValue:!0}),d>-1&&(b.startIndex=d),c.context.dataset.playList=f.insert2Array(b.data,b.startIndex,c.context.dataset.playList)):c.context.dataset.playList=c.context.dataset.playList.concat(b.data);!c.context.dataset.currentPlayListType&&c.context.dataset.hasOwnProperty("playListIndex")&&c.updatePlayListIndex(c.context.dataset.playListIndex)},stop:function(){this.setFocusVideoPause(),this.resetVideoStatus(),this.clearPlaylist(),this.setPlayState(0,{reason:"stop"}),this.context.dataset.bufferedTime=0,this.context.dataset.bufferHealth=0,this.context.dataset.currentTime=0,this.context.dataset.currentPlayListType=null,this.context.dataset.currentDefinitionFormat=null,this.context.dataset.currentDefinitionRate=null,this.context.dataset.currentVideoUrl=null,this.context.dataset.definition=null,this.context.dataset.getinfoJSON=null,this.context.dataset.hasLoadVideoUrl=null,this.context.dataset.isLoadingAdEmpty=null,this.context.dataset.isTheLastOfCurrentType=null,this.context.dataset.isProgressing=!1,this.context.dataset.isDefinitionSwitching=!1,this.context.dataset.loadingImageAdUrl=null,this.context.dataset.hasOwnProperty("isPlayingAd")&&(this.context.dataset.isPlayingAd=!1),this.context.msg.broadcast("userStopVideo",{})},getThePlayListIndex:function(a,b){if(!a)return-1;b="number"===g.type(b)?b:this.calcTotalPlaylist(a);var c,d=0;return g.each(this.context.dataset.playList,function(e,f){if(f&&f.type===a&&(d++,d===b))return c=e,!1}),c},handlerSkipAd:function(a){return},exportsModuleApis:function(){var a=this;this.dataset.moduleApis={},this.dataset.moduleApis.mute=this.mute.bind(this),this.dataset.moduleApis.unMute=this.unMute.bind(this),this.dataset.moduleApis.isMuted=function(){return!!a.context.dataset.muted},this.dataset.moduleApis.getPlayerState=this.getPlayState.bind(this),this.dataset.moduleApis.setVolume=this.setVolume.bind(this),this.dataset.moduleApis.getVolume=this.getVolume.bind(this),this.dataset.moduleApis.volumeUp=this.volumeUp.bind(this),this.dataset.moduleApis.volumeDown=this.volumeDown.bind(this),this.dataset.moduleApis.getPlaybackRate=this.getPlaybackRate.bind(this),this.dataset.moduleApis.stop=this.stop.bind(this),g.extend(this.context.userApi,this.dataset.moduleApis),this.dataset.privateApis={},this.dataset.privateApis.setVolume=this.setVolume.bind(this),this.dataset.privateApis.mute=this.mute.bind(this),this.dataset.privateApis.unMute=this.unMute.bind(this),this.dataset.privateApis.adMute=this.adMute.bind(this),this.dataset.privateApis.adUnMute=this.adUnMute.bind(this),this.dataset.privateApis.setInternalPlaybackRate=this.setInternalPlaybackRate.bind(this),this.dataset.privateApis.playTheNext=this.playTheNext.bind(this),g.each(this.dataset.privateApis,function(b,c){a.context.msg.on(b,c)}),this.dataset.dataApis={},this.dataset.dataApis.calcTotalPlaylist=function(b,c){c.data=a.calcTotalPlaylist(b)},this.dataset.dataApis.getFocusVideoTag=function(b,c){c.data=a.getFocusVideoTag()},this.dataset.dataApis.isPreloadVideoBuffered=function(b,c){c.data=a.isPreloadVideoBuffered()},this.dataset.dataApis.getPlayListIndex=function(b,c){c.data=a.getPlayListIndex(b)},this.dataset.dataApis.checkTimeisInBufferdRange=function(b,c){c.data=a.checkTimeisInBufferdRange(b)},g.each(this.dataset.dataApis,function(b,c){a.context.msg.setData(b,c)}),this.context.msg.on("addUrls2Player",a.addUrls2Player.bind(this)),this.context.msg.on("lockAndPreloadNext",a.lockAndPreloadNext.bind(this)),this.context.msg.on("clearPreloadVideoUrl",a.clearPreloadVideoUrl.bind(this)),this.context.msg.on("play",a.play.bind(this)),this.context.msg.on("pause",a.setFocusVideoPause.bind(this)),this.context.msg.on("setFocusVideoCurrentTime",a.setFocusVideoCurrentTime.bind(this)),this.context.msg.on("setFocusVideoUrl",a.setFocusVideoUrl.bind(this)),this.context.msg.on("setVideoClass",a.setVideoClass.bind(this)),this.context.msg.on("setPreloadVideoUrl",a.setPreloadVideoUrl.bind(this)),this.context.msg.on("handlerSkipAd",this.skipAllAd.bind(this))}},f.extend(d.prototype,h),Txplayer.register("HdPlayer",d)},97:function(a,b){a.exports='<txpdiv data-role="<%=videomod%>" class="txp_video_container">\r\n  <video style="<%=data.videoStyle%>" <%=data.attrs%> data-role="txp_video_tag" />\r\n  <video style="<%=data.videoStyle%>" <%=data.attrs%> data-role="txp_video_tag" />\r\n  <video style="<%=data.videoStyle%>" <%=data.attrs%> data-role="txp_video_tag" />\r\n</txpdiv>'},98:function(a,b){function c(){var a=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};z.v4log("onLoadedmetadata",{isFocus:a.isFocus}),this.context.msg.broadcast("videoLoadedMetaData",{videoTag:a})}function d(){var a=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};z.v4log("onCanplay",{isFocus:a.isFocus}),this.context.msg.broadcast("videoCanplay",{videoTag:a}),this.context.dataset.videoDuration=a.duration}function e(){var a=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};z.v4log("onCanplayThrough",{isFocus:a.isFocus}),this.context.msg.broadcast("onCanplayThrough",{videoTag:a})}function f(){var a=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};z.v4log("onPlay",{isFocus:a.isFocus}),a.isFocus&&a.src&&(this.updateCurrentVideoUrl(a.src),this.keepVideoPlayingOnBadNet(),this.updatePlayListIndex(this.context.dataset.playListIndex),this.context.msg.broadcast("videoPlay",{videoTag:a,playListType:this.context.dataset.currentPlayListType,index:this.getPlayListIndex(this.context.dataset.currentPlayListType)}),this.startWaitingFinder())}function g(){var a=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};if(z.v4log("onPlaying",{isFocus:a.isFocus}),a.isFocus&&a.src){this.updateCurrentVideoUrl(a.src),this.updateSeeking(!1),this.updateVideoStatus(a,"PLAYING");var b=this.context.dataset.currentPlayListType;"film"===b&&this.setPlayState(1);var c=this.context.dataset.playList[this.context.dataset.playListIndex];c&&(this.resetPlayListStatus("playing"),this.resetPlayListStatus("ended"),c.playing=!0),z.showInfo("onPlaying",this.context.dataset.currentPlayListType),z.showInfo("onPlaying",a.src),b&&(this.context.msg.broadcast("videoPlaying",{videoTag:a,playListType:b,index:this.getPlayListIndex(b)}),"film"===b?this.setVideoPlaybackRate(this.context.dataset.playbackRate):this.setVideoPlaybackRate(1),
this.dataset.retryTimes=0)}}function h(){var a=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};a.isFocus&&(this.context.msg.broadcast("videoProgress",{videoTag:a}),a.buffered&&a.buffered.length&&a.buffered.end(a.buffered.length-1)===a.duration&&C!==a.buffered.end(a.buffered.length-1)&&(C=a.buffered.end(a.buffered.length-1),this.context.dataset.isProgressing=!1,this.context.msg.broadcast("videoProgressDone",{videoTag:a,playListIndex:this.context.dataset.playListIndex,playListType:this.context.dataset.currentPlayListType})))}function i(){var a=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};if(z.v4log("onPause",{isFocus:a.isFocus}),a.isFocus){this.updateVideoStatus(a,"PAUSE");var b=this.context.dataset.currentPlayListType;this.context.msg.broadcast("videoPause",{videoTag:a,playListType:b,index:this.getPlayListIndex(b),end:a.ended}),"film"!==this.context.dataset.currentPlayListType||this.ended||this.setPlayState(2)}}function j(){var a=-1,b=this.context.dataset.playList[this.context.dataset.playListIndex];return b&&b.data&&b.data.duration&&(a=parseFloat(b.data.duration)),a}function k(a){if(a=a||{},this.isChrome56WithBug()&&this.isMp4sModel())return 0;var b=a.video;if(b&&b.buffered&&b.buffered.length){var c=0,d=b.currentTime,e=b.buffered.length;if(1===e)c=b.buffered.end(0);else for(var f=0,g=e;f<g;f++)if(d>=b.buffered.start(f)&&d<=b.buffered.end(f)){c=b.buffered.end(f);break}this.context.dataset.bufferHealth=parseInt(c-d),this.context.dataset.bufferHealth=this.context.dataset.bufferHealth<0?0:this.context.dataset.bufferHealth,this.context.dataset.videoBufferedTime=c}}function l(){if(!this.dataset.disablePreload){var a=this.context.dataset.playList[this.context.dataset.playListIndex+1];a&&(a.preloading||this.context.dataset.vid!=a.vid&&0==this.context.dataset.playListIndex||(this.isFocusVideoBufferComplete()||this.isChrome56PlayAtTimeCount())&&(this.setPreloadVideoUrl(),a.preloading=!0))}}function m(){var a=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};if(!a.isFocus)return this.videoHelper(a,"pause"),void this.updateVideoDisplay();this.context.msg.broadcast("timeupdateForSpeed",{videoTag:a});var b=parseInt(a.currentTime);if(b&&b!==B){B=b;var c=this.context.dataset.currentPlayListType,d=j.call(this);if(this.context.dataset.videoCurrentTime=a.currentTime>d&&d>-1?d:a.currentTime,this.context.dataset.isProgressing=!0,this.context.dataset.videoBufferedTime=0,!this.context.dataset.useHls&&"film"==c&&this.context.dataset.filmVideoData&&this.context.dataset.filmVideoData.length>1&&z.browser.chrome&&d>-1&&a.currentTime-d>.2&&!a.ended)return this.context.dataset.videoCurrentTime=d,this.videoHelper(a,"pause"),void Txplayer.$(a).trigger("ended",{from:"timeupdate"});if(k.call(this,{video:a}),l.call(this),this.context.msg.broadcast("videoTimeUpdate",{videoTag:a,playListType:c}),"film"===c)try{this.context.userMsg.broadcast("timeupdate",{videoTag:a})}catch(e){}}}function n(){var a=(this.context.dataset.playListIndex,this.context.dataset.playList[this.context.dataset.playListIndex]),b=this.context.dataset.playList[this.context.dataset.playListIndex+1],c=this.context.dataset.currentPlayListType,d={playListTypeEnd:!1,isAllEnd:!1};return a?(a.ended=!0,b?b.vid!==this.context.dataset.vid?(d.isAllEnd=!0,d.playListTypeEnd=!0,d):(a.type!==b.type&&(d.playListTypeEnd=!0),d):(d.isAllEnd=!0,d.playListTypeEnd=!0,"insertad"==c&&(d.isAllEnd=!1),d)):(d.isAllEnd=!0,d.playListTypeEnd=!0,d)}function o(){var a=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};z.v4log("onEnd",{isFocus:a.isFocus});var b=arguments&&arguments[1]?arguments[1]:{};if(a.isFocus){var c=this.context.dataset.currentPlayListType;if(this.updateSeeking(!1),this.resetPlayListStatus("playing"),"film"!==c&&"loadingad"!==c||(this.context.dataset.videoCurrentTime=0),a.duration===a.currentTime&&a.currentTime<this.context.dataset.duration-1&&"film"===c&&this.context.dataset.useHls&&z.browser.safari&&!(this.context.dataset.canPlayTime&&this.context.dataset.currentTime>=this.context.dataset.canPlayTime))return void Txplayer.$(a).trigger("error");var d=n.call(this),e=d.isAllEnd,f=d.playListTypeEnd;e&&(this.setPlayState(0),"loadingad"==c&&this.setPlayState(-1));var g={videoTag:a,index:this.context.dataset.playListIndex,playListIndex:this.getPlayListIndex(c),playListType:c,isAllEnd:e,playListTypeEnd:f,from:b&&b.from||"videoEvent"};e||f&&"insertad"===c||v.call(this),z.showInfo("after autoplayNext",this.context.dataset.currentPlayListType),w.call(this,g),this.context.msg.broadcast("videoEnd",g)}}function p(a,b,c){a=a||{};var d="";return a.detail&&("manifestLoadError"===a.detail||"levelLoadError"===a.detail?(d="05",d=Txplayer.v4errcode.getPlatformErrorCode("player","h5video",d)):"fragLoadError"===a.detail?(d="08",d=Txplayer.v4errcode.getPlatformErrorCode("player","h5video",d)):"manifestLoadLoadTimeOut"===a.detail||"levelLoadTimeOut"===a.detail?(d="06",d=Txplayer.v4errcode.getPlatformErrorCode("player","h5video",d)):"fragLoadTimeOut"===a.detail?(d="09",d=Txplayer.v4errcode.getPlatformErrorCode("player","h5video",d)):"timeout"===a.detail&&(d="04",d=Txplayer.v4errcode.getPlatformErrorCode("player","h5video",d))),"film"!==c&&b.error?d=Txplayer.errcode.getPlatformErrorCode("ad","aderror","0"+(b.error.code-1)):"film"!==c&&"timeout"===a?d=Txplayer.errcode.getPlatformErrorCode("ad","aderror","04"):"film"!==c&&a.error?d=Txplayer.errcode.getPlatformErrorCode("ad","aderror","0"+(a.error-1)):b.error&&(d=Txplayer.errcode.getPlatformErrorCode("player","h5video","0"+(b.error.code-1))),d}function q(){var a=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};z.v4log("onError",{isFocus:a.isFocus});var b=arguments&&arguments[1]?arguments[1]:{},c=a.isFocus?this.context.dataset.playListIndex:this.context.dataset.playListIndex+1,d=this.context.dataset.playList[c],e=d&&d.type?d.type:this.context.dataset.currentPlayListType,f=p(b,a,e);if(d){if(d.error=!0,d.errorCode=a.error&&a.error.code,!a.isFocus&&d.url!=a.src&&d.advid&&(d.error=!1),!a.isFocus)return void(this.context.dataset.useChromeHls&&"film"==e||this.stopVideo(a));if(this.context.msg.broadcast("reportVideoError",{videoTag:a,type:e,index:c,code:f||a.error&&a.error.code||"",url:b.url||a.src||""}),"film"!=e)return b.detail?void z.v4log("hls-triggerError",{detail:b.detail}):(this.triggerAndreportError(a,null,e,this.getPlayListIndex(e)),this.skipOneAd({type:e,video:a}),void(this.dataset.retryTimes=0));if(!this.dataset.hasReportError){if(this.dataset.retryTimes==this.context.config.globalRetryTimes)return this.triggerAndreportError(a,f,e,c),void this.dataset.retryTimes++;this.dataset.retryTimes++,d.error=!1,this.context.msg.broadcast("retryUrlsWhenErr",{currentTime:this.context.dataset.videoCurrentTime||0,index:this.getPlayListIndex("film")})}}}function r(){var a=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};z.v4log("onWaiting",{isFocus:a.isFocus}),this.context.msg.broadcast("videoWaiting",{videoTag:a,index:this.getPlayListIndex(this.context.dataset.currentPlayListType),playListType:this.context.dataset.currentPlayListType,seeking:a.seeking}),"film"===this.context.dataset.currentPlayListType&&this.setPlayState(3)}function s(){var a=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};if(z.v4log("onSeeking",{isFocus:a.isFocus}),a.isFocus){this.updateSeeking(!0);var b={videoTag:a,index:this.getPlayListIndex(this.context.dataset.currentPlayListType),playListType:this.context.dataset.currentPlayListType,seeking:!0};this.context.msg.broadcast("videoSeeking",b)}}function t(){var a=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};z.v4log("onSeeked",{isFocus:a.isFocus}),a.isFocus&&(this.updateSeeking(!1),this.context.msg.broadcast("videoSeeked"))}function u(){var a=arguments&&arguments[0]&&arguments[0].target?arguments[0].target:{};a.isFocus&&this.context.dataset.playbackRate&&a.playbackRate!=this.context.dataset.playbackRate&&(a.playbackRate=this.context.dataset.playbackRate)}function v(){this.dataset.disablePreload||this.isTheLastOfPlayList()||(this.isPreloadVideoReady()?this.setPreloadVideoPlay():this.playTheNext())}function w(a){a=a||{},a.videoTag&&this.updateVideoStatus(a.videoTag,"IDLE"),this.dataset.retryTimes=0,a.isAllEnd&&(0!==this.context.dataset.playListIndex&&this.updatePlayListIndex(0),this.clearPlaylist("vidEnd",this.context.dataset.vid),this.context.dataset.videoCurrentTime=0,this.context.dataset.currentTime=0,this.clearFocusVideoUrl(),this.stopWaitingFinder()),a.playListTypeEnd&&"insertad"===a.playListType&&this.clearPlaylist("insertad"),setTimeout(function(){a.isAllEnd||this.resetPlayListStatus("preloading")}.bind(this),300)}function x(a,b){var c=this.context.dataset.nextVideoInfo?this.context.dataset.nextVideoInfo.vid:"";this.context.dataset.isPreloadAd&&a==c||this.resetVideoStatus(),this.dataset.retryTimes=0,this.context.dataset.videoCurrentTime=0,this.context.dataset.currentTime=0,this.context.dataset.videoBufferedTime=0,this.dataset.BUFFERINGTIME=0,this.updateSeeking(!1),this.dataset.hasPreload=!1,this.dataset.preloadUrl=null,this.dataset.isPlayEndAndShowError=null,this.dataset.hasLoadSource=null,this.dataset.hasReportError=null,this.context.msg.off("videoEnd.lockAndPreloadNext")}function y(a,b){this.dataset.hasReportError=null,this.setPlayState(-1);var c=this.context.dataset.nextVideoInfo?this.context.dataset.nextVideoInfo.vid:"",d=this.context.dataset.playList||[],e=d[this.context.dataset.playListIndex];this.context.dataset.isPreloadAd&&a==c?(e&&"endingad"==e.type&&this.clearFocusVideoUrl(),this.clearPlaylist("vidEnd",b)):this.clearPlaylist()}var z=Txplayer.util,A={},B=-1,C=0;A.addEventListener=function(){this.dataset.$video.on("loadedmetadata",c.bind(this)).on("canplay",d.bind(this)).on("canplaythrough",e.bind(this)).on("play",f.bind(this)).on("playing",g.bind(this)).on("progress",h.bind(this)).on("pause",i.bind(this)).on("timeupdate",m.bind(this)).on("ended",o.bind(this)).on("error",q.bind(this)).on("waiting",r.bind(this)).on("seeking",s.bind(this)).on("seeked",t.bind(this)).on("ratechange",u.bind(this)),this.context.msg.on("beforeVideoPlay",y.bind(this)),this.context.msg.on("vidChange",x.bind(this)),this.context.msg.on("beforeVideoRePlay",function(){this.dataset.isGetingUrlSync=!1}.bind(this)),this.context.msg.on("seekStart",function(){this.updateSeeking(!0)}.bind(this))},A.skipOneAd=function(a){a=a||{};var b=this.context.dataset.playListIndex,c={},d={},e=this.context.dataset.vid,f=this.context.dataset.playList||[],g=f[b+1],h=f[b];if("insertad"===h.type&&g&&"insertad"!==g.type||"insertad"===h.type&&!g){if(a.video)return void Txplayer.$(a.video).trigger("ended",{from:"insertad-error"})}else{if("endingad"===h.type){var i=g&&g.vid!==this.context.dataset.vid||!g;if(i&&a.video)return void Txplayer.$(a.video).trigger("ended",{from:"endingad-error"})}Txplayer.$.each(f,function(a,b){b.vid===e&&(b.error&&(c[b.type]||(c[b.type]=0),c[b.type]+=1),d[b.type]||(d[b.type]=0),d[b.type]+=1)}),"loadingad"===a.type&&c.loadingad===d.loadingad&&this.context.msg.broadcast("allLoadingAdPlayFail"),"film"!==a.type&&this.context.dataset.playListIndex<f.length-1&&this.playTheNext()}},A.skipAllAd=function(){if(!this.dataset.isLimitSkipAd){this.dataset.isLimitSkipAd=!0;var a=this.context.dataset.currentPlayListType;if("film"!==a){var b=this.getLastIndexByTheType(a);if(b!==-1){var c=this.getFocusVideoTag();this.updatePlayListIndex(b),Txplayer.$(c).trigger("ended",{from:"skipAllAd"}),setTimeout(function(){this.dataset.isLimitSkipAd=!1}.bind(this),300)}}}},A.getLastIndexByTheType=function(a){if(!a)return-1;var b,c=this.calcTotalPlaylist(a),d=0;return Txplayer.$.each(this.context.dataset.playList,function(e,f){if(f&&f.type===a&&(d++,d===c))return b=e,!1}),b},A.clearPlaylist=function(a,b){if("vidEnd"===a&&b){var c=[];return Txplayer.$.each(this.context.dataset.playList,function(a,d){d.vid!==b&&c.push(d)}),this.context.dataset.playList=c,void this.updatePlayListIndex(0)}a||(this.context.dataset.playList=[]);var d=[],e=(this.context.dataset.playList[this.context.dataset.playListIndex],this.context.dataset.playListIndex),f=0;Txplayer.$(this.context.dataset.playList).each(function(b,c){return c.type===a?void f++:void d.push(c)}),this.context.dataset.playList=d,a?this.updatePlayListIndex(e-f<0?0:e-f):0!==this.context.dataset.playListIndex&&this.updatePlayListIndex(0)},a.exports=A}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(211)},211:function(a,b,c){function d(a){e=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util,g=c(212);d.prototype={init:function(){this.write(),this.addEventListerner()},write:function(){var a={shadow:"txp-shadow-mod"};this.dataset.renderData=a;var b=e.tmpl(g,a);this.context.$mod.$videomod.append(b),this.context.dataset.$shadow=this.context.$mod.$videomod.find("[data-role="+a.shadow+"]")},remove:function(){this.context.dataset.$shadow.remove()},initHDPlayerEvent:function(){var a=0,b=200,c=!1,d=this,e=function(){d.handlerClick()},f=function(){d.handlerDblClick()};this.context.dataset.$shadow.off("click.uishadow").off("dblclick.uishadow").on("click.uishadow",function(){d.context.dataset.isRightClickMenu||(a=setTimeout(function(){c||e(),c=!1},b))}).on("dblclick.uishadow",function(){clearTimeout(a),c=!0,f()})},handlerClick:function(){var a,b=this;return b.context.dataset.getinfoJSON?(a&&clearTimeout(a),void(a=setTimeout(function(){a=null,1===b.context.dataset.playState?(b.context.msg.broadcast("pause"),b.context.msg.broadcast("userPausePlayer")):(b.context.msg.broadcast("playControl",{connectionPlayType:1}),b.context.msg.broadcast("userPlayPlayer"))},300))):(b.context.msg.broadcast("beforeVideoRePlay"),b.context.msg.broadcast("playControl",{playStartTime:b.context.dataset.playStartTime,playEndTime:b.context.dataset.playEndTime,vid:b.context.dataset.vid,connectionPlayType:1}),void b.context.msg.broadcast("userPlayPlayer"))},handlerDblClick:function(){this.context.msg.broadcast("UiShadownDblClick")},addEventListerner:function(){f.mobile||this.initHDPlayerEvent()}},Txplayer.register("UiShadow",d)},212:function(a,b){a.exports='<txpdiv data-role="<%=shadow%>" class="txp_shadow"></txpdiv>'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(193)},193:function(a,b,c){function d(a){e=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util,g=c(194);d.prototype={init:function(){this.dataset.showPoster=!0,this.context.config.poster===!1?this.dataset.showPoster=!1:"string"===e.type(this.context.config.poster)&&(this.context.dataset.poster=this.context.config.poster),this.write(),this.initDisplay(),this.addEventListerner(),this.exportsModuleApis()},initDisplay:function(){function a(){c.context.dataset.poster||(f.mobile?c.context.dataset.poster="h5tiny"===c.context.config.playerType?f.getMobileVideoPosterByVid(b,0):f.getMobileVideoPosterByVid(b):c.context.dataset.poster=f.getPcVideoPosterByVid(b)),c.context.dataset.poster&&c.dataset.$poster.css({"background-image":"url("+c.context.dataset.poster+")","background-size":"cover"})}if(!this.context.dataset.autoplay&&!this.context.config.autoplay&&this.dataset.showPoster){var b=this.context.dataset.vid||this.context.config.vid,c=this;b?a():this.context.msg.on("ready",function(){b=c.context.dataset.vid,a()})}},write:function(){var a={poster:"txp-ui-poster"};this.dataset.renderData=a;var b=e.tmpl(g,a);this.context.dataset.$playermod.append(b),this.dataset.$poster=this.context.dataset.$playermod.find('[data-role="'+a.poster+'"]')},remove:function(){this.dataset.$poster.remove&&this.dataset.$poster.remove()},setPoster:function(a){"string"===e.type(a)&&(this.context.dataset.poster=a,this.initDisplay())},getPoster:function(){return this.context.dataset.poster},hide:function(){this.dataset.$poster.addClass(Txplayer.dataset.hideClass)},addEventListerner:function(){var a=this,b=this.context.dataset.playState,c=this.context.dataset.isPlayingAd;(e.inArray(b,[0,1,3])>-1||c)&&this.hide(),this.dataset.eventsList={},this.dataset.eventsList[f.getUniqueMsgKey("videoPlaying")]=function(){a.hide()},this.dataset.eventsList[f.getUniqueMsgKey("videoPlay")]=function(){f.mobile||a.hide()},this.dataset.eventsList[f.getUniqueMsgKey("vidChange")]=function(){a.context.dataset.poster=null,a.initDisplay(),a.context.dataset.autoplay&&a.hide()},e.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)})},exportsModuleApis:function(){this.dataset.moduleApis={},this.dataset.moduleApis.getPoster=this.getPoster.bind(this),this.dataset.moduleApis.setPoster=this.setPoster.bind(this),e.extend(this.context.userApi,this.dataset.moduleApis)}},Txplayer.register("UiPoster",d)},194:function(a,b){a.exports='<txpdiv data-role="<%=poster%>" class="txp_poster"></txpdiv>'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(73)},73:function(a,b){function c(a){d=Txplayer.$,this.dataset={},this.context=a,this.init()}var d=Txplayer.$,e=Txplayer.util;c.prototype={init:function(){this.addEventListener()},getDefaultParams:function(){this.dataset.format||(this.dataset.format=this.context.dataset.currentDefinitionFormat||""),this.dataset.rate||(this.dataset.rate=this.context.dataset.currentDefinitionRate||""),this.dataset.cdnID||(this.dataset.cdnID=this.context.dataset.cdnID);var a=e.getLoginID(),b=this.context.dataset.platform,c={loginid:a.loginId,loginex:a.loginIdEx,logintype:a.logintype,guid:this.context.dataset.guid||"",longitude:Txplayer.dataset.locationData&&Txplayer.dataset.locationData.longitude||"",latitude:Txplayer.dataset.locationData&&Txplayer.dataset.locationData.latitude||"",vip:this.isVip(),online:navigator.onLine?1:0,p2p:0,downloadkit:0,resolution:[screen.width,screen.height,window.devicePixelRatio||1].join("*"),testid:this.context.dataset.reportTestId||"",osver:[e.os.name,e.os.version].join(" "),playerver:"",playertype:1,uip:this.context.dataset.reportUsrIP||"",confid:"",cdnip:"",cdnid:this.dataset.cdnID||"",cdnuip:"",freetype:"",sstrength:"",network:"",speed:"",device:"",appver:Txplayer.dataset.ver,p2pver:"",url:location.href,refer:document.referrer,ua:e.getReportUA(),ptag:e.getPTAG(),flowid:this.context.dataset.flowid,platform:b||"",dltype:this.context.dataset.useHls?3:1,vid:this.context.dataset.vid||this.context.config.vid,fmt:this.dataset.format||"",rate:this.dataset.rate||"",clip:this.context.dataset.reportClip||"",status:this.context.dataset.reportStatus||"",type:this.context.dataset.reportType||"",duration:this.context.dataset.duration||""};return c},isVip:function(){var a="";return this.context&&this.context.config&&"function"===d.type(this.context.config.getUserType)&&(a=2==this.context.config.getUserType()?1:0),a},getLocation:function(){var a={},b=d.Deferred();return"https:"===location.protocol&&navigator.geolocation&&navigator.geolocation.getCurrentPosition?navigator.geolocation.getCurrentPosition(function(c){a=c&&c.coords?{latitude:c.coords.latitude,longitude:c.coords.longitude}:{latitude:"",longitude:""},b.resolve(a)},function(a){b.resolve({latitude:"",longitude:""})}):b.resolve({latitude:"",longitude:""}),b},resetDataset:function(){this.dataset={}},report:function(a,b){if(b=b||"4501",this.dataset.hasOwnProperty("sequence")||(this.dataset.sequence=-1),"4564"!=b&&++this.dataset.sequence,a.hasOwnProperty("seq")&&""!==a.seq||(a.seq=this.dataset.sequence||0),"4564"==b)for(var c in a)d.inArray(c,["step","flowid","data"])==-1&&delete a[c];var e=new Image,f="//btrace.video.qq.com/kvcollect?BossId=4501&Pwd=142347456&";"4564"==b&&(f="//btrace.video.qq.com/kvcollect?BossId=4564&Pwd=213967996&"),f+=d.param(a),e.src=f},step0:function(){var a={code:"",stime:this.context.config.pageInitTime};a=d.extend(this.getDefaultParams(),{data:JSON.stringify(a)}),a.step=0,this.report(a)},step5:function(){var a=this.context.config.playerInitTime||this.context.dataset.playerCreateStartTime,b={stime:a,etime:this.context.dataset.playerCreateEndTime,code:this.context.dataset.errorCodeOfStep5||""};b=d.extend(this.getDefaultParams(),{data:JSON.stringify(b)}),b.step=5,this.report(b)},step10:function(a){var b={stime:this.dataset.adCgiRequestStartTime,etime:this.dataset.adCgiRequestEndTime,code:this.dataset.errorCodeOfStep10||"",ip:""};if(a){if(!this.context.dataset.cacheLoadinadData)return;var c=+new Date;b={stime:c,etime:c,code:this.context.dataset.cacheLoadinadData.errorCodeOfStep10||"",ip:""}}b=d.extend(this.getDefaultParams(),{data:JSON.stringify(b)}),b.step=10,this.report(b)},step15:function(a){a=a||{};var b={ip:this.context.dataset.reportUsrIP,stime:a.startTime,etime:a.endTime,code:""};"timeout"===a.err?b.code=Txplayer.errcode.getPlatformErrorCode("getinfo","neterror","03"):a.err&&!a.hasOwnProperty("code")?b.code=Txplayer.errcode.getPlatformErrorCode("getinfo","neterror","01"):a.err&&a.hasOwnProperty("code")&&(b.code=Txplayer.errcode.getPlatformErrorCode("getinfo","cgiInnerError",a.code+"")),b=d.extend(this.getDefaultParams(),{data:JSON.stringify(b)}),b.step=15,this.report(b)},step20:function(a){a=a||{};var b={ip:this.context.dataset.reportUsrIP,stime:a.startTime,etime:a.endTime,code:a.errCode||""};b=d.extend(this.getDefaultParams(),{data:JSON.stringify(b)}),b.step=20,this.report(b)},step25:function(){if(this.dataset.hasOwnProperty("cacheOfStep25")&&this.dataset.cacheOfStep25.length){var a=d.extend(this.getDefaultParams(),{data:JSON.stringify(this.dataset.cacheOfStep25)});a.step=25,this.report(a)}},cacheStep25Data:function(a){a=a||{},this.dataset.hasOwnProperty("cacheOfStep25")||(this.dataset.cacheOfStep25=[]);var b={vid:a.currentAdVid||this.dataset.currentAdVid,format:"",stime:this.dataset.adPlayStart||"",letime:this.dataset.adPlayingStart||"",pstime:this.dataset.adPlayingStart||"",petime:this.dataset.adPlayErrorTime||this.dataset.adPlayEndTime||"",playduration:this.dataset.adPlayDuration||0,duration:a.currentAdDuration||this.dataset.currentAdDuration||0,code:this.dataset.errorCodeOfStep25||""};b.pstime&&b.stime&&b.pstime-b.stime<=200&&(b.stime=b.letime=b.pstime),this.dataset.cacheOfStep25.push(b)},step30:function(a){a=a||{};var b={stime:this.dataset.playTime||"",etime:this.dataset.playingTime||+new Date,bufferduration:"",vt:this.context.dataset.cdnID||"",url:a.url||this.context.dataset.currentVideoUrl||"",urlindex:"number"===d.type(this.dataset.currentVideoIndex)?this.dataset.currentVideoIndex:"",code:this.dataset.errorCodeOfStep30||""};this.dataset.hlsPlayTimeTheFirstTime&&(b.stime=this.dataset.hlsPlayTimeTheFirstTime),b=d.extend(this.getDefaultParams(),{data:JSON.stringify(b)}),b.step=30,this.report(b)},step31:function(){var a={type:1,stime:this.dataset.switchDefnPlayTime,etime:this.dataset.switchDefnPlayingTime,bufferduration:"",url:"",urlindex:"number"===d.type(this.dataset.currentVideoIndex)?this.dataset.currentVideoIndex:"",vt:this.context.dataset.cdnID,code:this.dataset.errorCodeOfStep31||""};a=d.extend(this.getDefaultParams(),{data:JSON.stringify(a)}),a.step=31,this.report(a)},step35:function(){if(!(this.dataset.waitingStartTime&&this.dataset.waitingEndTime&&this.dataset.waitingEndTime-this.dataset.waitingStartTime<=200)&&!(this.dataset.waitingDuration<200)&&this.context.dataset.currentTime){var a="";this.dataset.errorCodeOfStep35&&this.context.dataset.currentVideoUrl&&(a=this.context.dataset.currentVideoUrl);var b={val:[{reason:"",scene:1!=this.context.dataset.playbackRate?2:1,format:this.context.dataset.currentDefinitionFormat||"",ptime:this.context.dataset.currentTime||"",stime:this.dataset.waitingStartTime||"",etime:this.dataset.waitingEndTime||"",code:this.dataset.errorCodeOfStep35||"",url:a}],tcount:1,tduration:this.dataset.waitingDuration||""};b=d.extend(this.getDefaultParams(),{data:JSON.stringify(b)}),b.step=35,this.report(b)}},step40:function(a){a=a||{};var b={tcount:1,tbcount:0,tbduration:this.dataset.seekWaitingDuration||0,val:{format:this.context.dataset.currentDefinitionFormat,pstime:a.currentTimeWhenSeekStart||this.dataset.currentTimeWhenSeekStart||"",petime:a.currentTimeWhenSeekEnd||"",code:this.dataset.errorCodeOfStep40||""}};this.dataset.seekWaitingStartTime&&a.isSeekOfWaiting?(b.val.lstime=this.dataset.seekWaitingStartTime,b.val.letime=this.dataset.seekEndTime,b.tbcount=1):(b.val.lstime=0,b.val.letime=0,b.tbduration=0),b.val=[b.val],b=d.extend(this.getDefaultParams(),{data:JSON.stringify(b)}),b.step=40,this.report(b),delete this.dataset.seekWaitingDuration},step45:function(){var a={reason:"",auto:1,format:this.context.dataset.currentDefinitionFormat||"",pstime:this.dataset.switchDefnStartVideoTime||"",petime:this.dataset.switchDefnEndVideoTime||"",lstime:this.dataset.switchDefnPlayTime||"",letime:this.dataset.switchDefnPlayingTime||+new Date,url:this.context.dataset.currentVideoUrl||"",urlindex:"number"===d.type(this.dataset.currentVideoIndex)?this.dataset.currentVideoIndex:"",vt:this.context.dataset.cdnID,code:this.dataset.errorCodeOfStep45||""};a=d.extend(this.getDefaultParams(),{data:JSON.stringify(a)}),a.step=45,this.report(a)},step50:function(a){var b=a||this.getStep50Data();this.report(b),this.handlerStep50Data("delete",b.vid)},getStep50Data:function(a){a=a||{};var b={reason:a.reason||0,etime:+new Date,playduration:this.dataset.userPlayedTime,code:this.dataset.errorCodeOfStep50||""};return b=d.extend(this.getDefaultParams(),{data:JSON.stringify(b)}),b.step=50,b.seq=this.dataset.sequence?this.dataset.sequence+1:1,b},autoReportStep50:function(a){a=a||{},a.hasOwnProperty("limitTime")||(a.limitTime=!0);var b=this.handlerStep50Data("get");if("object"==d.type(b))for(var c in b)if("object"===d.type(b[c])&&(!a.prevVid||a.prevVid===c)){if(a.limitTime&&+new Date-b[c].updateTime<3e4)continue;delete b[c].updateTime,this.step50(b[c]),this.handlerStep50Data("delete",b[c].vid)}},autoSaveStep50Data:function(){var a=this.getStep50Data({reason:1});a&&a.vid&&(a.updateTime=+new Date,this.handlerStep50Data("save",this.context.dataset.vid,a))},handlerStep50Data:function(a,b,c){if("delete"!==a&&"save"!==a||b){var f,g,h,i=Txplayer.dataset.localStorageKey.userPlayedTime;f=e.getData(i),f||(f="{}");try{g=JSON.parse(f)}catch(j){h=!0}if(h||!g||"object"!=d.type(g))return void e.delData(i);if("delete"===a&&g[b])delete g[b],e.setData(i,JSON.stringify(g));else{if("get"===a)return b?g[b]:g;"save"===a&&c&&(g[b]=c,e.setData(i,JSON.stringify(g)))}}},deleteErrorCodes:function(){for(var a in this.dataset)a&&0==a.indexOf("errorCodeOfStep")&&delete this.dataset[a]},step36:function(a){a=a||{};var b={type:a.type,format:this.context.dataset.currentDefinitionFormat,tcount:a.retryTimes,ptime:this.context.dataset.currentTime,stime:this.dataset.playTime,etime:+new Date,url:a.url||"",code:a.code||"",appver:Txplayer.dataset.ver,guid:this.context.dataset.guid||""};this.dataset.hlsPlayTime&&(b.stime=this.dataset.hlsPlayTime),b=d.extend(this.getDefaultParams(),{data:JSON.stringify(b)}),b.step=36,this.report(b,"4564")},step15_4564:function(a){a=a||{};var b={stime:a.startTime,etime:a.endTime,code:a.errCode||"",ip:this.context.dataset.reportUsrIP||"",url:a.url||""};b=d.extend(this.getDefaultParams(),{data:JSON.stringify(b)}),b.step=15,this.report(b,"4564")},step20_4564:function(a){a=a||{};var b={stime:a.startTime,etime:a.endTime,code:a.errCode||"",ip:this.context.dataset.reportUsrIP||"",url:a.url||""};b=d.extend(this.getDefaultParams(),{data:JSON.stringify(b)}),b.step=20,this.report(b,"4564")},addEventListener:function(){var a=this,b=0;this.autoReportStep50(),this.context.config.pageInitTime&&this.step0(),this.context.msg.on("vidChange",function(c,d){a.autoReportStep50({limitTime:!1,prevVid:d}),b=0,a.resetDataset()}),this.context.msg.on("beforeVideoPlay",function(){a.dataset.hlsPlayTimeTheFirstTime=null,a.dataset.hlsPlayTime=null}),this.context.dataset.isReady?a.step5():this.context.msg.on("ready",function(){a.step5()}),this.context.msg.on("getinfoFinish",function(b){a.step15_4564({startTime:b.startTime,endTime:b.endTime,url:b.getinfoURL,errCode:b.errCode||""}),b&&b.err&&!b.isLastRetry||a.step15(b)}),this.context.msg.on("getkeyFinish",function(b){a.step20_4564({startTime:b.startTime,endTime:b.endTime,url:b.getkeyURL,errCode:b.errCode||""}),b&&b.err&&!b.isLastRetry&&!b.em||a.step20(b)}),this.context.msg.on("reportVideoError",function(c){if(c=c||{},"film"===c.type){var d;a.dataset.hasOwnProperty("playingTime")?a.context.dataset.isDefinitionSwitching?(d=3,a.dataset.errorCodeOfStep31=c.code):a.context.dataset.isVideoSeeking?(d=2,a.dataset.errorCodeOfStep40=c.code):(d=1,a.dataset.errorCodeOfStep35=c.code):(d=0,a.dataset.errorCodeOfStep30=c.code),c.url&&c.url.indexOf&&c.url.indexOf("blob:")>-1&&(c.url=a.context.dataset.currentVideoUrl),a.step36({type:d,code:c.code,url:c.url,retryTimes:b++})}}),this.context.msg.on("videoPlay.h5report-step30",function(b){e.v4log("step30-videoPlay",b),"film"===b.playListType&&(a.dataset.playTime=+new Date,a.dataset.currentVideoIndex=b.index)}),this.context.msg.on("hlsStartPlay.h5report-step30",function(b){e.v4log("step30-hlsStartPlay",b),a.dataset.hlsPlayTimeTheFirstTime||(a.dataset.hlsPlayTimeTheFirstTime=+new Date),a.dataset.hlsPlayTime=+new Date}),this.context.msg.on("videoPlaying.h5report-step30",function(c){if(e.v4log("step30-videoPlaying",c),"film"===c.playListType){b=0;var d=a.dataset.hasOwnProperty("playingTime");a.dataset.playingTime=+new Date,a.deleteErrorCodes(),d||(e.v4log("step30",{}),a.step30())}}),this.context.msg.on("setDefinitionStart",function(b){a.dataset.switchDefnStartVideoTime=a.context.dataset.currentTime;var c=function(){a.context.msg.off("videoPlay.h5report-step31"),a.context.msg.off("videoPlaying.h5report-step31"),a.context.msg.off("reportVideoError.h5report-step31")};a.context.msg.once("videoPlay.h5report-step31",function(b){a.dataset.switchDefnPlayTime=+new Date}),a.context.msg.once("videoPlaying.h5report-step31",function(b){a.dataset.switchDefnHasReported=a.dataset.hasOwnProperty("switchDefnPlayingTime"),a.dataset.switchDefnPlayingTime=+new Date,a.dataset.currentVideoIndex=b.index,c()})}),this.context.msg.on("setDefinitionDone",function(b){b&&b.hasOwnProperty("hlsDefinitionEndTime")&&(a.dataset.switchDefnPlayTime=a.dataset.switchDefnPlayingTime=b.hlsDefinitionEndTime),a.dataset.switchDefnEndVideoTime=a.context.dataset.currentTime,a.step45(),a.dataset.switchDefnHasReported||a.step31()}),this.context.msg.on("setDefinitionFail",function(b){a.dataset.switchDefnEndVideoTime=a.context.dataset.currentTime,b.errCode&&(a.dataset.errorCodeOfStep45=b.errCode,a.step45(),delete a.dataset.errorCodeOfStep45)}),this.context.msg.on("getVideoUrlSuccess",function(){delete a.dataset.switchDefnPlayingTime,delete a.dataset.switchDefnPlayTime}),this.context.msg.on("videoTimeUpdate",function(b){return b&&"film"===b.playListType?("number"!=typeof a.dataset.userPlayedTime&&(a.dataset.userPlayedTime=0),a.dataset.userPlayedTime++,void a.autoSaveStep50Data()):void a.autoSaveStep50Data()}),this.context.msg.on("videoEnd.h5report-step50",function(b){b&&b.playListTypeEnd&&"film"===b.playListType&&(a.step50(),delete a.dataset.userPlayedTime)}),this.context.msg.on("error.h5report-step50",function(b){b&&"film"!==b.type&&"cgi"!==b.type||(b&&b.errCode&&(a.dataset.errorCodeOfStep50=b.errCode,a.dataset.hasOwnProperty("playingTime")||(a.dataset.errorCodeOfStep30=b.errCode)),!a.dataset.hasOwnProperty("playingTime")&&a.dataset.errorCodeOfStep30?(a.step30(),delete a.dataset.errorCodeOfStep30):a.dataset.hasOwnProperty("playingTime")&&(a.dataset.errorCodeOfStep31?(a.step31(),a.dataset.errorCodeOfStep45=a.dataset.errorCodeOfStep31,a.step45(),delete a.dataset.errorCodeOfStep45,delete a.dataset.errorCodeOfStep31):a.dataset.errorCodeOfStep40?(a.step40(),delete a.dataset.errorCodeOfStep40):a.dataset.errorCodeOfStep35&&(a.step35(),delete a.dataset.errorCodeOfStep35)),a.dataset.step50_TIMER&&(clearTimeout(a.dataset.step50_TIMER),a.dataset.step50_TIMER=null),a.dataset.step50_TIMER=setTimeout(function(){a.step50(),delete a.dataset.errorCodeOfStep50},50))});var c=function(){a.dataset.hasOwnProperty("waitingTimes")||(a.dataset.waitingTimes=0),a.dataset.waitingTimes++},f=function(){var b=a.dataset.waitingEndTime-a.dataset.waitingStartTime;b>3e4&&(b=3e4),"number"!==d.type(a.dataset.waitingDuration)&&(a.dataset.waitingDuration=0),a.dataset.waitingDuration=b},g=function(b){a.context.dataset.useChromeHls&&a.context.msg.broadcast("reportChromeHlsError",0),a.dataset.waitingTimes>20||(a.dataset.waitingStartTime=+new Date,c(),a.context.msg.off("videoPlaying.h5report-step35"),a.context.msg.once("videoPlaying.h5report-step35",function(){a.dataset.waitingEndTime=+new Date,f(),delete a.dataset.errorCodeOfStep35,a.step35()}))};this.context.msg.on("videoWaiting",function(b){b&&!b.seeking&&"film"===b.playListType&&a.dataset.hasOwnProperty("playingTime")&&(a.context.dataset.isVideoSeeking||a.context.dataset.isDefinitionSwitching||g(b))}),this.context.msg.on("networkBadStart",function(b){"film"===b.playListType&&(b.isOnWaiting||a.context.dataset.isVideoSeeking||a.context.dataset.isDefinitionSwitching||g(b))});var h=function(){return a.dataset.userSeekTimes>32||(a.dataset.hasOwnProperty("userSeekTimes")||(a.dataset.userSeekTimes=1),!1)};this.context.msg.on("seekStart",function(b){b&&b.isUserAction===!1||h()||(b.currentTimeWhenSeekStart&&(a.dataset.currentTimeWhenSeekStart=b.currentTimeWhenSeekStart),a.dataset.seekStartTime=+new Date,"number"!==d.type(a.dataset.seekTimes)&&(a.dataset.seekTimes=0),a.dataset.seekTimes+=1,a.context.msg.off("videoWaiting.h5report-step40"),a.context.msg.off("reportVideoError.h5report-step40"),a.context.msg.once("videoPlaying.h5report-step40",function(b){b&&b.seeking&&"film"===b.playListType&&(a.context.msg.off("videoWaiting.h5report-step40"),a.context.msg.off("reportVideoError.h5report-step40"))}))}),this.context.msg.on("seekEnd",function(b){if((!b||b.isUserAction!==!1)&&!h()&&(a.dataset.seekEndTime=+new Date,a.context.msg.off("videoWaiting.h5report-step40"),a.context.msg.off("reportVideoError.h5report-step40"),b&&b.seekStartTime&&b.seekEndTime)){var c=b.seekEndTime-b.seekStartTime,d=c>200;b.hasOwnProperty("isSeekTimeInBuffer")&&b.isSeekTimeInBuffer&&(d=!1),d&&(a.dataset.seekWaitingDuration=c,a.dataset.seekWaitingStartTime=b.seekStartTime),delete a.dataset.errorCodeOfStep40,a.step40({currentTimeWhenSeekStart:b.currentTimeWhenSeekStart,currentTimeWhenSeekEnd:b.currentTimeWhenSeekEnd,isSeekOfWaiting:d}),delete a.dataset.seekWaitingStartTime,a.dataset.userSeekTimes+=1}}),this.context.msg.on("videoPlay",function(b){if(b&&"film"!==b.playListType){a.dataset.adPlayStart=+new Date;var c=a.context.dataset.adList[b.index];if(c&&c.image){var e="";"array"===d.type(c.image)?e=c.image[0].vid:"object"===d.type(c.image)&&(e=c.image.vid),a.dataset.currentAdVid=e,a.dataset.currentAdDuration=Number(c.duration)/1e3}}}),this.context.msg.on("videoPlaying",function(b){return b=b||{},"film"===b.playListType?void(a.dataset.cacheOfStep25&&a.dataset.cacheOfStep25.length&&(a.step25(),delete a.dataset.adPlayDuration,a.dataset.cacheOfStep25=[])):void(a.dataset.adPlayingStart=+new Date)}),this.context.msg.on("videoTimeUpdate",function(b){b&&"film"!==b.playListType&&("number"!=typeof a.dataset.adPlayDuration&&(a.dataset.adPlayDuration=0),a.dataset.adPlayDuration++)}),this.context.msg.on("videoEnd",function(b){b=b||{},"loadingad"==b.playListType&&(a.dataset.adPlayEndTime=+new Date,a.cacheStep25Data(),delete a.dataset.adPlayDuration)}),this.context.msg.on("adCgiLoaded",function(b){if(b=b||{},b.adType&&"前贴"==b.adType){var c="";1==b.code?c=Txplayer.errcode.getPlatformErrorCode("ad","neterror","01"):3==b.code?c=Txplayer.errcode.getPlatformErrorCode("ad","neterror","03"):4==b.code&&(c=Txplayer.errcode.getPlatformErrorCode("ad","neterror","04")),b.etime&&b.stime&&(a.dataset.errorCodeOfStep10=c,a.dataset.adCgiRequestStartTime=b.stime,a.dataset.adCgiRequestEndTime=b.etime,a.context.dataset.vid!=b.vid&&b.isPrepLoad?(a.context.dataset.cacheLoadinadData=b,a.context.dataset.cacheLoadinadData.errorCodeOfStep10=c):a.step10(),delete a.dataset.errorCodeOfStep10)}}),this.context.msg.on("vidChange",function(b){a.context.dataset.cacheLoadinadData&&setTimeout(function(){a.step10(!0),a.context.dataset.cacheLoadinadData=null},50)}),this.context.msg.on("reportVideoError",function(b){if(b=b||{},"film"!==b.type&&(!b.videoTag||b.videoTag.isFocus)){a.dataset.adPlayErrorTime=+new Date,a.dataset.errorCodeOfStep25=b.code;var c=a.context.dataset.adList[b.index];if(c&&c.image){var e="";"array"===d.type(c.image)?e=c.image[0].vid:"object"===d.type(c.image)&&(e=c.image.vid),a.cacheStep25Data({currentAdVid:e,currentAdDuration:Number(c.duration)/1e3}),delete a.dataset.errorCodeOfStep25,delete a.dataset.adPlayErrorTime}}})}},Txplayer.register("H5Report",c)}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(108)},62:function(a,b){var c={unstarted:-1,ended:0,playing:1,paused:2,buffering:3,cued:4,stop:5},d={msd:"流畅180P",sd:"标清270P",hd:"高清480P",shd:"超清720P",fhd:"蓝光1080P"};a.exports={playerstate:c,definitionMap:d}},108:function(a,b,c){function d(a){e=Txplayer.$,this.msg=new Txplayer.Events,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util;c(62).definitionMap;d.prototype={init:function(){this.dataset.dataKey=Txplayer.dataset.localStorageKey.playTime,this.dataset.videoPlayedIndex=0,this.resetDataset(),this.addEventListener(),this.exportsModuleApis()},resetDataset:function(){if(this.dataset.isGetinfoDone){var a=["videoPlayedIndex","isGetinfoDone","dataKey","prevDefinition","setDefinitionStartTime","hasReportLoadingadLoadTime","filmFirstPlayingTime"];for(var b in this.dataset)e.inArray(b,a)>-1||delete this.dataset[b]}},resetDatasetOnVidChange:function(){var a=["isGetinfoDone","setDefinitionStartTime","hasReportLoadingadLoadTime","filmFirstPlayingTime","timeupdateCounter"],b=this;e.each(a,function(a,c){delete b.dataset[c]})},getDefaultReportData:function(){if(!Txplayer.dataset.vplayPageRecoReport)try{Txplayer.dataset.vplayPageRecoReport=sessionStorage.getItem("report_recomm_player"),sessionStorage.removeItem("report_recomm_player")}catch(a){}var b={uin:Txplayer.util.getQQFromCookie(),vid:this.context.dataset.vid||"",coverid:this.context.dataset.cid||"",pid:this.context.dataset.playerId||"",guid:this.context.dataset.guid||"",unid:this.context.dataset.unid||"",vt:this.getCDNChannelId(),type:this.getBusinessType(),url:document.URL,bi:this.getCurrentVideoDuration(),bt:this.context.dataset.duration||"",version:Txplayer.dataset.ver||"",platform:this.context.dataset.platform,format:this.context.dataset.currentDefinitionFormat||"",defn:this.context.dataset.definition||"",ctime:f.dateFormat(),ptag:f.getPTAG(),isvip:-1,tpid:this.context.dataset.tpid||"",pversion:this.context.config.playerType,hc_uin:Txplayer.util.getQQFromCookie(),hc_main_login:Txplayer.util.cookie.get("main_login"),hc_vuserid:Txplayer.util.cookie.get("vuserid"),hc_openid:Txplayer.util.cookie.get("openid"),hc_appid:Txplayer.util.cookie.get("appid"),hc_pvid:Txplayer.util.cookie.get("pgv_pvid"),hc_ssid:Txplayer.util.cookie.get("psessionid"),hc_qq:Txplayer.util.getQQFromCookie(),hh_ua:f.getReportUA(),ckey:this.context.dataset.ckey||"",iformat:this.context.dataset.currentDefinitionFormat||"",hh_ref:f.getTopFrameUrl()};return b.v_idx=this.dataset.videoPlayedIndex||0,b.rcd_info=Txplayer.dataset.vplayPageRecoReport||"",b.extrainfo=this.context.config.extrainfo||"",this.context&&this.context.config&&"function"===e.type(this.context.config.getUserType)&&(b.isvip=2==this.context.config.getUserType()?1:0),this.context.dataset.useHls||(b.vurl=this.context.dataset.currentVideoUrl||""),b},reportStep3:function(a){var b={step:3,val:0===this.context.dataset.connectionPlayType?1:2,idx:this.context.dataset.connectionPlayType,c_info:this.context.config.getOuterReportData()},c={width:this.context.dataset.playerWidth,height:this.context.dataset.playerHeight};c&&c.width&&c.height&&(b.diagonal=parseInt(Math.sqrt(Math.pow(c.width,2)+Math.pow(c.height,2)))),b.isfocustab=this.context.dataset.isWindowFocus,b.isvisible=this.context.msg.getData("isPlayerInScreen"),b.isfocustab=b.isfocustab?1:0,b.isvisible=b.isvisible?1:0,this.doBossReport(b)},reportStep4:function(){var a={step:4,val:this.context.msg.getData("calcTotalPlaylist","film"),val1:1,bi:this.context.dataset.hasOwnProperty("isPlayingAd")?2:1,idx:this.context.dataset.connectionPlayType,c_info:this.context.config.getOuterReportData()},b={width:this.context.dataset.playerWidth,height:this.context.dataset.playerHeight};b&&b.width&&b.height&&(a.diagonal=parseInt(Math.sqrt(Math.pow(b.width,2)+Math.pow(b.height,2)))),a.isfocustab=this.context.dataset.isWindowFocus,a.isvisible=this.context.msg.getData("isPlayerInScreen"),a.isfocustab=a.isfocustab?1:0,a.isvisible=a.isvisible?1:0,a.reportFrom=this.context.config.reportFrom,this.doBossReport(a)},reportStep5:function(a){a=a||{};var b;a.isEnd?b={step:5,val:a.realtime,val1:a.isEnd?1:2,bi:a.totaltime}:(b=a,b.val1=a.isEnd?1:2,b.val=a.realtime,b.bi=a.totaltime,b.step=5,delete b.isEnd,delete b.realtime,delete b.totaltime),b.idx=this.context.dataset.connectionPlayType;var c={width:this.context.dataset.playerWidth,height:this.context.dataset.playerHeight};c&&c.width&&c.height&&(b.diagonal=parseInt(Math.sqrt(Math.pow(c.width,2)+Math.pow(c.height,2)))),b.isfocustab=this.context.dataset.isWindowFocus,b.isvisible=this.context.msg.getData("isPlayerInScreen"),b.isfocustab=b.isfocustab?1:0,b.isvisible=b.isvisible?1:0,b.c_info=this.context.config.getOuterReportData(),this.doBossReport(b)},reportStep6:function(a){var b={step:6,val:a.firstLoadTime,val1:a.loadingAdStatus,val2:1,idx:this.context.dataset.connectionPlayType,bi:"",bt:"",c_info:this.context.config.getOuterReportData()},c={width:this.context.dataset.playerWidth,height:this.context.dataset.playerHeight};c&&c.width&&c.height&&(b.diagonal=parseInt(Math.sqrt(Math.pow(c.width,2)+Math.pow(c.height,2)))),b.isfocustab=this.context.dataset.isWindowFocus,b.isvisible=this.context.msg.getData("isPlayerInScreen"),b.isfocustab=b.isfocustab?1:0,b.isvisible=b.isvisible?1:0,"number"===e.type(this.dataset.firstLoadingadEndTime)&&"number"===e.type(this.dataset.loadingadProgressedTime)&&(b.bi=this.dataset.firstLoadingadEndTime-this.dataset.loadingadProgressedTime),this.doBossReport(b)},reportStep7:function(a){var b={step:7,val:0,val1:0,idx:this.context.dataset.connectionPlayType,c_info:this.context.config.getOuterReportData()};this.doBossReport(b)},reportStep70:function(a){var b={step:70,val:a};this.doBossReport(b)},reportStep30:function(a){var b={step:30,val:a.loadTime,val1:a.hasOwnProperty("val1")?a.val1:0,val2:2,bi:this.context.dataset.videoDuration};this.context.dataset.useHls?b.val2=3:"html5hd"===this.context.config.playerType?b.val2=1:"ipadh5"!==this.context.config.playerType&&"h5"!==this.context.config.playerType||(b.val2=2),this.doBossReport(b)},reportStep50:function(a){var b={step:50,val:a.loadTime||"",val1:a.hasOwnProperty("val1")?a.val1:0,val2:1,bi:this.context.dataset.videoDuration};this.context.dataset.useHls?b.val2=3:"html5hd"===this.context.config.playerType?b.val2=1:"ipadhtml5"!==this.context.config.playerType&&"h5"!==this.context.config.playerType||(b.val2=2),this.doBossReport(b)},reportStep60:function(a){var b={step:60,val:a.seekCostTime,val1:a.hasOwnProperty("val1")?a.val1:0,val2:1,bi:this.context.dataset.videoDuration};this.context.dataset.useHls?b.val2=3:"html5hd"===this.context.config.playerType?b.val2=1:"ipadh5"!==this.context.config.playerType&&"h5"!==this.context.config.playerType||(b.val2=2),this.doBossReport(b)},reportStep31_51:function(a){if(a.hasOwnProperty("waitingTime")){var b=a.waitingTime>1e4;a.waitingTime=b?1e4:a.waitingTime;var c={step:a.step,val:a.waitingTime,val1:b,val2:1,bi:this.context.dataset.videoDuration||this.context.dataset.duration,bt:this.context.dataset.duration};this.context.dataset.useHls?c.val2=3:"html5hd"===this.context.config.playerType?c.val2=1:"ipadh5"!==this.context.config.playerType&&"h5"!==this.context.config.playerType||(c.val2=2),this.doBossReport(c)}},reportStep35:function(a){a=a||{};var b;"number"!==e.type(this.dataset.filmFirstPlayingTime)||"number"!==e.type(this.dataset.loadingadEndTime)&&"number"!==e.type(this.dataset.filmFirstPlayTime)||(b=this.dataset.filmFirstPlayingTime-(this.dataset.loadingadEndTime||this.dataset.filmFirstPlayTime));var c={step:35,val:a.swtichTime||b,val1:"",val2:this.context.dataset.adDuration||0,bi:this.context.dataset.videoDuration};"number"===e.type(this.context.dataset.preloadStartTime)&&"number"===e.type(this.dataset.loadingadEndTime)&&(c.val1=this.dataset.loadingadEndTime-this.context.dataset.preloadStartTime),this.doBossReport(c)},reportStep55:function(a){var b={step:55,val:a.swtichTime,val1:"",val2:a.prevFilmDuration,bi:this.context.dataset.videoDuration};this.doBossReport(b)},reportStep100:function(a){var b={step:100,val:a.costTime,val1:a.val1,val2:1,bi:this.context.dataset.videoDuration,predefn:a.predefn};this.context.dataset.useHls?b.val2=3:"html5hd"===this.context.config.playerType?b.val2=1:"ipadh5"!==this.context.config.playerType&&"h5"!==this.context.config.playerType||(b.val2=2),this.doBossReport(b)},reportStep1011:function(a){var b={step:"1011",val1:0,val2:0,vt:0};b.val=a.costTime,a.err?a.code?(b.val1=3,b.val2=a.code):(b.val1=2,b.val2=444):b.val1=1,this.doBossReport(b)},reportStep1003:function(a){var b={step:"1003",val1:0,val2:0,vt:0};b.val=a.costTime,a.err?a.code?(b.val1=3,b.val2=a.code):a.code||!a.filename||a.key?(b.val1=2,b.val2=445):(b.val1=4,b.val2=445):b.val1=1,this.doBossReport(b)},getCDNChannelId:function(){var a=this.context.dataset.filmVideoData,b=this.context.msg.getData("getPlayListIndex","film");return a&&a[b]?a[b].vt:""},getCurrentVideoDuration:function(){var a=this.context.dataset.filmVideoData,b=this.context.msg.getData("getPlayListIndex","film");return a&&a[b]?a[b].duration:""},getBusinessType:function(){var a=this.context.dataset.getinfoJSON;return a&&a.vl&&a.vl.vi&&a.vl.vi[0]&&"object"===e.type(a.vl.vi[0])&&a.vl.vi[0].hasOwnProperty("type")?a.vl.vi[0].type:""},doBossReport:function(a){var b,c,d={};d=e.extend(this.getDefaultReportData(),a),d&&d.bi&&(d.bi=parseInt(d.bi)),d&&d.bt&&(d.bt=parseInt(d.bt)),"html5hd"!==this.context.config.playerType&&f.mobile?"ipadh5"===this.context.config.playerType||f.os.ipad?(b="4299",c="694498052"):"h5"===this.context.config.playerType||f.os.android||f.os.ios?(b="2865",c="1698957057"):(b="2865",c="1698957057"):(b="4298",c="686148428");var g=(Txplayer.util.isNewsPlugin()?"//wxbtrace.video.qq.com":"//btrace.video.qq.com")+"/kvcollect?BossId={bossid}&Pwd={pwd}".replace("{bossid}",b).replace("{pwd}",c);g+="&"+e.param(d),f.report(g)},playTimeHeartBeatStart:function(){var a=this;this.dataset.realPlayTime_TIMER||(this.dataset.realPlayTime_TIMER=setInterval(function(){a.dataset.realPlayTime||(a.dataset.realPlayTime=0),a.dataset.realPlayTime+=5,a.saveData()},5e3)),this.dataset.totalPlayTime_TIMER||(this.dataset.totalPlayTime_TIMER=setInterval(function(){a.dataset.totalPlayTime||(a.dataset.totalPlayTime=0),a.dataset.totalPlayTime+=5,a.context.dataset.userTotalPlayedTime=a.dataset.totalPlayTime},5e3))},playTimeHeartBeatStop:function(a){clearInterval(this.dataset.totalPlayTime_TIMER),delete this.dataset.totalPlayTime_TIMER,a&&(clearInterval(this.dataset.realPlayTime_TIMER),delete this.dataset.realPlayTime_TIMER)},saveData:function(){var a,b=f.getData(this.dataset.dataKey),c=this.context.dataset.vid;if(b)try{a=JSON.parse(b)}catch(d){a={}}else a={};return c?(a[c]={lastupdate:+new Date,realtime:this.dataset.realPlayTime,totaltime:this.dataset.totalPlayTime},a[c]=e.extend(this.getDefaultReportData(),a[c]),void f.setData(this.dataset.dataKey,JSON.stringify(a))):void f.showError("saveData Error","找不到vid")},getData:function(){var a,b=f.getData(this.dataset.dataKey),c=this.context.dataset.vid;if(b)try{a=JSON.parse(b)}catch(d){a={}}else a={};return c?a[c]:void f.showError("getData Error","找不到vid")},clearData:function(a){var b,c=f.getData(this.dataset.dataKey);if(a=a||this.context.dataset.vid,c)try{b=JSON.parse(c)}catch(d){b={}}else b={};return a?(b[a]&&delete b[a],void f.setData(this.dataset.dataKey,JSON.stringify(b))):void f.showError("clearData Error","找不到vid")},reportPlayTimeWhenPageInit:function(){var a,b=f.getData(this.dataset.dataKey),c=this,d=function(a,b){if(a){var d=parseInt(+new Date/1e3),e=parseInt(parseInt(a.lastupdate)/1e3);d-e<=180||(a.isEnd=!1,c.reportStep5(a),c.clearData(b))}};try{a=JSON.parse(b)}catch(e){a={}}for(var g in a)d(a[g],g)},reportPlayTimeOnEnded:function(){var a,b=f.getData(this.dataset.dataKey),c=this,d=this.context.dataset.vid,e=function(a,b){a&&a[b]&&(a=a[b]),a&&(a.isEnd=!0,c.reportStep5(a),c.clearData(b))};try{a=JSON.parse(b)}catch(g){a={}}e(a,d)},getVideoAreaLevel:function(){var a=this.context.dataset.getinfoJSON;return a&&a.vl&&a.vl.vi&&a.vl.vi.length&&a.vl.vi[0]?a.vl.vi[0].level:""},reportLoginUserPlayTime:function(a){if(a=a||!1,"v.qq.com"===location.hostname||"film.qq.com"===location.hostname){var b;if(this.context.config&&"function"===e.type(this.context.config.getUserType))try{b=this.context.config.getUserType()}catch(c){}"number"!==e.type(b)||b<=0||this.context.msg.broadcast("reportLoginUserPlayTime",{isend:a})}},getReport6Status:function(){return this.context.dataset.isLoadingAdEmpty||!this.context.dataset.hasOwnProperty("isPlayingAd")?1:this.dataset.isFilmBuffered?2:3},reportIrs:function(){var a=this.context.config.playerType||"";if(a=a.toLowerCase(),f.inArray(["h5","h5tiny"],a)===-1&&"v.qq.com"===location.hostname||"film.qq.com"===location.hostname){var b=new Image(1,1);this.context.dataset.vid&&(b.src="//v12-"+this.context.dataset.vid+".z.irs01.com?ts="+ +new Date)}},addEventListener:function(){var a=this;this.context.msg.on("beforeVideoPlay",function(b,c){b=b||{},a.reportStep3(b.isNewPlay),a.reportIrs()}),this.context.msg.on("vidChange",function(b,c){a.resetDataset(),a.dataset.videoPlayedIndex++}),this.context.msg.on("getVideoUrlSuccess",function(b,c){a.resetDataset(),setTimeout(function(){a.reportStep4(),a.dataset.isGetinfoDone=!0,a.context.dataset.reportVideoLevel=a.getVideoAreaLevel(),a.context.dataset.reportCDNChannelId=a.getCDNChannelId(),a.context.dataset.reportBusinessType=a.getBusinessType()},0)}),this.context.msg.on("vidChange",function(){a.resetDatasetOnVidChange()}),this.context.msg.on("videoPause",function(){a.context.dataset.isPlayingAd||a.playTimeHeartBeatStop()}),this.context.msg.on("videoPlay",function(b){b&&"loadingad"===b.playListType&&(a.dataset.loadingadPlayTime||(a.dataset.loadingadPlayTime=+new Date)),"film"!==b.playListType||0!==b.index||a.dataset.filmFirstPlayTime||(a.dataset.filmFirstPlayTime=+new Date),"film"===b.playListType&&b.index>0&&(a.dataset.filmPlayTime||(a.dataset.filmPlayTime={}),a.dataset.filmPlayTime[b.index]||(a.dataset.filmPlayTime[b.index]=+new Date))}),this.context.msg.on("videoPlaying",function(b){b&&"film"===b.playListType&&(a.dataset.filmFirstPlayingTime||(a.dataset.filmFirstPlayingTime=+new Date,a.reportStep6({firstLoadTime:a.dataset.filmFirstPlayingTime-a.dataset.filmFirstPlayTime,loadingAdStatus:a.getReport6Status()}),a.reportStep35())),b&&"film"===b.playListType&&a.playTimeHeartBeatStart(),b&&"loadingad"===b.playListType&&(a.dataset.loadingadPlayingTime||(a.dataset.loadingadPlayingTime=+new Date,a.reportStep7())),b&&"film"===b.playListType&&0===b.index&&!a.dataset.filmPlayingTime&&a.dataset.filmFirstPlayTime&&(a.dataset.filmPlayingTime=+new Date,a.reportStep30({loadTime:a.dataset.filmPlayingTime-(a.dataset.preloadStartTime||a.dataset.filmFirstPlayTime)})),b&&"film"===b.playListType&&b.index>0&&a.dataset.filmPlayTime&&(a.dataset.filmPlayingTime||(a.dataset.filmPlayingTime={}),a.dataset.filmPlayingTime[b.index]||(a.dataset.filmPlayingTime[b.index]=+new Date,a.reportStep50({loadTime:a.dataset.filmPlayingTime[b.index]-a.dataset.filmPlayTime[b.index]})))}),this.context.msg.on("videoProgressDone",function(b){!a.dataset.hasOwnProperty("loadingadProgressedTime")&&b&&"loadingad"===b.playListType&&(a.dataset.loadingadProgressedTime=+new Date)}),this.context.msg.on("videoWaiting",function(b){if(!a.context.dataset.isPlayingAd&&!("film"!==b.playListType||b&&b.videoTag&&0===b.videoTag.buffered.length)){var c=a.context.dataset.isVideoSeeking;if(!c&&!b.seeking&&(a.dataset.waitingTimes||(a.dataset.waitingTimes=0),1!==a.dataset.waitingTimes)){a.dataset.waitingTimes++;var d,e="videoTimeUpdate.waiting_report",f=+new Date;a.context.msg.off(e),a.context.msg.once(e,function(){var c;d=+new Date,c=0===b.index?31:51,a.reportStep31_51({step:c,waitingTime:d-f})})}}}),this.context.msg.on("networkBadStart",function(b){if("film"===b.playListType&&!b.isOnWaiting){var c=a.context.dataset.isVideoSeeking;if(!c){a.dataset.waitingTimes?a.dataset.waitingTimes++:a.dataset.waitingTimes=1;var d,e="networkBadEnd.waiting_report",f=+new Date;a.context.msg.off(e),a.context.msg.once(e,function(){var c;d=+new Date,c=0===b.index?31:51,a.reportStep31_51({step:c,waitingTime:d-f})})}}}),this.context.msg.on("videoEnd",function(b){if("film"===b.playListType&&(a.dataset.waitingTimes=0),b.playListTypeEnd&&"loadingad"===b.playListType&&(a.dataset.loadingadEndTime=+new Date),"film"===b.playListType&&!b.playListTypeEnd){var c,d=+new Date,e=b.videoTag.duration||a.context.dataset.videoDuration;a.context.msg.once("videoPlaying.switch_film_section_report",function(){c=+new Date,a.reportStep55({swtichTime:c-d,prevFilmDuration:e})})}"film"===b.playListType&&b.playListTypeEnd&&(a.playTimeHeartBeatStop(!0),a.reportPlayTimeOnEnded(),a.reportLoginUserPlayTime(!0)),a.dataset.hasOwnProperty("firstLoadingadEndTime")||"loadingad"!==b.playListType||(a.dataset.firstLoadingadEndTime=+new Date)}),this.context.msg.on("videoTimeUpdate",function(b){b&&"film"===b.playListType&&(a.dataset.timeupdateCounter?a.dataset.timeupdateCounter+=1:a.dataset.timeupdateCounter=1,a.dataset.timeupdateCounter%300===0&&a.reportLoginUserPlayTime(!1)),b&&"loadingad"===b.playListType&&(a.dataset.isFilmBuffered||(a.dataset.isFilmBuffered=a.context.msg.getData("isPreloadVideoBuffered")))}),this.context.msg.on("getinfoFinish",function(b){b=b||{},a.reportStep1011(b)}),this.context.msg.on("getkeyStart",function(){a.dataset.getkeyStartTime=+new Date}),this.context.msg.on("getkeyFinish",function(b){b=b||{},a.dataset.getkeyEndTime=+new Date,a.reportStep1003(b)}),this.context.msg.on("ready",function(){a.reportPlayTimeWhenPageInit()}),this.context.msg.on("seekStart",function(){a.dataset.filmSeekStartTime=+new Date}),this.context.msg.on("seekEnd",function(){a.dataset.filmSeekEndTime=+new Date,a.reportStep60({seekCostTime:a.dataset.filmSeekEndTime-a.dataset.filmSeekStartTime})}),this.context.msg.on("seekFail",function(){a.dataset.filmSeekFailTime=+new Date,a.reportStep60({val1:1,seekCostTime:a.dataset.filmSeekFailTime-a.dataset.filmSeekStartTime})}),this.context.msg.on("setDefinitionStart",function(){a.dataset.setDefinitionStartTime=+new Date,a.dataset.prevDefinition=a.context.dataset.duration}),this.context.msg.on("setDefinitionDone",function(){a.dataset.setDefinitionDoneTime=+new Date,a.reportStep100({costTime:a.dataset.setDefinitionDoneTime-a.dataset.setDefinitionStartTime,val1:2,predefn:a.dataset.prevDefinition})}),this.context.msg.on("setDefinitionFail",function(b){a.dataset.setDefinitionFailTime=+new Date,a.reportStep100({costTime:a.dataset.setDefinitionFailTime-a.dataset.setDefinitionStartTime,val1:3,predefn:a.dataset.prevDefinition})}),this.context.msg.on("videoPlay",function(b){if(b=b||{},!b||"film"===b.playListType){var c=+new Date;a.dataset.hasOwnProperty("_1_bufferFailTime")||0!==b.index||(a.context.msg.off("error._1_bufferFailTime"),a.context.msg.once("error._1_bufferFailTime",function(b){a.context.msg.off("videoPlaying._1_bufferFailTime"),a.dataset._1_bufferFailTime=+new Date,a.reportStep30({loadTime:a.dataset._1_bufferFailTime-c,val1:1})}),a.context.msg.once("videoPlaying._1_bufferFailTime",function(){a.context.msg.off("error._1_bufferFailTime")})),!a.dataset.hasOwnProperty("_2_bufferFailTime")&&b.index>0&&(a.context.msg.once("error._2_bufferFailTime",function(b){a.context.msg.off("videoPlaying._2_bufferFailTime"),a.dataset._2_bufferFailTime=+new Date,a.reportStep50({loadTime:a.dataset._2_bufferFailTime-c,val1:1})}),a.context.msg.once("videoPlaying._2_bufferFailTime",function(){a.context.msg.off("error._2_bufferFailTime")}))}})},setExtrainfo:function(a){this.context.config.extrainfo=a||""},exportsModuleApis:function(){this.dataset.moduleApis={},this.dataset.moduleApis.setExtrainfo=this.setExtrainfo.bind(this),e.extend(this.context.userApi,this.dataset.moduleApis)}},Txplayer.register("HdPlayerReport",d)}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(58)},58:function(module,exports){!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){c(1),c(2),c(4),c(5),c(6),a.exports=c(7)},function(a,b){function c(a){this.msg=new Txplayer.Events,this.dataset={},this.context=a,this.init()}var d=Txplayer.util;c.prototype={init:function(){this.loadSubPlugins()},loadSubPlugins:function(){var a=["HdPlayerAd","HdPlayerAdReport","UiPlayerAd","YaliuPlayer","ViewMonitor"],b={superMsg:this.context.msg,userMsg:this.context.userMsg,msg:this.context.msg,$mod:{$playermod:this.context.dataset.$playermod,$progressmod:this.context.dataset.$progressmod,$buttonsleftmod:this.context.dataset.$buttonsleftmod,$buttonsrightmod:this.context.dataset.$buttonsrightmod},gpApi:{isPrepLoad:!1,currentVid:"",nextVid:"",videoAdList:{},adtypeMap:{},adType2VideoType:{"前贴":"loadingad","中插":"insertad","后贴":"endingad"},videoType2AdType:{loadingad:"前贴",insertad:"中插",endingad:"后贴"}}};Txplayer.$.extend(b,this.context),d.loadPlugins.call(this,a,b,this.context.config.settings)}},Txplayer.register("H5PlayerAd",c)},function(module,exports,__webpack_require__){function UiPlayerAd(a){$=Txplayer.$,this.msg=new Txplayer.Events,this.dataset={},this.context=a,this.init()}var $=Txplayer.$,util=Txplayer.util,api=Txplayer.apiList,htmlstr=__webpack_require__(3);UiPlayerAd.prototype={init:function(){this.dataset.muteClass="txp_btn_ad_mute",this.write(),this.addEventListener(),this.exportsModuleApis()},write:function(){var a={hideClass:Txplayer.dataset.hideClass,noSkipTipsText:"为了给腾讯视频用户提供更多优质美剧，应版权方（华纳）要求，好莱坞会员在观看华纳美剧时无法跳过广告（《吸血鬼日记》《破产姐妹》《无耻之徒》等）。我们会为会员用户继续争取免广告权益，请您谅解，谢谢！",noSkipTipsTextMobile:"为了给腾讯视频用户提供更多优质影片，应版权方要求，VIP用户在观看该版影片时无法免广告。我们会为VIP用户继续争取免广告权益，请您谅解，谢谢！",trueview:"txp-ui-loadingad-trueview",trueviewText:"txp-ui-loadingad-trueviewText",countDown:"txp-ui-loadingad-countDown",canSkip:"txp-ui-loadingad-canskip",enterAd:"txp-ui-loadingad-enterAd",noSkip:"txp-ui-loadingad-noskip",noSkipText:"txp-ui-loadingad-noSkipText",linkArea:"txp-ui-loadingad-linkarea",detail:"txp-ui-loadingad-detail",adMod:"txp-ui-loadingad-mod",volume:"txp-ui-loadingad-volume",time:"txp-ui-loadingad-time",close:"txp-ui-loadingad-close",closeText:"txp-ui-loadingad-closetext",trueviewClose:"txp-ui-loadingad-trueviewClose",trueviewCloseText:"txp-ui-loadingad-trueviewClosetext",why:"txp-ui-loadingad-why",pauseAd:"txp-ui-loadingad-pasuead",yaliuAd:"txp-ui-loadingad-yaliuad",pauseAdImg:"txp-ui-loadingad-pasuead-img",pauseAdClose:"txp-ui-loadingad-pausead-close",ivbAd:"txp-ui-ivbad",ivbAdImg:"txp-ui-ivbad-img",dspName:"txp-ui-loadingad-pasuead-dspName",noSkipTips:"txp-ui-loadingad-no-skip-tips",noSkipTipsClose:"txp-ui-loadingad-no-skip-tips-close",isSkipAdButtonShow:this.isSkipAdButtonShow(),isTrueviewButtonShow:this.isTrueviewButtonShow(),isUseMobileUI:this.isUseMobileUI(),isVshou:this.isVshou()};this.dataset.renderData=a;var b=$.tmpl(htmlstr,a);this.context.$mod.$playermod.append(b),this.dataset.$ad=this.context.$mod.$playermod.find("[data-role="+a.adMod+"]"),this.dataset.$trueview=this.context.$mod.$playermod.find("[data-role="+a.trueview+"]"),this.dataset.$trueviewText=this.context.$mod.$playermod.find("[data-role="+a.trueviewText+"]"),this.dataset.$countDown=this.context.$mod.$playermod.find("[data-role="+a.countDown+"]"),this.dataset.$canSkip=this.context.$mod.$playermod.find("[data-role="+a.canSkip+"]"),this.dataset.$noSkip=this.context.$mod.$playermod.find("[data-role="+a.noSkip+"]"),this.dataset.$noSkipText=this.context.$mod.$playermod.find("[data-role="+a.noSkipText+"]"),this.dataset.$enterAd=this.context.$mod.$playermod.find("[data-role="+a.enterAd+"]"),this.dataset.$linkArea=this.context.$mod.$playermod.find("[data-role="+a.linkArea+"]"),this.dataset.$detail=this.context.$mod.$playermod.find("[data-role="+a.detail+"]"),this.dataset.$volume=this.context.$mod.$playermod.find("[data-role="+a.volume+"]"),this.dataset.$time=this.context.$mod.$playermod.find("[data-role="+a.time+"]"),this.dataset.$close=this.context.$mod.$playermod.find("[data-role="+a.close+"]"),this.dataset.$closeText=this.context.$mod.$playermod.find("[data-role="+a.closeText+"]"),this.dataset.$trueviewClose=this.context.$mod.$playermod.find("[data-role="+a.trueviewClose+"]"),this.dataset.$trueviewCloseText=this.context.$mod.$playermod.find("[data-role="+a.trueviewCloseText+"]"),this.dataset.$why=this.context.$mod.$playermod.find("[data-role="+a.why+"]"),this.dataset.$pauseAd=this.context.$mod.$playermod.find("[data-role="+a.pauseAd+"]"),this.dataset.$yaliuAd=this.context.$mod.$playermod.find("[data-role="+a.yaliuAd+"]"),this.dataset.$pauseAdImg=this.context.$mod.$playermod.find("[data-role="+a.pauseAdImg+"]"),this.dataset.$ivbAd=this.context.$mod.$playermod.find("[data-role="+a.ivbAd+"]"),this.dataset.$ivbAdImg=this.context.$mod.$playermod.find("[data-role="+a.ivbAdImg+"]"),this.dataset.$noSkipTips=this.context.$mod.$playermod.find("[data-role="+a.noSkipTips+"]"),this.dataset.$noSkipTipsClose=this.context.$mod.$playermod.find("[data-role="+a.noSkipTipsClose+"]"),this.dataset.$pauseAdClose=this.context.$mod.$playermod.find("[data-role="+a.pauseAdClose+"]"),this.dataset.$dspName=this.context.$mod.$playermod.find("[data-role="+a.dspName+"]"),this.initDisplay(),this.dataset.yaliuRenderTimers={},this.dataset.yaliuCycleTimers={}},remove:function(){this.dataset.$ad.remove()},initDisplay:function(){util.isSupportMute()||this.dataset.$volume.addClass(Txplayer.dataset.hideClass)},hide:function(){this.dataset.$ad.addClass(Txplayer.dataset.hideClass),this.dataset.$trueview.addClass(Txplayer.dataset.hideClass),this.dataset.$canSkip.addClass(Txplayer.dataset.hideClass),this.dataset.$noSkip.addClass(Txplayer.dataset.hideClass),this.dataset.$enterAd.addClass(Txplayer.dataset.hideClass),this.dataset.$linkArea.addClass(Txplayer.dataset.hideClass),this.dataset.$detail.addClass(Txplayer.dataset.hideClass),this.dataset.$volume.addClass(Txplayer.dataset.hideClass),this.dataset.$close.addClass(Txplayer.dataset.hideClass),this.dataset.$closeText.addClass(Txplayer.dataset.hideClass),this.dataset.$trueviewClose.css("display","none"),this.dataset.$trueviewCloseText.addClass(Txplayer.dataset.hideClass),this.dataset.$ivbAd.addClass(Txplayer.dataset.hideClass),this.dataset.$pauseAd.addClass(Txplayer.dataset.hideClass),this.dataset.$dspName.addClass(Txplayer.dataset.hideClass)},hideTime:function(a){a?this.dataset.$time.addClass(Txplayer.dataset.hideClass):this.dataset.$time.removeClass(Txplayer.dataset.hideClass)},mute:function(){this.dataset.$volume.addClass(this.dataset.muteClass),"pc"===this.context.gpApi.pf_ex?this.context.msg.broadcast("adMute",{showTips:!1,broadcast:!1}):this.context.msg.broadcast("mute",{showTips:!1,broadcast:!1}),this.context.msg.broadcast("adMuteChange",{mute:!0})},unMute:function(){this.dataset.$volume.removeClass(this.dataset.muteClass),"pc"===this.context.gpApi.pf_ex?this.context.msg.broadcast("adUnMute",{showTips:!1}):this.context.msg.broadcast("unMute",{showTips:!1});var a=this.context.dataset.volume;"number"===$.type(a)&&a||(a=Txplayer.defaultconfig.volume),"pc"!==this.context.gpApi.pf_ex&&this.context.msg.broadcast("setVolume",{volume:a,isUserAction:!1}),this.context.msg.broadcast("adMuteChange",{mute:!1})},openAdLink:function(a){if(this.context.dataset.currentAdInfo&&this.context.dataset.currentAdInfo.link){!Txplayer.util.mobile||"ZT"==this.context.dataset.currentAdInfo.type&&"WZ"==this.context.dataset.currentAdInfo.type||this.context.msg.broadcast("pauseAd"),window.open(this.context.dataset.currentAdInfo.link);var b=$.extend({},this.context.dataset.currentAdInfo);a&&(b.txpType=a),this.context.msg.broadcast("openAdLink",b)}},skipAd:function(a){this.stopAdCountDownTime(),this.context.dataset.isPlayingAd=!1,this.dataset.adPlayedSeconds=null,this.context.dataset.isSkipAd=!0,this.context.msg.broadcast("skipAd",a)},getScale:function(a,b,c,d,e){var f,g,h;return f=c/a,g=d/b,h=Math.min(f,g),e&&(e.width=parseInt(e.width*h),e.height=parseInt(e.height*h)),h},showIvbAd:function(a){if(a&&a.length){a=a[0],this.context.dataset.currentAdInfo=a;var b=this.getRichData(a);if(b&&b.plugins&&"new_ivb"===b.plugins.plugType){var c=1e3*parseInt(b.plugins.easeInTime)||5e3,d=1e3*parseInt(b.plugins.easeOutTime)||5e3,e=1e3*parseInt(b.plugins.stayTime)||5e3,f=function(a){var f=function(a,c){b.plugins[a]&&(c=c||0,setTimeout(function(){Txplayer.util.report(b.plugins[a])},c))};"start"!=a&&a||f("startReportUrl"),"end"==a&&f("endReportUrl"),a||f("endReportUrl",c+d+e)};if("N"==b.plugins.needAdMark)return void f();this.dataset.$ad.removeClass(Txplayer.dataset.hideClass),this.dataset.$ivbAd.removeClass(Txplayer.dataset.hideClass);var g,h={width:960,height:60},i=this,j=50,k=0,l=1;g=b.plugins.res[0].content,i.dataset.$ivbAdImg.attr("src",g),this.dataset.$ivbAdImg.off("click").on("click",function(){i.openAdLink()});var m=function(){l=i.getScale(h.width,h.height,i.context.dataset.playerWidth/2,i.context.dataset.playerHeight,h),i.dataset.$ivbAdImg.css(h),i.dataset.$ivbAd.css({width:h.width+50,height:h.height,fontSize:parseInt(12*l)})};this.context.msg.on("resize.ivb",function(){m(),k>0&&o(k)}),m(),this.dataset.$ivbAd.css("left","initial");var n=function(a){a?i.dataset.$ivbAd.css("bottom",j):i.dataset.$ivbAd.css("bottom",5)};n(i.context.dataset.isControlShow),this.context.msg.on("hideUiControl.ivb",function(){i.context.dataset.isControlShow&&n(!1)}),this.context.msg.on("beforeUiControlShow.ivb",function(){i.context.dataset.isControlShow||n(!0)});var o=function(a){switch(k=a,a){case 0:i.dataset.$ivbAd.css({left:0,right:0,bottom:j}),f("end");break;case 1:var b=(i.context.dataset.playerWidth-h.width-50)/2;i.dataset.$ivbAd.css({right:b}),f("start");break;case 2:i.dataset.$ivbAd.css({right:i.context.dataset.playerWidth})}};i.dataset.$ivbAd.css({right:-(h.width+50)}),i.dataset.$ivbAd.css({transitionProperty:"right",transitionDuration:c+"ms"}),setTimeout(function(){o(1)},100),setTimeout(function(){i.dataset.$ivbAd.css({transitionDuration:d+"ms"}),o(2)},c+e),setTimeout(function(){i.context.msg.off("hideUiControl.ivb"),i.context.msg.off("beforeUiControlShow.ivb"),i.context.msg.off("resize.ivb"),i.dataset.$ad.addClass(Txplayer.dataset.hideClass),i.dataset.$ivbAd.addClass(Txplayer.dataset.hideClass),o(0)},c+e+d)}}},showPauseAd:function(a){if(!a||!a.length)return this.dataset.$ad.addClass(Txplayer.dataset.hideClass),void this.dataset.$pauseAd.addClass(Txplayer.dataset.hideClass);a=a[0],this.context.dataset.currentAdInfo=a,this.dataset.$ad.removeClass(Txplayer.dataset.hideClass),this.dataset.$pauseAd.removeClass(Txplayer.dataset.hideClass);var b=a.dsp_name||"";this.dataset.$dspName.html(b);var c,d,e,f=this;if("array"===$.type(a.image)&&(a.image=a.image[0]),c=a.image.url,d=parseInt(a.image.width),e=parseInt(a.image.height),c&&0===c.indexOf("http")){if(this.dataset.pauseAdSize={width:d,height:e,bottom:this.dataset.$pauseAd.css("bottom")},Txplayer.util.mobile&&!Txplayer.util.os.ipad){var g,h,i,j,k;g=768/document.body.clientWidth,h=432/document.body.clientHeight,i=Math.max(g,h),d=parseInt(d/i),e=parseInt(e/i),j=(document.body.clientHeight-e)/2,k=(document.body.clientWidth-d)/2,f.dataset.$pauseAd.css({width:d,height:e,top:0,left:0,right:0,bottom:"40px",position:"absolute",margin:"auto"})}this.dataset.$pauseAdImg.attr("src",c).css({width:d,height:e}),this.dataset.$pauseAdImg.off("click").on("click",function(){"N"===a.no_click&&a.link&&f.openAdLink("pauseAd")}),this.dataset.isPauseAdShow=!0,this.hideUiPlay(),this.context.msg.broadcast("pauseAdShow",this.context.dataset.currentAdInfo)}},renderYaliuAd:function(a){"pc"===this.context.gpApi.pf_ex?this.renderYaliuAdByMP4(a,a.mp4_index):this.renderYaliuAdByPNG(a,a.png_index)},renderYaliuAdByPNG:function(a,b){var c=this,d="yaliu-ad-canvas-"+a.cid;if("N"==a.no_click)var e='<canvas data-role="'+d+'" style="display:none;pointer-events:auto;cursor:pointer;"></canvas>';else var e='<canvas data-role="'+d+'" style="display:none;"></canvas>';var f=this.context.$mod.$playermod.find("[data-role="+d+"]");f[0]||(this.dataset.$yaliuAd.append(e),f=this.context.$mod.$playermod.find("[data-role="+d+"]"));var g=this.context.dataset.currentTime-a.anchor.begin/1e3,h=a.material[b].data.frames;if(a.anchor.interval&&""!=a.anchor.interval)var i=0;else var i=parseInt(g)*a.material[b].data.fps;var j=this.context.$mod.$playermod[0],k=f[0].getContext("2d"),l=a.material[b].data.width,m=a.material[b].data.height,n=j.clientWidth*a.anchor.pos_w,o=j.clientHeight*a.anchor.pos_h,p=j.clientWidth*a.anchor.pos_x,q=j.clientHeight*a.anchor.pos_y;k.clearRect(0,0,n,o),f.attr("width",n),f.attr("height",o),f.css({position:"absolute",display:"block",left:p,top:q}),this.dataset.$yaliuAd.css({display:"block"}),"N"==a.no_click&&f.off("click").on("click",function(){window.open(a.link),c.context.msg.broadcast("openAdLink",a)}),this.context.dataset.canReportCids[a.cid]&&!this.context.dataset.hasReportCids[a.cid]&&(this.context.msg.broadcast("reportAd",a),this.context.dataset.hasReportCids[a.cid]=!0),document.createElement("img"),this.dataset.$yaliuAd.removeClass(Txplayer.dataset.hideClass);var r=a.offscreenCanvasArr,s=j.clientWidth,t=j.clientHeight,u=setInterval(function(){return c.context.$mod.$playermod[0],3==c.context.dataset.playState?void f.css({display:"none"}):2==c.context.dataset.playState?(w(),void v(!1)):(w(),v(!0),void((i==h.length-1||i>h.length-1)&&(c.dataset.$yaliuAd.addClass(Txplayer.dataset.hideClass),a.anchor.interval&&(c.dataset.yaliuCycleTimers[a.cid]=setTimeout(function(){i=0;var b=c.context.dataset.hasShowCidArr.indexOf(a.cid);b>-1&&c.context.dataset.hasShowCidArr.splice(b,1)},a.anchor.interval)),f.css({display:"none"}),clearInterval(u),u=null)))},1e3/a.material[b].data.fps);this.dataset.yaliuRenderTimers[a.cid]=u;var v=function(a){k.clearRect(0,0,n,o),k.drawImage(r[i],0,0,l,m,0,0,n,o),a&&i++},w=function(){s==j.clientWidth&&t==j.clientHeight||(n=j.clientWidth*a.anchor.pos_w,o=j.clientHeight*a.anchor.pos_h,p=j.clientWidth*a.anchor.pos_x,q=j.clientHeight*a.anchor.pos_y,f.attr("width",n),f.attr("height",o),f.css({position:"absolute",display:"block",left:p,top:q}),s=j.clientWidth,t=j.clientHeight),f.css({display:"block"})}},renderYaliuAdByMP4:function(a,b){var c=this,d="yaliuad-"+a.cid,e="yaliu-sample-canvas-"+a.cid,f="yaliu-ad-canvas-"+a.cid,g='<txpdiv data-role="'+d+'"><canvas data-role="'+e+'" style="display:none;"></canvas><canvas data-role="'+f+'" style="position:absolute;"></canvas></txpdiv>',h=c.context.$mod.$playermod.find("[data-role="+d+"]");h[0]||c.dataset.$yaliuAd.append(g);var i=a.videoElement,j=c.context.$mod.$playermod.find("[data-role="+e+"]"),k=c.context.$mod.$playermod.find("[data-role="+f+"]");i.setAttribute("crossOrigin","*");var l=c.context.$mod.$playermod[0],m=j[0].getContext("2d"),n=k[0].getContext("2d"),o=a.material[b].width,p=a.material[b].height,q=l.clientWidth*a.anchor.pos_w,r=l.clientHeight*a.anchor.pos_h,s=l.clientWidth*a.anchor.pos_x,t=l.clientHeight*a.anchor.pos_y,u=l.clientWidth,v=l.clientHeight;j.attr("width",o),j.attr("height",p),k.attr("width",o/2),k.attr("height",p),k.css({left:s,top:t,width:q,height:r,display:"block"}),c.dataset.$yaliuAd.css({display:"block"}),"N"==a.no_click&&k.off("click").on("click",function(){window.open(a.link),c.context.msg.broadcast("openAdLink",a)});var w=c.context.dataset.currentTime-a.anchor.begin/1e3;a.anchor.interval&&""!=a.anchor.interval?i.currentTime=0:i.currentTime=w,this.context.dataset.canReportCids[a.cid]&&!this.context.dataset.hasReportCids[a.cid]&&i.videoCanPlay&&(this.context.msg.broadcast("reportAd",a),this.context.dataset.hasReportCids[a.cid]=!0);var x=setInterval(function(){if(3==c.context.dataset.playState)return void k.css({display:"none"});if(2==c.context.dataset.playState)return z(),void i.pause();if(1==c.context.dataset.playState){if(!i.videoCanPlay)return;z(),i.play()}return i.paused||i.ended?(a.anchor.interval&&""!=a.anchor.interval&&(c.dataset.yaliuCycleTimers[a.cid]=setTimeout(function(){var b=c.context.dataset.hasShowCidArr.indexOf(a.cid);b>-1&&c.context.dataset.hasShowCidArr.splice(b,1)},a.anchor.interval)),k.css({display:"none"}),clearInterval(x),void(x=null)):void y()},1e3/24);this.dataset.yaliuRenderTimers[a.cid]=x;var y=function(){m.drawImage(i,0,0,o,p);for(var a=m.getImageData(o/2,0,o/2,p),b=m.getImageData(0,0,o/2,p),c=b.data.length/4,d=0;d<c;d++)b.data[4*d+3]=a.data[4*d+1];n.putImageData(b,0,0)},z=function(){u==l.clientWidth&&v==l.clientHeight||(q=l.clientWidth*a.anchor.pos_w,r=l.clientHeight*a.anchor.pos_h,s=l.clientWidth*a.anchor.pos_x,t=l.clientHeight*a.anchor.pos_y,k.css({position:"absolute",display:"block",left:s,top:t,width:q,height:r}),u=l.clientWidth,v=l.clientHeight),k.css({display:"block"})}},isSkipAdButtonShow:function(){return!((!Txplayer.util.mobile||Txplayer.util.os.ipad)&&(Txplayer.util.mobile&&!Txplayer.util.os.ipad||"v.qq.com"!==location.hostname&&6!=this.context.dataset.businessId)||!this.context.config||"function"!==$.type(this.context.config.showOpenVIPGuide))},isTrueviewButtonShow:function(){return!(!Txplayer.util.mobile||!this.context.config||"function"!==$.type(this.context.config.showOpenVIPGuide))},isUseMobileUI:function(){return!(!Txplayer.util.mobile||Txplayer.util.os.ipad)},isVshou:function(){return!(!this.context.config||"vshou"!==this.context.config.playerType)},isHBO:function(){var a=this;return!(!a.context.dataset.adJson||!a.context.dataset.adJson.adLoc||"2"!==a.context.dataset.adJson.adLoc.adFlag)},isHuaNa:function(){var a=this;return!(!a.context.dataset.adJson||!a.context.dataset.adJson.adLoc||"1"!==a.context.dataset.adJson.adLoc.adFlag)},isAdType:function(a){if(!a)return!1;var b=["loadingad","insertad","endingad"];return $.inArray(a,b)>-1},hideUiPlay:function(){var a=this;a.context.msg.broadcast("hideUiPlay"),a.context.msg.once("videoPause.noSkipTips",function(){a.context.msg.broadcast("hideUiPlay")})},adSkip:function(a){var b=this;b.context.dataset.adReportData.isskip=1,b.context.dataset.adReportData.skiptime=parseInt(b.dataset.adPlayedSeconds),b.context.msg.broadcast("adSkip"),b.skipAd(a),b.hide()},getRichData:function(data){var params,richdata;return data&&data.params&&(params=decodeURIComponent(data.params)),params&&(richdata=params.split("richdata=")[1],eval("richdata="+richdata)),richdata},showAdUIOnPlaying:function(){var a=this,b=a.context.dataset.currentPlayListType;if(a.isAdType(b)&&(a.hide(),!a.context.dataset.isSkipAd)){a.dataset.adListLenth=a.context.msg.getData("calcTotalPlaylist",b);var c=a.getRichData(this.context.dataset.currentAdInfo);if(this.context.dataset.currentAdInfo){var d=this.context.dataset.currentAdInfo.dsp_name||"";d?(this.dataset.$dspName.html(d),this.dataset.$dspName.removeClass(Txplayer.dataset.hideClass)):this.dataset.$dspName.addClass(Txplayer.dataset.hideClass)}if(a.dataset.trueview=!1,a.dataset.isAdCanNotSkip=a.context.dataset.isAdCanNotSkip,a.dataset.$ad.removeClass(Txplayer.dataset.hideClass),a.dataset.$detail.removeClass(Txplayer.dataset.hideClass),util.isSupportMute()&&a.dataset.$volume.removeClass(Txplayer.dataset.hideClass),a.dataset.$linkArea.removeClass(Txplayer.dataset.hideClass),a.dataset.duration=a.context.dataset.getAdDuration,a.context.dataset.isAdCanSkip)a.isHuaNa()?a.dataset.$noSkipText.html("应版权方要求，VIP无法免该片广告"):a.isHBO()&&(a.dataset.$noSkipText.html("应内容方要求，VIP无法免该片广告"),a.dataset.$why.addClass(Txplayer.dataset.hideClass)),a.dataset.$noSkip.removeClass(Txplayer.dataset.hideClass);else if(Txplayer.util.mobile&&1==a.dataset.adListLenth&&c&&c.plugins&&"Y"===c.plugins.trueview){if(a.dataset.trueview=!0,a.dataset.$trueview.removeClass(Txplayer.dataset.hideClass),a.isTrueviewButtonShow()){var e=a.context.dataset.currentAdInfo.duration/1e3;e>10&&(!a.dataset.hasOwnProperty("countDown")||a.dataset.countDown==-1)?(a.dataset.$trueviewText.removeClass(Txplayer.dataset.hideClass),a.dataset.countDown=5,a.dataset.$countDown.html(a.dataset.countDown)):(0===a.dataset.countDown||e<=10)&&(e<=10&&a.dataset.$trueviewText.addClass(Txplayer.dataset.hideClass),a.dataset.$trueviewClose.css("display","inline-block"),a.dataset.$trueviewCloseText.removeClass(Txplayer.dataset.hideClass))}}else if(!this.context.dataset.currentAdInfo||"WK"!==this.context.dataset.currentAdInfo.type&&"KB"!==this.context.dataset.currentAdInfo.type?a.hideTime(!1):a.hideTime(!0),a.dataset.$canSkip.removeClass(Txplayer.dataset.hideClass),a.isSkipAdButtonShow()){var f=a.context.dataset.adJson.adLoc.duration;f&&f>0&&f<180?a.dataset.$closeText.html("关闭广告"):a.dataset.$closeText.html("VIP免广告"),a.dataset.$close.removeClass(Txplayer.dataset.hideClass),a.dataset.$closeText.removeClass(Txplayer.dataset.hideClass)}a.dataset.$noSkipTips.addClass(Txplayer.dataset.hideClass)}},stopAdCountDownTime:function(){var a=this;a.dataset.adCountDownTimer&&(clearInterval(a.dataset.adCountDownTimer),a.dataset.adCountDownTimer=null)},startAdCountDownTime:function(){var a=this;a.dataset.notShowTime=0,$(this.context.dataset.adList).each(function(b,c){c.duration&&("WK"!=c.type&&"KB"!=c.type||(a.dataset.notShowTime+=parseInt(c.duration,10)/1e3))}),this.stopAdCountDownTime();var b,c,d='<span class="txp_ad_skip" style="background: none">即将进入下一集：</span>';"number"===$.type(a.context.dataset.adDuration)&&("number"!==$.type(a.dataset.adPlayedSeconds)&&(a.dataset.adPlayedSeconds=0),c=parseInt(a.context.dataset.adDuration-parseInt(a.dataset.adPlayedSeconds)-a.dataset.notShowTime),c>0&&(a.context.gpApi.isPrepLoad?a.dataset.$time.html(d+c):a.dataset.$time.html(c))),this.dataset.adCountDownTimer=setInterval(function(){return a.dataset.adPlayedSeconds+=.1,a.context.dataset.adDuration||"number"===$.type(a.context.dataset.adDuration)?(b=a.context.dataset.adDuration-a.dataset.adPlayedSeconds,b=parseInt(10*b)/10,b<=0?(a.dataset.countDown=-1,a.hide(),a.skipAd({force:!0}),void a.stopAdCountDownTime()):void(b===parseInt(b)&&(c=b-a.dataset.notShowTime,c>0&&(a.context.gpApi.isPrepLoad?a.dataset.$time.html(d+c):a.dataset.$time.html(c)),a.dataset.countDown>0&&(a.dataset.countDown--,a.dataset.countDown>0?a.dataset.$countDown.html(a.dataset.countDown):(a.isTrueviewButtonShow()&&(a.dataset.$trueviewClose.css("display","inline-block"),a.dataset.$trueviewCloseText.removeClass(Txplayer.dataset.hideClass)),a.dataset.$trueviewText.addClass(Txplayer.dataset.hideClass)))))):(a.hide(),void a.stopAdCountDownTime())},100)},getCurrentAdInfo:function(){if(this.context.dataset.isPlayingAd){var a=this.context.dataset.currentPlayListType,b=this.context.msg.getData("getPlayListIndex",a);this.context.dataset.adList&&this.context.dataset.adList[b]&&(this.context.dataset.currentAdInfo=this.context.dataset.adList[b]),this.context.dataset.currentAdInfo&&"film"===this.context.dataset.currentAdInfo.type&&(this.context.dataset.currentAdInfo=null)}},clearVideoAd:function(a){this.hide(),this.dataset.adPlayedSeconds=null,this.stopAdCountDownTime(),a&&this.context.gpApi.videoAdList&&(this.context.gpApi.videoAdList[a]=[])},addEventListener:function(){var a=this;this.dataset.eventsList={},this.dataset.eventsList[util.getUniqueMsgKey("resize")]=function(a){},this.dataset.eventsList[util.getUniqueMsgKey("enterBrowserFullscreen")]=function(b){a.dataset.isPauseAdShow&&Txplayer.util.mobile&&!Txplayer.util.os.ipad&&a.dataset.$pauseAd.removeClass(Txplayer.dataset.hideClass)};var b=function(b){a.dataset.yaliuRenderTimers&&a.dataset.yaliuRenderTimers[b]&&(clearInterval(a.dataset.yaliuRenderTimers[b]),a.dataset.yaliuRenderTimers[b]=null),a.dataset.yaliuCycleTimers&&a.dataset.yaliuCycleTimers[b]&&(clearTimeout(a.dataset.yaliuCycleTimers[b]),a.dataset.yaliuCycleTimers[b]=null)},c=function(b){if(a.context.dataset.hasShowCidArr&&a.context.dataset.hasShowCidArr.indexOf(b)>-1){var c="yaliu-ad-canvas-"+b,d=a.context.$mod.$playermod.find("[data-role="+c+"]");d.css({display:"none"});var e=a.context.dataset.hasShowCidArr.indexOf(b);a.context.dataset.hasShowCidArr.splice(e,1)}};this.dataset.eventsList[util.getUniqueMsgKey("userSeekStart")]=function(a){},this.dataset.eventsList[util.getUniqueMsgKey("userSeekEnd")]=function(a){},this.dataset.eventsList[util.getUniqueMsgKey("yaliuKeybroadSeek")]=function(a){b(a),c(a)},this.dataset.eventsList[util.getUniqueMsgKey("exitBrowserFullscreen")]=function(b){a.dataset.isPauseAdShow&&Txplayer.util.mobile&&!Txplayer.util.os.ipad&&a.dataset.$pauseAd.addClass(Txplayer.dataset.hideClass)},this.dataset.eventsList[util.getUniqueMsgKey("smallWindowModeChange")]=function(b){if(a.dataset.isPauseAdShow){var c=a.dataset.pauseAdSize.width,d=a.dataset.pauseAdSize.height,e=a.dataset.pauseAdSize.bottom;if(b.isSmallWindow){var f=d/214,g=c/380;g>=f?(c/=g,d/=g):(c/=f,d/=f),e="0"}a.dataset.$pauseAd.css({width:c,height:d,bottom:e})}},this.dataset.eventsList[util.getUniqueMsgKey("enterAd")]=function(d){var e=10,f=function(){if(e<=0){if(clearTimeout(h),a.dataset.$enterAd.addClass(Txplayer.dataset.hideClass),a.context.dataset.yaliuCidArr)for(var d=0;d<a.context.dataset.yaliuCidArr.length;d++){var g=a.context.dataset.yaliuCidArr[d];b(g),c(g)}}else{a.dataset.$time.html(e),e--;var h=setTimeout(f,1e3)}};f(),a.dataset.$ad.removeClass(Txplayer.dataset.hideClass),a.dataset.$enterAd.removeClass(Txplayer.dataset.hideClass),a.hideTime(!1)},this.dataset.eventsList[util.getUniqueMsgKey("videoPlay")]=function(b){a.dataset.isPauseAdShow&&(a.hide(),a.dataset.isPauseAdShow=!1)},this.dataset.eventsList[util.getUniqueMsgKey("videoPlaying")]=function(b){b&&"film"!==b.playListType?(a.getCurrentAdInfo(),a.context.dataset.isSkipAd||a.startAdCountDownTime(),a.showAdUIOnPlaying()):(a.context.dataset.isSkipAd=!1,a.hide(),a.stopAdCountDownTime())},this.dataset.eventsList[util.getUniqueMsgKey("userStopVideo")]=function(b){a.hide(),a.dataset.adPlayedSeconds=null,a.stopAdCountDownTime()},this.dataset.eventsList[util.getUniqueMsgKey("videoEnd")]=function(b){a.dataset.countDown=-1,b.playListTypeEnd&&a.isAdType(b.playListType)&&a.clearVideoAd(b.playListType),b.playListTypeEnd&&b.isAllEnd&&a.clearVideoAd()},this.dataset.eventsList[util.getUniqueMsgKey("error")]=function(b){if(b&&!a.isAdType(b.type))return void(a.dataset.adPlayedSeconds=null);var c=a.context.dataset.currentPlayListType,d=!1;b.type==c&&$.isArray(a.context.gpApi.videoAdList[c])&&b.index==a.context.gpApi.videoAdList[b.type].length-1&&(d=!0),d&&a.clearVideoAd(b.type)},this.dataset.eventsList[util.getUniqueMsgKey("videoPause")]=function(b){b&&"film"!==b.playListType&&a.stopAdCountDownTime()},this.dataset.eventsList[util.getUniqueMsgKey("vidChange")]=function(d){if(a.dataset.adPlayedSeconds=null,a.dataset.countDown=-1,a.stopAdCountDownTime(),a.context.dataset.yaliuCidArr&&a.context.dataset.yaliuCidArr.length>0)for(var e=0;e<a.context.dataset.yaliuCidArr.length;e++){var f=a.context.dataset.yaliuCidArr[e];b(f),c(f)}},this.dataset.eventsList[util.getUniqueMsgKey("ivbAdDataReady")]=function(b){b&&"array"===$.type(b)&&b.length&&a.showIvbAd(b)},this.dataset.eventsList[util.getUniqueMsgKey("pauseAdDataReady")]=function(b){if(b&&"array"===$.type(b)&&b.length){if("insertad"===a.context.dataset.currentPlayListType)return;if(1===a.context.dataset.playState)return;a.showPauseAd(b)}},this.dataset.eventsList[util.getUniqueMsgKey("volumeChange")]=function(b){b&&b.volume>0?(a.dataset.$volume.removeClass(a.dataset.muteClass),a.context.msg.broadcast("adMuteChange",{mute:!1})):(a.context.dataset.isMute?b.volume=0:b&&b.hasOwnProperty("volume")?b.volume=0:b.volume=a.context.dataset.volume,0===b.volume&&(a.dataset.$volume.addClass(a.dataset.muteClass),a.context.msg.broadcast("adMuteChange",{mute:!0})))},this.dataset.eventsList[util.getUniqueMsgKey("renderYaliu")]=function(b){"pc"===a.context.gpApi.pf_ex?a.dataset.adType="PSJ":a.dataset.adType="WSJ",a.renderYaliuAd(b)},$.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)}),this.dataset.privateApis={},this.dataset.privateApis.clearLoadingAd=function(){a.hide(),a.context.msg.broadcast("pauseAd")},$.each(this.dataset.privateApis,function(b,c){a.context.msg.on(b,c)});var d=function(){if(a.dataset.trueview)return void a.adSkip({force:!0});var b=a.context.dataset.duration;b&&b>0&&b<180?a.adSkip():a.isSkipAdButtonShow()&&(Txplayer.util.mobile&&!Txplayer.util.os.ipad?Txplayer.util.txLoginOnMobile&&"function"===$.type(Txplayer.util.txLoginOnMobile.isLogin)&&Txplayer.util.txLoginOnMobile.isLogin(function(a){if(0===a)Txplayer.util.txLoginOnMobile.goLogin();else{var b="http://film.qq.com/weixin/upay.html?aid=V0$$4:1";self==top?window.location.href=b:top.location.href=b}}):a.context.config.showOpenVIPGuide(),a.context.msg.broadcast("pauseAd"),a.context.msg.broadcast("closeAdClick"))};this.dataset.$close.on("click",function(){d()}),this.dataset.$closeText.on("click",function(){d()}),this.dataset.$trueviewClose.on("click",function(){d()}),this.dataset.$trueviewCloseText.on("click",function(){d()}),this.dataset.$volume.on("click",function(){a.dataset.$volume.hasClass(a.dataset.muteClass)?a.unMute({showTips:!1}):a.mute({showTips:!1})}),this.dataset.$detail.on("click",function(){a.openAdLink()}),this.dataset.$linkArea.on("click",function(){a.openAdLink()}),this.dataset.$why.on("click",function(){a.context.msg.broadcast("pauseAd"),a.hideUiPlay(),a.dataset.$noSkipTips.removeClass(Txplayer.dataset.hideClass)}),this.dataset.$noSkipTipsClose.on("click",function(){a.context.msg.broadcast("playAd"),a.dataset.$noSkipTips.addClass(Txplayer.dataset.hideClass)}),this.dataset.$pauseAdClose.on("click",function(){a.dataset.$pauseAd.addClass(Txplayer.dataset.hideClass),a.hide()}),this.context.msg.on("error",function(b){b&&"film"!==b.type&&"cgi"!==b.type||(a.context.msg.broadcast("pause"),a.context.msg.broadcast("clearFocusVideoUrl"),a.hide())}),this.context.msg.on("beforeVideoPlay",function(){a.hide()}),this.context.msg.on("setDefinitionStart",function(){a.dataset.$pauseAd.addClass(Txplayer.dataset.hideClass),a.hide()})},exportsModuleApis:function(){var a=this;this.dataset.privateApis={},this.dataset.privateApis.hidePlayAdUI=function(){a.hide()},this.dataset.privateApis.stopAdCountDownTime=function(){a.stopAdCountDownTime()},this.dataset.privateApis.adMuteStateUpdate=function(b){b&&b.hasOwnProperty("mute")&&(b.mute?a.mute():a.unMute())},$.each(this.dataset.privateApis,function(b,c){a.context.msg.on(b,c)})}},Txplayer.register("UiPlayerAd",UiPlayerAd)},function(a,b){a.exports='<txpdiv data-role="<%=adMod%>" class="txp_ad <%=hideClass%>"> <txpdiv class=txp_ad_inner> <% if(!isUseMobileUI){%> <a data-role="<%=linkArea%>" href=javascript:; class="txp_ad_link <%=hideClass%>"></a> <% } %> <a data-role="<%=detail%>" href=javascript:; class="txp_ad_more <%=hideClass%>">详情点击 <txpdiv class=txp_icon_arrow></txpdiv> </a> <txpdiv style="left:10px;bottom:10px;position:absolute;opacity:.6;font-size:12px;text-shadow:2px 2px #000" data-role="<%=dspName%>" class="<%=hideClass%>"></txpdiv> <txpdiv class=txp_ad_control> <txpdiv data-role="<%=enterAd%>" class="txp_ad_skip <%=hideClass%>"> <txpdiv data-role="<%=time%>" class=txp_ad_countdown>10</txpdiv> <txpdiv class=txp_ad_skip_text>进入广告</txpdiv> </txpdiv> <txpdiv data-role="<%=trueview%>" class="txp_ad_skip <%=hideClass%>"> <txpdiv data-role="<%=time%>" class=txp_ad_countdown></txpdiv> <% if(isTrueviewButtonShow) {%> <txpdiv data-role="<%=trueviewText%>" class=txp_ad_skip_text>你可以在<span data-role="<%=countDown%>">5</span>秒后关闭广告 </txpdiv> <txpdiv data-role="<%=trueviewCloseText%>" class="txp_ad_skip_text <%=hideClass%>">关闭广告</txpdiv> <button data-role="<%=trueviewClose%>" class="txp_btn txp_btn_close <%=hideClass%>" title=关闭广告></button> <% } else {%> <txpdiv data-role="<%=time%>" class=txp_ad_countdown></txpdiv> 广告 <% } %> </txpdiv> <txpdiv data-role="<%=canSkip%>" class="txp_ad_skip <%=hideClass%>"> <% if(!isSkipAdButtonShow||isVshou) {%> 广告剩余: <txpdiv data-role="<%=time%>" class=txp_ad_countdown></txpdiv> 秒 <% } else {%> <txpdiv data-role="<%=time%>" class=txp_ad_countdown></txpdiv> <% if(isUseMobileUI){%> <button data-role="<%=closeText%>" class=txp_ad_skip_text title=VIP免广告>VIP免广告</button> <%}else{%> <%if(isVshou) {%> <txpdiv class=txp_ad_skip_text>广告</txpdiv> <%}else{%> <txpdiv data-role="<%=closeText%>" class="txp_ad_skip_text <%=hideClass%>">VIP免广告</txpdiv> <button data-role="<%=close%>" class="txp_btn txp_btn_close <%=hideClass%>" title=VIP免广告></button> <% }} }%> </txpdiv> <txpdiv data-role="<%=noSkip%>" class="txp_ad_skip <%=hideClass%>"> <txpdiv data-role="<%=time%>" class=txp_ad_countdown></txpdiv> <txpdiv data-role="<%=noSkipText%>" class=txp_ad_skip_text>应版权方要求，VIP无法免该片广告</txpdiv> <button data-role="<%=why%>" class="txp_btn txp_btn_hint" title=无法跳过广告说明></button> </txpdiv> <button data-role="<%=volume%>" class="txp_btn txp_btn_ad_volume <%=hideClass%>"> <svg class="txp_icon txp_icon_volume" version=1.1 viewBox="0 0 24 24"> <use class=txp_svg_volume xmlns:xlink=http://www.w3.org/1999/xlink xlink:href=#txp_svg_volume></use> <use class=txp_svg_volume_mute xmlns:xlink=http://www.w3.org/1999/xlink xlink:href=#txp_svg_volume_mute></use> </svg> </button> </txpdiv> <% if(isUseMobileUI){ %> <txpdiv data-role="<%=noSkipTips%>" class="txp_ad_forbidden <%=hideClass%>"> <div class=txp_forbidden_text> <%=noSkipTipsTextMobile%> </div> <a data-role="<%=noSkipTipsClose%>" class=txp_btn_em href=#>我知道了</a> </txpdiv> <% }else{ %> <txpdiv data-role="<%=noSkipTips%>" class="txp_ad_dialog <%=hideClass%>"> <txpdiv class=txp_dialog_bd> <%=noSkipTipsText%> </txpdiv> <txpdiv data-role="<%=noSkipTipsClose%>" class=txp_ad_btn>我知道了!</txpdiv> <a target=_blank; class=txp_ad_fb href="http://support.qq.com/write.shtml?fid=850">意见反馈</a> <button data-role="<%=noSkipTipsClose%>" class="txp_btn txp_btn_close"></button> </txpdiv> <% } %> </txpdiv> <txpdiv class="txp_ad_corner <%=hideClass%>"> <img alt=""> </txpdiv> <txpdiv data-role="<%=pauseAd%>" class="txp_ad_center <%=hideClass%>"> <button data-role="<%=pauseAdClose%>" class="txp_btn txp_btn_close txp_btn_close_ad" title=跳过广告></button> <img data-role="<%=pauseAdImg%>" alt=""> <txpdiv style=left:8px;bottom:8px;position:absolute;opacity:.6;font-size:12px> <txpdiv style="background:#000;display:inline-block;box-shadow:2px 2px #000">广告</txpdiv> <txpdiv data-role="<%=dspName%>" style="display:inline-block;margin-left:10px;text-shadow:2px 2px #000"></txpdiv> </txpdiv> </txpdiv> <txpdiv class="txp_ad_bottom <%=hideClass%>"> <img alt=""> </txpdiv> <txpdiv data-role="<%=ivbAd%>" class="txp_ad_bottom_lg <%=hideClass%>" style=position:absolute;z-index:2> <img data-role="<%=ivbAdImg%>" alt=""> <span style=opacity:.7>广告</span> </txpdiv> </txpdiv> <txpdiv data-role="<%=yaliuAd%>" class="<%=hideClass%>" style=z-index:2;position:absolute> </txpdiv>';
},function(a,b){function c(a,b){return"string"==Txplayer.$.type(a)&&b&&(a+=a.indexOf("?")==-1?"?":"&"+Txplayer.$.param(b)),a}function d(a){g=Txplayer.$,this.msg=new Txplayer.Events,this.dataset={},this.context=a,this.init()}var e,f,g=Txplayer.$,h=(Txplayer.apiList,Txplayer.util),i={"not-start":0,"request-cgi":1,"request-cgi-done":1.1,playing:2,"play-end":3},j={"前贴":"WL|WK","中插":"WC","后贴":"WH","暂停":"WZ","口播":"WK",ivb:"WI","压流":"WSJ"},k={1:{type:"ivb",area:1}},l="WL|WK|WC|WH",m=0,n="H5",o="6",p=1;Txplayer.util.os.phone||Txplayer.util.os.tablet?Txplayer.util.os.ipad?o="6":Txplayer.util.os.iphone?o="3":Txplayer.util.os.android&&Txplayer.util.os.tablet?o="4":Txplayer.util.os.android&&Txplayer.util.os.phone&&(o="5"):o="0";var q=0,r=null;d.prototype={init:function(){this.dataset.dataKey=Txplayer.dataset.localStorageKey.adRfid,this.context.dataset.isPlayingAd=!1,this.initAdParams(),this.addEventListener(),this.exportsModuleApis()},initAdParams:function(){this.context.dataset.adReportData={},this.dataset.useMiaoBo=!0,e=this.context.gpApi,"pc"===this.getExtentionPlatform()||"mac"===this.getExtentionPlatform()?(n=this.isInSite()?"in":"out",j={"前贴":"LD|KB|PVL","中插":"ZC","后贴":"HT","暂停":"ZT","口播":"KB","压流":"PSJ",PPB:"PPB",PVL:"PVL",ivb:"ZI"},l="LD|KB|ZC|HT",f="pc",p=2):f=this.getExtentionPlatform(),this.context.dataset.adReportData.pf=n,this.context.gpApi.adtypeMap=j,this.context.gpApi.pf_ex=f,this.getReqId()},supportAd:function(a){var b=this,c={mac:"前贴,后贴,中插,暂停,PPB,PVL,ivb,压流",pc:"前贴,后贴,中插,暂停,PPB,PVL,ivb,压流",ipad:"前贴,后贴,暂停,ivb,压流",mobile:"前贴,后贴,暂停,ivb,压流",android:"前贴,后贴,暂停,ivb,压流","default":"前贴,后贴"};if("pc"==f)return!0;if(Txplayer.util.os.ipad){if(c.ipad.indexOf(a)>=0)return!0}else if(Txplayer.util.mobile){if(c.mobile.indexOf(a)>=0)return"暂停"!=a||!!b.context.dataset.isBrowserFullscreen}else if(Txplayer.util.os.android){if(c.android.indexOf(a)>=0)return!0}else if(c["default"].indexOf(a)>=0)return!0;return!1},getExtentionPlatform:function(){return h.os.iphone?"iphone":h.os.ipad?"ipad":h.os.android?"android":h.os.mac?"mac":h.os.windows?"pc":""},isVideoAd:function(a){if(!a)return!1;var b=["loadingad","insertad","endingad"];return g.inArray(a,b)>-1},getAdChannelId:function(){if(/ptag=wx\.search/i.test(location.href))return 64;if(this.context.config&&this.context.config.hasOwnProperty("chid")&&""!=this.context.config.chid)return this.context.config.chid;var a="";return/(.*\.)3g\.qq\.com$/i.test(window.location.hostname)?a=13:/(.*\.)?v\.qq\.com$/i.test(window.location.hostname)||h.browser.qqlive?a=0:h.browser.wechat?a=3:h.browser.mqq?a=10:h.browser.qqnews&&(a=2),a},isInSite:function(){return"v.qq.com"===location.hostname||"film.qq.com"===location.hostname||8===this.getAdChannelId()},noAd4Advertisers:function(){return"700700700"===Txplayer.util.getUrlParam("oid")},abortAndReRequest:function(){this.dataset.ajaxAdRequest&&"function"===Txplayer.$.type(this.dataset.ajaxAdRequest.abort)&&this.dataset.ajaxAdRequest.abort(),this.requestCgi({adType:"前贴"})},listenTouch:function(a){if("mac"===this.getExtentionPlatform()){var b=this,c=function(a){"block"==a.target.style.display&&(r=a.target,q<r.currentTime&&b.context.dataset.isPlayingAd&&(r.currentTime=q))},d=setInterval(function(){r&&(q=r.currentTime)},1e3);a?(Txplayer.$("video").off("seeking.touchbarAd"),Txplayer.$("video").off("seeked.touchbarAd"),Txplayer.$("video").on("seeking.touchbarAd",c),Txplayer.$("video").on("seeked.touchbarAd",c)):(clearInterval(d),Txplayer.$("video").off("seeking.touchbarAd"),Txplayer.$("video").off("seeked.touchbarAd"))}},isCgiRequest:function(a,b){var c="前贴,后贴";if(this.dataset.requestList&&this.dataset.requestList[b]){if(c.indexOf(b)>-1&&this.dataset.requestList[b].vid==a&&this.dataset.requestList[b].status)return!0;if(c.indexOf(b)<0&&this.dataset.requestList[b].vid==a&&"hasRequest"==this.dataset.requestList[b].status)return!0}return!1},setCgiStatus:function(a,b,c){this.dataset.requestList||(this.dataset.requestList={}),this.dataset.requestList[b]={vid:a,status:c}},requestCgi:function(a){var b=this;if(a=a||{},"view.inews.qq.com"===window.location.hostname&&"前贴"===a.adType)return void b.context.msg.broadcast("loadingadIsEmpty",!1);var c="http://livew.l.qq.com/livemsg?",d=Txplayer.$.Deferred();if(isPrepLoad=a.isPrepLoad||!1,vid=a.vid||this.context.dataset.vid,cid=a.cid||b.context.dataset.cid||"",rfid=h.getData(this.dataset.dataKey),!a.adType)return void h.showError("请求广告cgi参数错误, adType必须传");if(b.supportAd(a.adType)&&!this.isCgiRequest(vid,a.adType)){"https:"===location.protocol&&(c="https://livew.l.qq.com/livemsg?");var k=function(c){"前贴"===a.adType?b.context.msg.broadcast("loadingadIsEmpty",isPrepLoad):"后贴"===a.adType?b.context.msg.broadcast("adEnd",{type:"endingad"}):"压流"===a.adType&&b.context.msg.broadcast("reportDp3B",{bid:"10091000",step:"2",errorcode:"102"}),b.context.dataset.adReportData.errorcode=101,c||b.context.msg.broadcast("lviewRequestOver",{adType:j[a.adType],vid:vid})};if(this.noAd4Advertisers()&&"前贴"===a.adType)return void k();if(!this.noAd4Advertisers()){b.context.config&&"function"===Txplayer.$.type(b.context.config.getUserType)&&(b.dataset.pu=b.context.config.getUserType());var l={pf:n,ad_type:j[a.adType],pf_ex:f,url:location.href,ty:"web",plugin:"1.0.0",v:Txplayer.dataset.ver,coverid:cid,pt:b.context.dataset.businessId||"",vid:vid,flowid:b.context.dataset.flowid||"",guid:b.context.dataset.guid||"",vptag:"",pu:b.dataset.pu||"-1",chid:b.getAdChannelId(),adaptor:p,dtype:1,live:m,resp_type:"json",_time_random:+new Date};a.hasOwnProperty("zcindex")&&(l.zcindex=a.zcindex),"前贴"===a.adType&&rfid&&(l.rfid=rfid),b.context.dataset.trailerMode&&(l.page="trailerMode",l.trailerMode=1),"coolOpen"==b.context.config.playerType&&(l.page="coolOpen",b.context.dataset.isAnNewPlayAction?l.channelId=1:l.channelId=2),"page_langSwitch"==b.context.dataset.adext&&(l.page="langSwitch"),"pc"===f&&(l.page||(l.page=b.context.config.adPage)),isPrepLoad&&(l.preload=1,l.url=location.href.replace(/(\/)([A-Za-z0-9]+)(\.html)/,"$"+vid+"$3"));var o=h.getAdChannelId();o&&(l.chid=o);var q=function(c){if(b.setCgiStatus(vid,a.adType,"done"),!c)return b.dataset.cgiLoadState.code=4,void k();if(!(c&&c.adList&&c.adList.item))return b.dataset.cgiLoadState.code=4,void k();if(c.adList.has_scene_info&&"0"===c.adList.has_scene_info||"前贴"!==a.adType){if("压流"===a.adType)return b.context.dataset.adReportData.adType=j[a.adType],void b.context.msg.broadcast("loadendyaliu",c)}else b.context.msg.broadcast("loadyaliu","loadyaliu");var f;if(isPrepLoad?(b.dataset.prepOrderList||(b.dataset.prepOrderList={}),f=b.dataset.prepOrderList):f=b.context.dataset,f.adJson=c,c.adLoc&&c.adLoc.adFlag+""!="0"&&(f.isAdCanSkip=!0),b.dataset.cgiLoadState.code=0,f.adList=[],b.dataset.isAdPlayStart=!1,f.reportIndex=0,b.dataset.isPing=!1,Txplayer.$.isArray(c.adList.item)?f.adList=c.adList.item:c.adList.item.image&&f.adList.push(c.adList.item),"PPB"==a.adType?b.context.msg.broadcast("ppbAdDataReady",f.adList):"ivb"===a.adType?(b.context.msg.broadcast("ivbAdDataReady",f.adList),b.context.msg.broadcast("reportAd",f.adJson.adList.item[0])):"暂停"===a.adType?(f.adList=b.filterAdRes(f.adList,!0),0===f.adList.length?b.context.msg.broadcast("reportAd",f.adJson.adList.item[0]):b.context.msg.broadcast("reportAd",f.adList),b.dataset.isPing=!0):(f.adList=b.filter(f.adList),g.extend(e.videoAdList[e.adType2VideoType[a.adType]],f.adList)),"前贴"===a.adType&&(b.dataset.pvlAd=b.filterAdByType(c.adList.item,"PVL"),b.dataset.loadingAd=f.adList.concat(b.dataset.pvlAd)),b.context.msg.broadcast("lviewRequestOver",{adType:j[a.adType],vid:vid,adJson:c}),"前贴"===a.adType&&(b.listenTouch(1),b.recordInsertAdStartTime(c.adLoc.breakTime),c.adLoc.mult&&c.adLoc.mult.ivb&&b.recordMultTime(c.adLoc.mult.ivb),0==b.dataset.pvlAd.length&&0==f.adList.length||b.context.msg.broadcast("loadingAdDataReady",b.dataset.loadingAd,isPrepLoad)),"后贴"===a.adType&&(b.listenTouch(1),b.context.msg.broadcast("endingAdDataReady",f.adList),b.context.dataset.nextVid&&b.context.dataset.nextVideoInfo&&b.context.dataset.nextVideoInfo.vid&&(e.isPrepLoad=!0,b.requestCgi({adType:"前贴",isPrepLoad:!0,vid:b.context.dataset.nextVideoInfo.vid,cid:b.context.dataset.nextVideoInfo.cid}))),0===f.adList.length){if("前贴"===a.adType&&0!=b.dataset.pvlAd.length)return;return void k(c)}"中插"===a.adType&&(b.listenTouch(1),b.updateInsertAdListStatus(b.dataset.currentInsertAdPoint,i["request-cgi-done"]),b.dataset.isEnterAd=!0,b.context.dataset.isPlayingAd=!0,b.context.msg.broadcast("disableProgress"),b.context.msg.broadcast("disablePlayBtn"),b.context.msg.broadcast("disableDefinitionBtn"),b.enterAd(),setTimeout(function(){b.context.msg.broadcast("insertAdDataReady",{data:b.context.dataset.adList,insertTime:b.dataset.currentInsertAdPoint}),b.dataset.isEnterAd=!1},1e4)),"暂停"===a.adType&&b.context.msg.broadcast("pauseAdDataReady",b.context.dataset.adList),f.adDuration=b.getAdDuration(),d.resolve()},r=function(){if(!b.isCgiRequest(vid,a.adType)){e.videoAdList[e.adType2VideoType[a.adType]]=[],b.setCgiStatus(vid,a.adType,"hasRequest"),b.context.dataset.adReportData.aid2oid=-1,b.context.dataset.adReportData.adType=j[a.adType],c+=Txplayer.$.param(l),h.showInfo("HdPlayerAd.requestCgi.data",l);var f=Txplayer.$.Deferred();f.then(function(a){return a},function(){return b.dataset.ajaxAdRequest=Txplayer.$.jsonp({url:c,dataType:"jsonp",callbackParameter:"callback",callback:Txplayer.util.getJsonpCallbackName("livew"),timeout:8e3})}).done(q).fail(function(c,e){b.context.dataset.adReportData.errorcode=202,b.context.msg.broadcast("lviewRequestError",{adType:j[a.adType],vid:vid}),b.setCgiStatus(vid,a.adType,"fail"),"timeout"===e?b.dataset.cgiLoadState.code=3:b.dataset.cgiLoadState.code=1;var f;f=404===c.status?"检测广告被屏蔽":c.status,h.showError("广告请求失败",f+"-"+e),"前贴"===a.adType&&b.context.msg.broadcast("loadingAdRequestError",{code:c.status,msg:f,isPrepLoad:isPrepLoad}),"压流"===a.adType&&b.context.msg.broadcast("reportDp3B",{bid:"10091000",step:"2",errorcode:"101"}),d.reject()}).always(function(a,c){b.dataset.useMiaoBo=!1,b.dataset.cgiLoadState.etime=(new Date).getTime(),b.context.dataset.adReportData.aid2oid=b.dataset.cgiLoadState.etime-b.dataset.cgiLoadState.stime,b.context.msg.broadcast("adCgiLoaded",b.dataset.cgiLoadState)}),b.dataset.cgiLoadState={stime:(new Date).getTime(),adType:a.adType,isPrepLoad:isPrepLoad,vid:vid},b.dataset.useMiaoBo&&"前贴"===a.adType&&"function"==typeof _tenplayer_getAdData&&_tenplayer_getAdData()?f.resolve(_tenplayer_getAdData()):f.reject()}};if(!Txplayer.util.mobile||Txplayer.util.os.ipad||!Txplayer.util.txLoginOnMobile||"function"!==g.type(Txplayer.util.txLoginOnMobile.getWXCookie))return"wx"===h.cookie.get("main_login")&&(l.uid=h.cookie.get("vuserid"),l.tkn=h.cookie.get("vusession"),l.lt="wx"),r(),d;var s=!1;Txplayer.util.txLoginOnMobile.getWXCookie(function(a){return s?d:("wx"===a.main_login&&(l.uid=a.vuserid,l.tkn=a.vusession,l.lt="wx"),r(),s=!0,d)})}}},setReportNull:function(a){a.order_id="1",a.reportUrl=a.reportUrl.replace(/(livemsg\?o\=)(\d+)(\&)/,"$190$3"),a.reportUrlOther=null,a.reportUrlSDK=null},checkSuffix:function(a,b){a=a.toLowerCase();var c=/\.(\w+)(?:$|\?|\#)/.exec(a);if(!c||!c[1])return!1;if(!b)return c[1];if("string"==typeof b)return c[1]===b;if(Txplayer.$.isArray(b)){for(var d=!1,e=b.length-1;e>=0;e--)if(c[1]===b[e])return d=!0,!0;return!1}},filterRichMedia:function(a){return!!(a&&a.display_code&&a.display_code.length>0&&"Empty"!=a.display_code)&&(this.setReportNull(a),!0)},filterAdByType:function(a,b){var c=[],a=a||[],b=b||l;return Txplayer.$(a).each(function(a,d){d&&b.indexOf(d.type)>=0&&c.push(d)}),c},filter:function(a){var b,c,d,e,f,g=[],h=this;for(a=Txplayer.$.isArray(a)?a:[],b=0,c=a.length;b<c;b++)if(d=a[b]||{},d.oIdx=b+1,e&&e==d.type?e==d.type&&f++:(f=1,e=d.type),d.lcount=f,!h.filterRichMedia(d)&&d&&d.image&&d.duration>0&&(d.image=(Txplayer.$.isArray(d.image)?d.image[0]:d.image)||{},d.image&&(d.image.url||d.image.vid))){if(h.checkSuffix(d.image.url,"mp4")){d.link="Y"===d.no_click?"":d.link,g.push(d);continue}h.setReportNull(d)}return g},filterAdRes:function(a,b){var c=[],d=this;return Txplayer.$(a).each(function(a,e){b&&d.filterRichMedia(e)||e&&e.image&&("array"===Txplayer.$.type(e.image)&&(e.image=e.image[0]),e.image&&e.image.width&&e.image.height&&e.image.url&&(d.checkSuffix(e.image.url,["jpg","png","jpeg"])?c.push(e):d.setReportNull(e)))}),c},recordMultTime:function(a){var b=this;b.dataset.adLocTimes=[],Txplayer.$(a).each(function(a,c){c&&c.time&&b.dataset.adLocTimes.push({index:a,time:c.time/1e3,type:c.type,area:k[c.type].area})})},recordInsertAdStartTime:function(a){if(a&&a.hasOwnProperty("t")){var b=this,c=[];c="string"===Txplayer.$.type(a.t)?[a.t]:a.t,b.dataset.insertAdList=[];var d=function(a){var c=b.context.msg.getData("calcTotalPlaylist","film");if(0===c)return b.context.msg.once("getVideoUrlSuccess.recordInsertAdStartTime",function(){setTimeout(e,100),b.context.msg.off("getVideoUrlSuccess.recordInsertAdStartTime")}),0;if(c>=2){var d=a%300;(d>=285||d<=15)&&(a+=30,a>=b.context.dataset.duration&&(a-=60))}return parseInt(a)},e=function(){b.dataset.insertAdList=[],Txplayer.$(c).each(function(a,c){var e=d(parseInt(c));0!==e&&b.dataset.insertAdList.push({startTime:e,status:i["not-start"]})})};e()}},checkInTimeArea:function(a,b,c){return a>b+c?-1:a<b-c?1:0},getAdPlayPoint:function(a){if(a&&this.dataset.adLocTimes){a=parseInt(a);var b=this;return b.dataset.currentAdPoint=-1,Txplayer.$(b.dataset.adLocTimes).each(function(c,d){var e=b.checkInTimeArea(a,d.time,d.area);return 0===e?b.dataset.currentAdPoint=c:1===e?(b.dataset.nextAdPoint=c,-1):void 0}),-1}},checkAdTime:function(a){if(a&&this.dataset.adLocTimes){a=parseInt(a);var b=this;b.getAdPlayPoint(a),b.dataset.currentAdPoint>-1&&(this.requestCgi({adType:k[b.dataset.adLocTimes[b.dataset.currentAdPoint].type].type,zcindex:b.dataset.adLocTimes[b.dataset.currentAdPoint].index}),b.dataset.adLocTimes.splice(b.dataset.currentAdPoint,1)),0===b.dataset.adLocTimes.length}},startInsertAd:function(a){if(a&&this.dataset.insertAdList){a=parseInt(a);var b=!1,c=0,d=this,e=function(b){return a<=b+15&&a>=b-15};Txplayer.$(d.dataset.insertAdList).each(function(a,f){if(e(f.startTime)&&parseInt(f.status)===i["not-start"])return d.dataset.currentInsertAdPoint=f.startTime,b=!0,c=a,!1}),b&&(this.requestCgi({adType:"中插",zcindex:c}),this.updateInsertAdListStatus(d.dataset.currentInsertAdPoint,i["request-cgi"]))}},updateInsertAdListStatus:function(a,b){a&&b&&Txplayer.$(this.dataset.insertAdList).each(function(c,d){if(d.startTime===a)return d.status=b,!1})},getAdCurrentTime:function(){if(!this.context.dataset.isPlayingAd)return 0;var a=(this.context.dataset.currentPlayListType,this.context.dataset.playListIndex),b=this.context.dataset.videoCurrentTime,c=0,d=0;return Txplayer.$(this.context.dataset.adList).each(function(b,d){return b!==a&&void(d.duration&&(c+=parseInt(d.duration,10)/1e3))}),d=b+c,parseInt(d)},getAdDuration:function(){var a=0;return g(this.context.dataset.adList).each(function(b,c){c.duration&&(a+=parseInt(c.duration,10)/1e3)}),this.dataset.errAdTime&&"number"==g.type(this.dataset.errAdTime)&&(a-=this.dataset.errAdTime),a},getCurrentAdInfo:function(){if(!this.context.dataset.isPlayingAd)return{};var a=this.context.dataset.currentPlayListType;if("film"===a)return{};var b,c=this.context.msg.getData("getPlayListIndex",a);return this.context.dataset.adList&&this.context.dataset.adList[c]&&(b=this.context.dataset.adList[c]),b?b:{}},isAdCanSkip:function(){return!(!this.context.dataset.adJson||!this.context.dataset.adJson.adLoc||"0"===this.context.dataset.adJson.adLoc.adFlag)},pauseAd:function(){this.context.msg.broadcast("pause")},playAd:function(){this.context.msg.broadcast("play")},enterAd:function(){this.context.msg.broadcast("enterAd")},skipAd:function(a){a=a||{};var b={type:this.context.dataset.currentPlayListType,force:!!a.force};return this.clearDelayReport(),a.force?void this.context.msg.broadcast("handlerSkipAd",b):void(this.context.dataset.duration>180||(this.context.dataset.isPlayingAd=!1,this.dataset.isEnterAd=!1,this.context.msg.broadcast("handlerSkipAd",b)))},skipErrorAd:function(a,b){if(a){var c=this,d=c.context.dataset.currentPlayListType,e=c.filterAdByType(c.context.dataset.adList,l),f=e.length-1==a.index;a.hasOwnProperty("index")&&c.context.dataset.adList[a.index]&&(c.dataset.errAdTime||(c.dataset.errAdTime=0),c.dataset.errAdTime+=c.context.dataset.adList[a.index].duration/1e3,c.context.dataset.adDuration=c.getAdDuration()),f&&(c.context.dataset.isPlayingAd=!1,c.dataset.isEnterAd=!1,c.dataset.errAdTime=null),b||c.context.msg.broadcast("loadingAdPlayError",{isLastAd:f,type:d})}},saveRFID:function(){var a=this;a.context.dataset.adJson&&a.context.dataset.adJson.adLoc&&a.context.dataset.adJson.adLoc.rfid&&h.setData(a.dataset.dataKey,a.context.dataset.adJson.adLoc.rfid)},checkPing:function(){var a=this,b=a.getCurrentAdInfo()||{};if(!a.dataset.isEnterAd&&(a.dataset.isAdPlayStart||!(a.context.dataset.adList.length>0)||b.hasOwnProperty("oIdx")))if(a.context.dataset.reportIndex>a.context.dataset.adJson.adList.item.length)a.context.dataset.reportIndex=0,a.dataset.isPing=!0;else if(!a.dataset.isPing){a.context.dataset.reportIndex||(a.context.dataset.reportIndex=1);var c=a.context.dataset.reportIndex,d=b.oIdx||a.context.dataset.adJson.adList.item.length;for(0==a.context.dataset.adList.length&&(d=a.context.dataset.adJson.adList.item.length);c<=d;){var e=a.context.dataset.adJson.adList.item[c-1];e&&"1"==e.order_id?(a.getReportItem(c),a.reportAdByOid(c)):c==d&&(a.context.msg.broadcast("startViewMonitor",b),a.getReportItem(),a.reportAdByOid()),c++,a.context.dataset.reportIndex=c}d===a.context.dataset.adJson.adList.item.length&&(a.dataset.isPing=!0,a.context.dataset.reportIndex=0)}},getReportItem:function(a){var b=this,d=a?b.context.dataset.adJson.adList.item[a-1]:b.getCurrentAdInfo(),e=[],g=0;d&&(d.reportUrl&&(g=isNaN(d.ReportTime)?0:Math.ceil(d.ReportTime/1e3),e.push({time:g,url:c(d.reportUrl,{pf_ex:f,tpid:b.context.dataset.adJson.adLoc.tpid||""}),isOther:!1})),d.reportUrlOther&&d.reportUrlOther.reportitem&&(Txplayer.$.isArray(d.reportUrlOther.reportitem)||(d.reportUrlOther.reportitem=[d.reportUrlOther.reportitem]),Txplayer.$.each(d.reportUrlOther.reportitem,function(a,b){b&&b.url&&(g=isNaN(b.reporttime)?0:Math.ceil(b.reporttime/1e3),e.push({time:g,url:b.url,isOther:!0}))})),d.reportUrlSDK&&d.reportUrlSDK.reportitem&&(Txplayer.$.isArray(d.reportUrlSDK.reportitem)||(d.reportUrlSDK.reportitem=[d.reportUrlSDK.reportitem]),Txplayer.$.each(d.reportUrlSDK.reportitem,function(a,b){b&&b.url&&(g=isNaN(b.reporttime)?0:Math.ceil(b.reporttime/1e3),e.push({time:g,url:b.url,isOther:!0}))})),b.context.dataset.reportObjArr=e)},reportAdByOid:function(a){function b(a,b,c){var e;e=2===m?isNaN(c)?Math.ceil(currentTime):c:0,e=b&&b.ReportTime<e?b.ReportTime:e;var f={from:o,pf:n,v:Txplayer.dataset.ver,dura:d.context.dataset.duration,coverid:d.context.dataset.cid||"",vptag:Txplayer.util.getPTAG()||"",url:location.href,oadid:d.context.dataset.adJson.adLoc.aid||"",lcount:a||1,t:1e3*e};return"Empty"==b.display_code&&(f.chid=d.getAdChannelId()),f}var d=this;if(d.context.dataset.reportObjArr&&d.context.dataset.reportObjArr[0]){var e=a?d.context.dataset.adJson.adList.item[a-1]:d.getCurrentAdInfo();if(!e)return;Txplayer.$.each(d.context.dataset.reportObjArr,function(a,f){if(d.context.dataset.reportObjArr[a]){var g=2===m?currentTime:0;if(f){var h={url:document.URL};f.isOther||(h=Txplayer.$.extend(h,b(e.lcount,e,f.time)));var i=c(f.url,h),j=d.context.dataset.reportObjArr;g>f.time&&g-f.time<1||f.time<=g?Txplayer.util.report(i):d.delayReport(i,1e3*parseInt(f.time)),j[a]=void 0}}}),d.context.dataset.reportObjArr=null}},delayReport:function(a,b){var c=this,d=setTimeout(function(){Txplayer.util.report(a)},b);c.dataset.delayReportArr||(c.dataset.delayReportArr=[]),c.dataset.delayReportArr.push(d)},clearDelayReport:function(){var a=this;a.dataset.delayReportArr&&Txplayer.$.each(a.dataset.delayReportArr,function(a,b){b&&clearTimeout(b),b=null})},getAdPlayStatus:function(){return this.context.dataset.currentPlayListType&&"film"!==this.context.dataset.currentPlayListType?this.context.dataset.isPlayingAd=!0:this.context.dataset.isPlayingAd=!1},addEventListener:function(){var a=this;this.dataset.eventsList={},this.dataset.eventsList[h.getUniqueMsgKey("adPluginMsg")]=function(b){switch(b.name){case"requestCgi":a.requestCgi({adType:b.params});break;case"reportAd":a.context.msg.broadcast("reportAd",b.params)}},this.dataset.eventsList[h.getUniqueMsgKey("videoTimeUpdate")]=function(b){if(a.dataset.isEnterAd)a.context.dataset.isPlayingAd=!0;else if(a.context.dataset.isPlayingAd)return void(b&&"film"===b.playListType&&!a.dataset.isEnterAd&&(a.context.dataset.isPlayingAd=!1));a.supportAd("中插")&&a.startInsertAd(a.context.dataset.currentTime),a.checkAdTime(a.context.dataset.currentTime)},this.dataset.eventsList[h.getUniqueMsgKey("videoTimeUpdate")]=function(b){var c=(a.context.dataset.currentPlayListType,a.context.dataset.currentTime),d=a.context.dataset.duration,e=a.context.dataset.playEndTime;b&&"film"===b.playListType&&!a.dataset.hasRequestEndingAdData&&a.context.dataset.isTheLastOfCurrentType&&(a.context.dataset.skipPrelude&&e>0&&c>=e&&(a.dataset.hasRequestEndingAdData=!0,a.requestCgi({adType:"后贴"})),d&&d-c<=5&&(a.dataset.hasRequestEndingAdData=!0,a.requestCgi({adType:"后贴"}))),a.context.dataset.adJson&&a.context.dataset.adJson.adList&&a.checkPing()},this.dataset.eventsList[h.getUniqueMsgKey("videoEnd")]=function(b){b.playListTypeEnd&&"loadingad"===b.playListType?(a.context.dataset.isPlayingAd=!1,a.context.msg.broadcast("loadingAdEnded"),a.saveRFID()):b.playListTypeEnd&&"insertad"===b.playListType&&(a.context.dataset.isPlayingAd=!1,a.updateInsertAdListStatus(a.dataset.currentInsertAdPoint,i["play-end"]),a.context.msg.broadcast("insertAdEnded")),b.playListTypeEnd&&"film"!==b.playListType&&(a.listenTouch(0),a.checkPing(),a.context.msg.broadcast("adEnd",{type:b.playListType}),a.context.userMsg.broadcast("adEnd",{type:b.playListType}),a.dataset.errAdTime=0)},this.dataset.eventsList[h.getUniqueMsgKey("videoPlaying")]=function(b){var c=a.context.dataset.currentPlayListType;return"film"===c?void(a.dataset.errAdTime=null):void("loadingad"!==c||a.dataset.loadingAdHasPlayed?"insertad"!==c||a.dataset.insertAdHasPlayed?"endingad"!==c||a.dataset.endingAdHasPlayed||(a.context.msg.broadcast("endingAdStart"),a.context.userMsg.broadcast("adStart",{type:c}),a.dataset.endingAdHasPlayed=!0):(a.context.msg.broadcast("insertAdStart"),a.context.userMsg.broadcast("adStart",{type:c}),a.dataset.insertAdHasPlayed=!0):(a.context.msg.broadcast("loadingAdStart"),a.context.userMsg.broadcast("adStart",{type:c}),a.dataset.loadingAdHasPlayed=!0))},this.dataset.eventsList[h.getUniqueMsgKey("videoPlay")]=function(b){a.getAdPlayStatus()&&(a.dataset.isAdPlayStart=!0)},this.dataset.eventsList[h.getUniqueMsgKey("videoPlaying")]=function(b){a.getAdPlayStatus()&&(a.dataset.isAdPlayStart=!0)},this.dataset.eventsList[h.getUniqueMsgKey("userPausePlayer")]=function(){a.context.dataset.isPlayingAd||a.requestCgi({adType:"暂停"})},this.dataset.eventsList[h.getUniqueMsgKey("userStopVideo")]=function(b){a.dataset.requestList=null},this.dataset.eventsList[h.getUniqueMsgKey("videoEnd")]=function(b){"film"===b.playListType||"endingad"===b.playListType&&b.playListTypeEnd||a.context.msg.broadcast("hideUiPlay"),b.playListTypeEnd&&b.isAllEnd&&(a.context.dataset.isPlayingAd=!1,a.dataset.hasRequestGetinfo=!1,a.dataset.hasRequestEndingAdData=!1,a.dataset.isEnterAd=!1)},this.dataset.eventsList[h.getUniqueMsgKey("getVideoUrlSuccess")]=function(){a.dataset.hasRequestGetinfo=!0},this.dataset.eventsList[h.getUniqueMsgKey("error")]=function(b){return b&&!a.isVideoAd(b.type)?void(a.dataset.errAdTime=null):(a.context.dataset.adReportData.errorcode=207,a.context.msg.broadcast("reportAdError",b),void a.skipErrorAd(b))},this.dataset.eventsList[h.getUniqueMsgKey("vidChange")]=function(b,c){a.dataset.hasRequestLoadingAdData=null,a.dataset.hasRequestEndingAdData=null,a.dataset.hasRequestGetinfo=null,a.context.dataset.isPlayingAd=!1,a.dataset.loadingAdHasPlayed=null,a.dataset.insertAdHasPlayed=null,a.dataset.endingAdHasPlayed=null,a.dataset.errAdTime=null,a.dataset.isEnterAd=!1,a.context.dataset.isSkipAd=!1},this.dataset.eventsList[h.getUniqueMsgKey("beforeVideoPlay")]=function(b,c){a.dataset.hasRequestLoadingAdData=null,a.dataset.hasRequestGetinfo=null,e.isPrepLoad=!1,e.currentVid=b,a.dataset.requestList&&a.dataset.requestList["前贴"]&&b!==c?a.dataset.requestList["前贴"].vid!=b?(a.dataset.requestList=null,a.abortAndReRequest()):(a.dataset.isPing=!1,g.extend(a.context.dataset,a.dataset.prepOrderList),a.context.dataset.adDuration=a.getAdDuration(),a.dataset.prepOrderList=null):(a.dataset.requestList=null,a.requestCgi({adType:"前贴"})),a.listenTouch(0)},this.dataset.eventsList[h.getUniqueMsgKey("beforeVideoRePlay")]=function(b){a.dataset.hasRequestLoadingAdData=null,a.dataset.hasRequestGetinfo=null,a.dataset.isEnterAd=!1,a.context.dataset.isRePlay=!0,a.context.dataset.isSkipAd=!1,a.context.dataset.isPlayingAd=!1,a.dataset.loadingAdHasPlayed=null,a.dataset.insertAdHasPlayed=null,a.dataset.endingAdHasPlayed=null,a.dataset.requestList=null},this.dataset.eventsList[h.getUniqueMsgKey("requestYaliu")]=function(b){a.context.dataset.yaliuRequestStart=(new Date).getTime(),a.context.msg.broadcast("reportDp3B",{bid:"10091000",step:"1"}),e.isPrepLoad?a.requestCgi({adType:"压流",isPrepLoad:!0,vid:a.context.dataset.nextVideoInfo.vid,cid:a.context.dataset.nextVideoInfo.cid}):a.requestCgi({adType:"压流"})},Txplayer.$.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)}),this.context.userMsg.on("1080pVipGuideClose.hdplayerad",function(b){b&&"closeSkipAd"===b.action&&a.playAd()})},exportsModuleApis:function(){var a=this;this.dataset.privateApis={},this.dataset.privateApis.pauseAd=this.pauseAd.bind(this),this.dataset.privateApis.playAd=this.playAd.bind(this),this.dataset.privateApis.skipAd=this.skipAd.bind(this),this.dataset.privateApis.requestLoadingAd=function(){a.requestCgi({adType:"前贴"})},Txplayer.$.each(this.dataset.privateApis,function(b,c){a.context.msg.on(b,c)})},getReqId:function(){for(var a=[],b="0123456789abcdef",c=0;c<36;c++)a[c]=b.substr(Math.floor(16*Math.random()),1);a[14]="4",a[19]=b.substr(3&a[19]|8,1),a[8]=a[13]=a[18]=a[23]="-";var d=a.join("");this.context.dataset.reqId=d}},Txplayer.register("HdPlayerAd",d)},function(a,b,c){function d(a){e=Txplayer.$,this.msg=new Txplayer.Events,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util;Txplayer.apiList,c(3),d.prototype={init:function(){this.write(),this.addEventListener()},write:function(){},assemble:function(a){for(var b={adList:{has_scene_info:a.adList.has_scene_info,IsNeedTime:a.adList.IsNeedTime,item:[]},adGetv:a.adGetv,adLoc:a.adLoc},c=0;c<a.adList.item.length;c++){var d=a.adList.item[c].anchor_binding;if(d)for(var e=0;e<d.length;e++){var f=a.adList.item[c].order_id,g=d[e].cid,h=d[e].anchor_rule_id,i=d[e].anchor_id,j=this.assembleEachOrder(f,g,h,i,a.adList.item[c],a.scene_info.anchor_rule);b.adList.item.push(j)}}return b},assembleEachOrder:function(a,b,c,d,e,f){var g=JSON.parse(JSON.stringify(e));delete g.creative,delete g.anchor_binding;for(var h=0;h<e.creative.length;h++){var i=e.creative[h];if(i.id==b)for(var j in i)"id"==j?g.cid=i[j]:g[j]=i[j]}for(var h=0;h<e.anchor_binding.length;h++){var k=e.anchor_binding[h];k.cid==b&&k.anchor_rule_id==c&&k.anchor_id==d&&(g.link=k.link,g.report_url=k.report_url,g.anchor_rule_id=c)}for(var h=0;h<f.length;h++)if(f[h].id==c)for(var l=f[h].anchor,m=0;m<l.length;m++)l[m].id==d&&(g.anchor=l[m],g.anchor_rule_type=f[h].type);return g},requestPNG:function(a,b){0==a.indexOf("http://")&&(a="https://"+a.split("http://")[1]);var c=this;Txplayer.$.jsonp({url:a,dataType:"jsonp",callbackParameter:"callback",callback:"adplayerYaliuJsonpCallback",timeout:2e4,cache:!0}).done(function(a){for(var d=c.dataset.expandingOrders,e=0;e<d.length;e++)if(d[e].cid==b){var f=d[e].png_index;d[e].material[f].data=a,d[e].offscreenCanvasArr=[];var g=a.width,h=a.height;d[e].anchor.pos_w=g/1920,d[e].anchor.pos_h=h/1080;for(var i=0;i<a.frames.length-1;i++){var j=a.frames[i],k="data:image/png;base64,"+a.data[j];c.getOffscreenCanvas(k,i,g,h,e,b)}}c.context.msg.broadcast("reportDp3B",{bid:"10091000",step:"4",errorcode:"100",index:b,type:"png",cost:(new Date).getTime()-c.context.dataset.yaliuFodderStart[b]})}).fail(function(a,d){c.context.msg.broadcast("reportDp3B",{bid:"10091000",step:"4",errorcode:"101",type:"png",cost:(new Date).getTime()-c.context.dataset.yaliuFodderStart[b]})})},requestMP4:function(a,b){0==a.indexOf("http://")&&(a="https://"+a.split("http://")[1]);for(var c=this,d=c.dataset.expandingOrders,e=0;e<d.length;e++)if(d[e].cid==b){var f=d[e].mp4_index,g=d[e].material[f].width/2,h=d[e].material[f].height;d[e].anchor.pos_w=g/1920,d[e].anchor.pos_h=h/1080;var i=document.createElement("video");d[e].videoElement=i,i.style.width=g+"px",i.style.height=h+"px";var j=new XMLHttpRequest;j.open("GET",a,!0),j.responseType="arraybuffer",j.timeout="6000",j.send(),j.onload=function(){if(200!==j.status)return alert("Unexpected status code "+j.status+" for "+a),!1;var d=new Uint8Array(j.response),e=window.URL.createObjectURL(new Blob([d],{type:"video/mp4"}));i.src=e,i.videoCanPlay=!0,c.context.msg.broadcast("reportDp3B",{bid:"10091000",step:"4",errorcode:"100",index:b,type:"mp4",cost:(new Date).getTime()-c.context.dataset.yaliuFodderStart[b]})},j.onerror=function(){c.context.msg.broadcast("reportDp3B",{bid:"10091000",step:"4",errorcode:"101",type:"mp4",cost:(new Date).getTime()-c.context.dataset.yaliuFodderStart[b]})}}},getOffscreenCanvas:function(a,b,c,d,e,f){var g=this,h=document.createElement("img");h.src=a,h.onload=function(){var a=document.createElement("canvas"),f=a.getContext("2d");a.width=c,a.height=d,f.drawImage(h,0,0,c,d),g.dataset.expandingOrders[e].offscreenCanvasArr[b]=a}},addEventListener:function(){var a=this;this.dataset.eventsList={};var b=this.dataset.eventsList;b[f.getUniqueMsgKey("videoTimeUpdate")]=function(b){var c=a.context.dataset.currentTime,d=a.dataset.expandingOrders;if(d)for(var e=0;e<d.length;e++){if("pc"===a.context.gpApi.pf_ex)var f=a.checkTime(d[e],c,6e3);else var f=a.checkTime(d[e],c,2e4);var g=a.checkTime(d[e],c,0);f&&!d[e].preload&&(a.preload(d[e]),d[e].preload=!0),g?a.context.dataset.canReportCids[d[e].cid]=!0:(a.context.dataset.canReportCids[d[e].cid]=!1,a.context.dataset.hasReportCids[d[e].cid]=!1,a.context.msg.broadcast("yaliuKeybroadSeek",d[e].cid)),g&&a.context.dataset.hasShowCidArr.indexOf(d[e].cid)==-1&&1==a.context.dataset.playState&&a.context.dataset.vid==d[e].vid&&"film"==b.playListType&&("pc"===a.context.gpApi.pf_ex?(a.context.dataset.hasShowCidArr.push(d[e].cid),a.context.msg.broadcast("renderYaliu",d[e])):d[e].material[d[e].png_index].data&&(a.context.dataset.hasShowCidArr.push(d[e].cid),a.context.msg.broadcast("renderYaliu",d[e]))),"film"!=b.playListType&&a.context.msg.broadcast("yaliuKeybroadSeek",d[e].cid)}},b[f.getUniqueMsgKey("loadyaliu")]=function(b){a.context.msg.broadcast("requestYaliu")},b[f.getUniqueMsgKey("loadendyaliu")]=function(b){a.context.dataset.yaliuRequestEnd=(new Date).getTime(),a.context.msg.broadcast("reportDp3B",{bid:"10091000",step:"2",errorcode:"100",cost:a.context.dataset.yaliuRequestEnd-a.context.dataset.yaliuRequestStart}),a.context.dataset.hasShowCidArr=[],a.context.dataset.canReportCids={},a.context.dataset.hasReportCids={},a.context.dataset.yaliuCidArr=[],a.dataset.expandingOrders=a.assemble(b).adList.item;for(var c=b.adLoc.vid,d=a.dataset.expandingOrders,e=d.length-1;e>=0;e--){for(var b=d[e],f=b.material.length-1;f>=0;f--){var g=b.material[f].url;".mp4"===g.substring(g.length-4).toLowerCase()?b.mp4_index=f:".json"===g.substring(g.length-5).toLowerCase()&&(b.png_index=f)}b.vid=c,a.context.dataset.hasReportCids[b.cid]=!1,a.context.dataset.yaliuCidArr.push(b.cid)}a.context.dataset.yaliuFodderStart={}},Txplayer.$.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)}),a.checkTime=function(b,c,d){
var e;return c*=1e3,e=b.anchor.interval&&""!=b.anchor.interval?b.anchor.begin<=c+d&&1e3*a.context.dataset.duration-b.anchor.end>c:b.anchor.begin<=c+d&&parseInt(b.anchor.begin)+parseInt(b.duration)>c},a.preload=function(b){"pc"===a.context.gpApi.pf_ex?(a.requestMP4(b.material[b.mp4_index].url,b.cid),a.context.msg.broadcast("reportDp3B",{bid:"10091000",step:"3",type:"mp4"})):(a.requestPNG(b.material[b.png_index].url,b.cid),a.context.msg.broadcast("reportDp3B",{bid:"10091000",step:"3",type:"png"})),a.context.dataset.yaliuFodderStart[b.cid]=(new Date).getTime()}}},Txplayer.register("YaliuPlayer",d)},function(a,b){function c(a){d=Txplayer.$,this.msg=new Txplayer.Events,this.dataset={},this.context=a,this.api={url:"//ra.gtimg.com/web/viewability/viewability.js",reportData:null,startMonitor:null},this.init()}var d=Txplayer.$,e=Txplayer.util;Txplayer.apiList,c.prototype={init:function(){this.addEventListener()},initApi:function(a){var b=this;return d.getScript(b.api.url,function(){crystal&&crystal.startviewability&&(b.api.startMonitor=crystal.startviewability),a&&a()},function(){})},getReportData:function(a){var b=[];if(!(a&&a.reportUrlView&&a.reportUrlView.reportitem&&a.reportUrlView.reportitem.length>0))return this.api.reportData=null;for(var b=[],c=0;c<a.reportUrlView.reportitem.length;c++){var d;a.reportUrlView.reportitem[c]&&a.reportUrlView.reportitem[c].url&&(d=a.reportUrlView.reportitem[c].url),b.push(d)}return this.api.reportData={objectID:this.context.$mod.$playermod.selector,reportItemUrl:b,oid:a.order_id,duration:a.duration,retry:0}},addEventListener:function(){var a=this;this.dataset.eventsList={};var b=this.dataset.eventsList;b[e.getUniqueMsgKey("startViewMonitor")]=function(b){a.getReportData(b),a.api.reportData&&(a.api.startMonitor?a.api.startMonitor(a.api.reportData):a.initApi(function(){a.api.startMonitor(a.api.reportData)}))},Txplayer.$.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)})}},Txplayer.register("ViewMonitor",c)},function(a,b){function c(a){d=Txplayer.$,this.msg=new Txplayer.Events,this.dataset={},this.context=a,this.init()}var d=Txplayer.$,e=(Txplayer.apiList,Txplayer.util);c.prototype={init:function(){this.addEventListener(),this.dp3Report(1)},setReportTimeData:function(){if(this.dataset.adData||"object"===Txplayer.$.type(this.dataset.adData)){var a=[],b=this;this.dataset.reportData={},this.dataset.adData.hasOwnProperty("ReportTime")&&this.dataset.adData.reportUrl&&(this.dataset.reportData[this.dataset.adData.ReportTime]=[this.dataset.adData.reportUrl]),this.dataset.adData.reportUrlOther&&this.dataset.adData.reportUrlOther.reportitem&&(a="object"===Txplayer.$.type(this.dataset.adData.reportUrlOther.reportitem)?[this.dataset.adData.reportUrlOther.reportitem]:this.dataset.adData.reportUrlOther.reportitem),a.length&&Txplayer.$(a).each(function(a,c){c.hasOwnProperty("reporttime")&&c.url&&(b.dataset.reportData[c.reporttime]||(b.dataset.reportData[c.reporttime]=[]),b.dataset.reportData[c.reporttime].push(c.url))})}},getAdItemParma:function(a,b,c){var d=this;return c&&c.adJson&&(d.dataset.adJson=c.adJson),d.dataset.adJson&&d.dataset.adJson[a]&&d.dataset.adJson[a].hasOwnProperty(b)?d.dataset.adJson[a][b]:""},dp3Report:function(a,b){if(a){b||(b={});var c=this;c.context.dataset&&c.context.dataset.adReportData&&c.context.dataset.adReportData.adType&&(this.dataset.adType=c.context.dataset.adReportData.adType);var d,f=e.cookie.get("luin")||e.cookie.get("uin")||"",g={},h={requestid:this.context.dataset.guid,pf:"H5",chid:e.getAdChannelId(),adtype:b.adType||this.dataset.adType||"",timestamp:+new Date,mvid:b.vid||this.context.dataset.vid||"",videoDuration:this.context.dataset.duration||0,coverid:"",qq:f},i="//dp3.qq.com/qqvideo/?",j={};if(2===a||5===a){var k=[],l=[],m=[];if(items=c.getAdItemParma("adList","item",b),items){var n="object"===Txplayer.$.type(items)?[items]:items;Txplayer.$(n).each(function(a,b){b.order_id&&b.duration&&(b.duration&&m.push(b.duration),b.image&&b.image.vid?l.push(b.image.vid):"array"===Txplayer.$.type(b.image)&&b.image.length&&b.image[0].vid&&l.push(b.image[0].vid),k.push(b.order_id))})}j.oid=k.join(","),j.vid=l.join(","),j.videopt=m.join(",")}1===a?d={}:2===a?d={vid2aid:c.getAdItemParma("adLoc","vid2aid",b),aid2oid:c.context.dataset.adReportData.aid2oid||"",oid2url:c.getAdItemParma("adGetv","oid2url",b),merged:1,adaptor:1,errorcode:c.context.dataset.adReportData.errorcode||"",adid:c.getAdItemParma("adLoc","aid",b),oid:j.oid,vid:j.vid}:3===a?d={videofbt:c.context.dataset.adReportData.videofbt||"",errorcode:c.context.dataset.adReportData.errorcode||""}:4===a?d={isskip:c.context.dataset.adReportData.isskip||"",errorcode:c.context.dataset.adReportData.errorcode||"",skiptime:c.context.dataset.adReportData.skiptime||"",adDidShowTime:c.context.dataset.videoCurrentTime}:5===a&&(d={errorcode:"",adtt:this.context.dataset.adDuration,videopt:j.videopt,videott:b.adRealPlayedTime}),d&&(g=Txplayer.$.extend(h,d),g.step=a,i+=Txplayer.$.param(g),e.report(i),c.context.dataset.adReportData={})}},dp3BReport:function(a){var b=this;b.context.dataset&&b.context.dataset.adReportData&&b.context.dataset.adReportData.adType&&(this.dataset.adType=b.context.dataset.adReportData.adType);var c="//dp3.qq.com/stdlog?",d={bid:a.bid,vid:this.context.dataset.vid,coverid:this.context.dataset.cid,guid:this.context.dataset.guid,qq:e.cookie.get("luin")||e.cookie.get("uin")||"",adtype:this.dataset.adType||"",oid:a.oid||"",adid:this.dataset.adJson?this.dataset.adJson.adLoc.aid:"",index:a.creativeid||"",step:a.step||"",errorcode:a.errorcode||"",cost:a.cost||"",reqid:this.context.dataset.reqid,pf:"H5",type:a.type||"",timestamp:(new Date).getTime()};c+=Txplayer.$.param(d),e.report(c)},resetDataset:function(){delete this.dataset.adFirstPlayTime,delete this.dataset.adFirstPlayingTime,delete this.dataset.adRealPlayedTime},getCurrentAdInfo:function(){if(!this.context.dataset.isPlayingAd)return{};var a,b=(this.context.dataset.playListType,this.context.dataset.currentPlayListIndex);return this.context.dataset.adList&&this.context.dataset.adList[b]&&(a=this.context.dataset.adList[b]),a?a:{}},addEventListener:function(){var a=this;this.dataset.eventsList={},this.dataset.eventsList[e.getUniqueMsgKey("videoTimeUpdate")]=function(b){if(b&&"loadingad"===b.playListType&&b.videoTag){"array"===Txplayer.$.type(a.dataset.adRealPlayedTime)&&(a.dataset.adRealPlayedTime[a.dataset.adRealPlayedTime.length-1]=a.dataset.adRealPlayedTime[a.dataset.adRealPlayedTime.length-1]+1);var c=parseInt(b.videoTag.currentTime);a.dataset.reportData&&a.dataset.reportData[c]&&Txplayer.$(a.dataset.reportData[c]).each(function(a,b){e.report(b)})}},this.dataset.eventsList[e.getUniqueMsgKey("videoPlay")]=function(b){b&&("loadingad"!==b.playListType&&"insertad"!==b.playListType&&"endingad"!==b.playListType||(a.dataset.adRealPlayedTime||(a.dataset.adRealPlayedTime=[]),a.dataset.adRealPlayedTime.hasOwnProperty(b.videoTag.src)||(a.dataset.adRealPlayedTime[b.videoTag.src]=null,a.dataset.adRealPlayedTime.push(-1)),a.dataset.adFirstPlayTime=+new Date,a.context.dataset.adReportData.videofbt=+new Date,a.dataset.adData=a.getCurrentAdInfo(),a.setReportTimeData()))},this.dataset.eventsList[e.getUniqueMsgKey("videoPlaying")]=function(b){b&&("loadingad"!==b.playListType&&"insertad"!==b.playListType&&"endingad"!==b.playListType||(a.context.dataset.adReportData.videofbt&&a.context.dataset.adReportData.videofbt>0&&(a.context.dataset.adReportData.videofbt=+new Date-a.context.dataset.adReportData.videofbt),a.dp3Report(3,{adType:a.context.gpApi.adtypeMap[a.context.gpApi.videoType2AdType[b.playListType]],vid:a.context.gpApi.currentVid||""})))},this.dataset.eventsList[e.getUniqueMsgKey("openAdLink")]=function(a){if(a&&a.clickReportUrlOther&&a.clickReportUrlOther.reportitem)return void e.report(a.clickReportUrlOther.reportitem.url)},this.dataset.eventsList[e.getUniqueMsgKey("reportAd")]=function(b){var c=[];Txplayer.$.isArray(b)&&(b=b[0]),b&&"object"==typeof b&&(b.reportUrl&&e.report(b.reportUrl),b.report_url&&e.report(b.report_url),b.reportUrlOther&&b.reportUrlOther.reportitem&&("object"===Txplayer.$.type(b.reportUrlOther.reportitem)?c.push(b.reportUrlOther.reportitem):c=b.reportUrlOther.reportitem),Txplayer.$(c).each(function(a,b){b&&b.url&&e.report(b.url)}),a.resetDataset(),a.dataset.adType=b?b.type:"",a.dataset.adJson=a.context.dataset.adJson,a.dp3Report(3))},this.dataset.eventsList[e.getUniqueMsgKey("videoEnd")]=function(b){!b.playListTypeEnd||"loadingad"!==b.playListType&&"insertad"!==b.playListType&&"endingad"!==b.playListType||a.dp3Report(5,{adType:a.context.gpApi.adtypeMap[a.context.gpApi.videoType2AdType[b.playListType]],vid:a.context.gpApi.currentVid||"",adRealPlayedTime:"array"===Txplayer.$.type(a.dataset.adRealPlayedTime)?a.dataset.adRealPlayedTime.join(","):""})},this.dataset.eventsList[e.getUniqueMsgKey("lviewRequestOver")]=function(b){a.resetDataset(),setTimeout(function(){a.dp3Report(2,b)},100)},this.dataset.eventsList[e.getUniqueMsgKey("lviewRequestError")]=function(b){a.resetDataset(),setTimeout(function(){a.dp3Report(2,b)},100)},this.dataset.eventsList[e.getUniqueMsgKey("reportAdError")]=function(b){a.resetDataset(),a.dp3Report(3,{adType:a.context.gpApi.adtypeMap[a.context.gpApi.videoType2AdType[b.playListType]],vid:a.context.gpApi.currentVid||""})},this.dataset.eventsList[e.getUniqueMsgKey("adSkip")]=function(b){a.dp3Report(4,{vid:a.context.gpApi.currentVid||""})},this.dataset.eventsList[e.getUniqueMsgKey("reportDp3B")]=function(b){a.dp3BReport(b)},Txplayer.$.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)})}},Txplayer.register("HdPlayerAdReport",c)}])}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(167)},167:function(a,b,c){function d(a){e=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util,g=c(168);d.prototype={init:function(){this.write(),this.addEventListerner()},write:function(){var a={loading:"txp-ui-loading",continuePlay:"txp-ui-continue-play",hide:Txplayer.dataset.hideClass},b=e.tmpl(g,a);this.context.dataset.$playermod.append(b),this.dataset.$loading=this.context.dataset.$playermod.find('[data-role="'+a.loading+'"]'),this.dataset.$continue=this.context.dataset.$playermod.find('[data-role="'+a.continuePlay+'"]')},remove:function(){this.dataset.$loading.remove()},isNeedShowLoading:function(){if(1==this.context.dataset.playState||0==this.context.dataset.playState||2==this.context.dataset.playState)return!1;var a=this.context.msg.getData("checkTimeisInBufferdRange",this.context.dataset.videoCurrentTime);if(!a||3==this.context.dataset.playState)return!0},stopTimer:function(){this.dataset.timer&&(clearTimeout(this.dataset.timer),this.dataset.timer=null)},hide:function(){this.stopTimer(),this.dataset.isShowing&&(this.context.dataset.isMinbufferControlPause||(this.dataset.$loading.addClass(Txplayer.dataset.hideClass),this.dataset.isShowing=!1))},show:function(){if(!this.dataset.isShowing&&this.dataset.isPlayed){var a=this,b=function(){a.dataset.$loading.removeClass(Txplayer.dataset.hideClass),a.dataset.isShowing=!0};this.stopTimer(),this.dataset.timer=setTimeout(function(){a.isNeedShowLoading()&&b()},50)}},addEventListerner:function(){var a=this;this.dataset.eventsList={},this.dataset.eventsList[f.getUniqueMsgKey("videoPlaying")]=function(){a.hide(),a.dataset.isPlayed=!0},this.dataset.eventsList[f.getUniqueMsgKey("isPlayingAdStatusChange")]=function(b){b&&(a.dataset.isPlayed=!0,a.hide())},this.dataset.eventsList[f.getUniqueMsgKey("videoSeeked")]=function(){a.hide()},this.dataset.eventsList[f.getUniqueMsgKey("networkBadEnd")]=function(){a.hide()},this.dataset.eventsList[f.getUniqueMsgKey("videoLoadstart")]=function(){a.show()},this.dataset.eventsList[f.getUniqueMsgKey("videoSeeking")]=function(){a.show()},this.dataset.eventsList[f.getUniqueMsgKey("videoWaiting")]=function(){a.show()},this.dataset.eventsList[f.getUniqueMsgKey("networkBadStart")]=function(){a.show()},this.dataset.eventsList[f.getUniqueMsgKey("showLoading")]=function(){a.context.dataset.isPlayingAd||(a.dataset.$loading.removeClass(Txplayer.dataset.hideClass),a.dataset.isShowing=!0)},this.dataset.eventsList[f.getUniqueMsgKey("hideLoading")]=function(){a.hide()},this.dataset.eventsList[f.getUniqueMsgKey("showContinuePlay")]=function(b){if("number"==typeof b){var c=parseInt(b/60),d=parseInt(b%60),e="上次观看至"+(c?c+"分":"")+d+"秒，正在为你续播";a.dataset.$continue.text(e),a.dataset.$continue.removeClass(Txplayer.dataset.hideClass),setTimeout(function(){a.dataset.$continue.addClass(Txplayer.dataset.hideClass)},3e3)}},this.dataset.eventsList[f.getUniqueMsgKey("error")]=function(){a.hide()},this.dataset.eventsList[f.getUniqueMsgKey("vidChange")]=function(){a.dataset.isPlayed=null},e.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)})}},Txplayer.register("UiLoading",d)},168:function(a,b){a.exports='<txpdiv  class="txp_overlay_loading">\r\n  <txpdiv class="txp_text <%=hide%>" data-role="<%=continuePlay%>"></txpdiv>\r\n  <txpdiv class="txp_icon_loading <%=hide%>" data-role="<%=loading%>"></txpdiv>\r\n</txpdiv>'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(169)},169:function(a,b,c){function d(a){e=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util,g=c(170),h=c(171);d.prototype={init:function(){this.write(),this.addEventListerner()},write:function(){var a={loading:"txp-ui-loading-with-ad",speed:"txp-ui-loading-with-ad-speed",canvas:"txp-ui-loading-with-ad-canvas",loadingImg:"txp-ui-loading-with-ad-image",hide:Txplayer.dataset.hideClass},b=e.tmpl(g,a);this.context.dataset.$playermod.append(b),this.dataset.$loading=this.context.dataset.$playermod.find('[data-role="'+a.loading+'"]'),this.context.dataset.$loading=this.dataset.$loading,this.dataset.$speed=this.context.dataset.$playermod.find('[data-role="'+a.speed+'"]'),this.dataset.$canvas=this.context.dataset.$playermod.find('[data-role="'+a.canvas+'"]'),this.dataset.$loadingImg=this.context.dataset.$playermod.find('[data-role="'+a.loadingImg+'"]'),this.loadCanvas()},remove:function(){this.dataset.$loading.remove()},updateLoadingImage:function(){this.dataset.loadingImageAdUrl?this.dataset.$loadingImg.attr("src",this.dataset.loadingImageAdUrl).css("opacity",0).show().animate({opacity:"1"},300):this.dataset.$loadingImg.removeAttr("src").hide()},loadCanvas:function(){var a=this,b=function(){a.context.dataset.isImgAdLoadingShowing&&(window.fanvas.play(a.dataset.$canvas.get(0),h,{cache:!1,autoPlay:!0}),a.dataset.fanvasIsPlayed=!0)};return window.fanvas?void b():void f.loadScript({url:"//vm.gtimg.cn/tencentvideo/txp/js/fanvas.js",onsuccess:b})},fanvasPlayOrPause:function(a){this.dataset.$canvas&&this.dataset.$canvas.get(0)&&window.fanvas&&window.fanvas[a]&&("replay"!=a||this.dataset.fanvasIsPlayed?window.fanvas[a](this.dataset.$canvas.get(0)):(this.dataset.fanvasIsPlayed=!0,window.fanvas.play(this.dataset.$canvas.get(0),h,{cache:!1,autoPlay:!0})))},getSpeedStart:function(){if(!this.dataset.timer){var a=this;this.dataset.timer=setInterval(function(){var b=a.context.dataset.videoDownloadSpeed||0;b<=0||a.dataset.$speed.html(f.formatDownloadSpeed(b))},200)}},getSpeedStop:function(){this.dataset.timer&&(clearInterval(this.dataset.timer),this.dataset.timer=null)},isNeedShowLoading:function(){if(1==this.context.dataset.playState||0==this.context.dataset.playState||2==this.context.dataset.playState)return!1;var a=this.context.msg.getData("checkTimeisInBufferdRange",this.context.dataset.videoCurrentTime);if(!a)return!0},hide:function(){this.dataset.showTimer&&(clearTimeout(this.dataset.showTimer),this.dataset.showTimer=null),this.context.dataset.isImgAdLoadingShowing&&(this.context.dataset.disableCalcDownloadSpeed=!0,this.dataset.$loading.addClass(Txplayer.dataset.hideClass),this.dataset.$speed.html(""),this.getSpeedStop(),this.context.dataset.isImgAdLoadingShowing=!1,this.dataset.loadingImageAdUrl=null,this.updateLoadingImage(),this.fanvasPlayOrPause("pause"))},show:function(){if(!this.context.dataset.isImgAdLoadingShowing&&!this.dataset.isPlayed&&!this.dataset.showTimer){var a=this;this.dataset.showTimer=setTimeout(function(){a.dataset.showTimer=null,a.isNeedShowLoading()&&(f.v4log("showLoadingWithad"),a.context.dataset.disableCalcDownloadSpeed=!1,a.dataset.$loading.removeClass(Txplayer.dataset.hideClass),a.getSpeedStart(),a.updateLoadingImage(),a.context.dataset.isImgAdLoadingShowing=!0,a.fanvasPlayOrPause("replay"))},50)}},addEventListerner:function(){var a=this;this.dataset.eventsList={},this.dataset.eventsList[f.getUniqueMsgKey("videoPlaying")]=function(){a.dataset.isPlayed=!0,a.hide()},this.dataset.eventsList[f.getUniqueMsgKey("isPlayingAdStatusChange")]=function(b){b&&(a.dataset.isPlayed=!0,a.hide())},this.dataset.eventsList[f.getUniqueMsgKey("hlsStartPlay")]=function(){a.dataset.isPlayed||a.show()},this.dataset.eventsList[f.getUniqueMsgKey("videoPlay")]=function(){a.show()},this.dataset.eventsList[f.getUniqueMsgKey("userPlayPlayer")]=function(){a.show()},this.dataset.eventsList[f.getUniqueMsgKey("beforeVideoPlay")]=function(){a.show()},this.dataset.eventsList[f.getUniqueMsgKey("error")]=function(){a.hide()},this.dataset.eventsList[f.getUniqueMsgKey("showUIVipGuide")]=function(){a.hide()},this.dataset.eventsList[f.getUniqueMsgKey("vidChange")]=function(){a.reset()},this.dataset.eventsList[f.getUniqueMsgKey("loadingImageAdPreloadError")]=function(){a.updateLoadingImage()},this.dataset.eventsList[f.getUniqueMsgKey("loadingImageAdUrlReady")]=function(b){if(a.context.dataset.isImgAdLoadingShowing&&b&&b.url){a.context.msg.broadcast("adPluginMsg",{name:"reportAd",adtype:"PVL",params:a.context.dataset.loadingImageAdData||{}}),a.dataset.loadingImageAdUrl=b.url;var c=new Image;c.onerror=function(){a.dataset.loadingImageAdUrl=null,a.context.msg.broadcast("loadingImageAdPreloadError")},c.src=a.dataset.loadingImageAdUrl,a.updateLoadingImage()}},e.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)})},reset:function(){this.context.dataset.disableCalcDownloadSpeed=!0,this.dataset.isPlayed=null}},Txplayer.register("UiLoadingWithAD",d)},170:function(a,b){a.exports='<txpdiv data-role="<%=loading%>" class="txp_overlay_loading <%=hide%>">\r\n  <txpdiv class="txp_overlay_loading_content">\r\n    <img data-role="<%=loadingImg%>" width="200" class="txp_overlay_loading_ad">\r\n    <img class="txp_overlay_loading_slogan" src="//vm.gtimg.cn/tencentvideo/txp/style/img/slogan.png" width="165">\r\n    <txpdiv class="txp_overlay_loading_name">腾讯视频 v.qq.com</txpdiv>\r\n    <txpdiv data-role="<%=speed%>" class="txp_overlay_loading_speed"></txpdiv>\r\n    <txpdiv  class="txp_overlay_loading_canvas">\r\n      <canvas data-role="<%=canvas%>" width="800" height="450"></canvas>\r\n    </txpdiv>\r\n  </txpdiv>\r\n</txpdiv>'},171:function(a,b){var c={frameRate:24,stageHeight:450,stageWidth:600,bgColor:null,definitionPool:[{frameActionList:[[0,["pE",{filters:[{blurY:95,quality:3,type:"BF",blurX:95}],n:"1-2",y:245,t:"MC",id:2,a:0,d:0,x:382.8}],["tE","1-2",4,{alpha:.23,y:229.3,scaleX:1.15,scaleY:1.15,x:377}],["pE",{filters:[{blurY:62,quality:3,type:"BF",blurX:62}],n:"3-4",y:270.7,t:"MC",id:4,a:0,d:1,x:207.3}],["pE",{n:"5-5",y:293,t:"MC",id:5,a:0,d:2,x:405}],["pE",{n:"7-6",y:259,t:"MC",id:6,a:0,d:3,x:193}],["pE",{filters:[{blurY:5,quality:1,type:"BF",blurX:5}],n:"9-7",y:270.7,t:"MC",id:7,a:0,d:4,x:190.7}],["pE",{n:"11-9",y:313,t:"MC",id:9,a:0,d:5,x:257}],["pE",{filters:[{blurY:5,quality:1,type:"BF",blurX:5}],n:"13-10",y:322.6,t:"MC",id:10,sY:.81,a:0,d:6,sX:.81,x:287.6}],["pE",{filters:[{blurY:40,quality:3,type:"BF",blurX:40}],n:"15-11",y:285.6,t:"MC",id:11,sY:.92,a:0,d:7,sX:.92,x:229.2}],["pE",{filters:[{blurY:63,quality:3,type:"BF",blurX:63}],n:"17-12",y:269,t:"MC",id:12,a:0,d:8,x:363.1}]],[5,["pE",{filters:[{blurY:95,quality:3,type:"BF",blurX:95}],n:"1-2",y:225.4,sX:1.19,sY:1.19,a:.29,x:375.5}]],[6,["pE",{filters:[{blurY:95,quality:3,type:"BF",blurX:95}],n:"1-2",y:221.5,sX:1.23,sY:1.23,a:.36,x:374.1}],["tE","1-2",3,{alpha:.53,y:209.7,scaleX:1.34,scaleY:1.34,x:369.8}],["pE",{filters:[{blurY:62,quality:3,type:"BF",blurX:62}],n:"3-4",y:267.3,sX:1.03,sY:1.03,a:.09,x:205.5}]],[7,["pE",{filters:[{blurY:62,quality:3,type:"BF",blurX:62}],n:"3-4",y:263.9,sX:1.05,sY:1.05,a:.17,x:203.6}]],[8,["pE",{filters:[{blurY:62,quality:3,type:"BF",blurX:62}],n:"3-4",y:260.4,sX:1.08,sY:1.08,a:.26,x:201.8}]],[9,["pE",{filters:[{blurY:62,quality:3,type:"BF",blurX:62}],n:"3-4",y:257,sX:1.1,sY:1.1,a:.34,x:199.9}],["pE",{n:"5-5",y:324,a:0,x:423}],["tE","5-5",30,{alpha:.86,y:250.5,scaleX:1,scaleY:1,x:440.4}]],[10,["pE",{filters:[{blurY:95,quality:3,type:"BF",blurX:95}],n:"1-2",y:205.8,sX:1.38,sY:1.38,a:.59,x:368.3}],["pE",{filters:[{blurY:62,quality:3,type:"BF",blurX:62}],n:"3-4",y:253.6,sX:1.13,sY:1.13,a:.43,x:198.1}],["tE","3-4",2,{alpha:.6,y:246.7,scaleX:1.18,scaleY:1.18,x:194.4}]],[11,["pE",{filters:[{blurY:95,quality:3,type:"BF",blurX:95}],n:"1-2",y:202,sX:1.42,sY:1.42,a:.65,x:366.9}],["tE","1-2",2,{alpha:.55,y:196.9,scaleX:1.36,scaleY:1.36,x:369.9}]],[13,["pE",{filters:[{blurY:62,quality:3,type:"BF",blurX:62}],n:"3-4",y:243.3,sX:1.2,sY:1.2,a:.68,x:192.5}]],[14,["pE",{filters:[{blurY:95,quality:3,type:"BF",blurX:95}],n:"1-2",y:194.3,sX:1.32,sY:1.32,a:.5,x:371.4}],["tE","1-2",5,{alpha:.25,y:181.7,scaleX:1.16,scaleY:1.16,x:378.7}],["pE",{filters:[{blurY:62,quality:3,type:"BF",blurX:62}],n:"3-4",y:239.9,sX:1.23,sY:1.23,a:.77,x:190.7}]],[15,["pE",{filters:[{blurY:62,quality:3,type:"BF",blurX:62}],n:"3-4",y:236.4,sX:1.25,sY:1.25,a:.86,x:188.8}]],[16,["pE",{filters:[{blurY:62,quality:3,type:"BF",blurX:62}],n:"3-4",y:233,sX:1.28,sY:1.28,a:.94,x:187}],["tE","3-4",8,{alpha:.11,y:193.1,scaleX:1.28,scaleY:1.28,x:199.5}]],[20,["pE",{filters:[{blurY:95,quality:3,type:"BF",blurX:95}],n:"1-2",y:179.2,sX:1.13,sY:1.13,a:.2,x:380.2}],["pE",{n:"7-6",y:256.8,sX:1.01,sY:1.01,a:.04,x:192.6}],["tE","7-6",4,{alpha:.2,y:248,scaleX:1.04,scaleY:1.04,x:190.9}]],[21,["pE",{filters:[{blurY:95,quality:3,type:"BF",blurX:95}],n:"1-2",y:176.7,sX:1.1,sY:1.1,a:.15,x:381.6}]],[22,["pE",{filters:[{blurY:95,quality:3,type:"BF",blurX:95}],n:"1-2",y:174.2,sX:1.06,sY:1.06,a:.1,x:383.2}]],[23,["pE",{filters:[{blurY:95,quality:3,type:"BF",blurX:95}],n:"1-2",y:171.6,sX:1.03,sY:1.03,a:.05,x:384.7}]],[24,["pE",{filters:[{blurY:95,quality:3,type:"BF",blurX:95}],n:"1-2",y:169,a:0,x:386}]],[25,["pE",{filters:[{blurY:62,quality:3,type:"BF",blurX:62}],n:"3-4",y:188,sX:1.28,sY:1.28,a:0,x:201}],["pE",{n:"7-6",y:245.8,sX:1.05,sY:1.05,a:.25,x:190.4}]],[26,["pE",{n:"7-6",y:243.6,sX:1.06,sY:1.06,a:.29,x:190.1}],["tE","7-6",4,{alpha:.45,y:234.8,scaleX:1.1,scaleY:1.1,x:188.3}]],[31,["pE",{n:"7-6",y:232.5,sX:1.1,sY:1.1,a:.49,x:188}]],[32,["pE",{n:"7-6",y:230.4,sX:1.11,sY:1.11,a:.53,x:187.5}],["tE","7-6",4,{alpha:.7,y:221.5,scaleX:1.15,scaleY:1.15,x:185.8}]],[35,["pE",{n:"11-9",y:309.1,sX:1.02,sY:1.02,a:.04,x:257.8}],["tE","11-9",9,{alpha:.4,y:273.5,scaleX:1.21,scaleY:1.21,x:265.4}]],[37,["pE",{n:"7-6",y:219.3,sX:1.16,sY:1.16,a:.74,x:185.4}]],[38,["pE",{n:"7-6",y:217.1,sX:1.17,sY:1.17,a:.78,x:185}],["pE",{filters:[{blurY:5,quality:1,type:"BF",blurX:5}],n:"13-10",y:316.9,sX:.82,sY:.82,a:.04,x:286.9}],["tE","13-10",8,{alpha:.36,y:271.2,scaleX:.92,scaleY:.92,x:281.2}]],[39,["pE",{n:"7-6",y:214.9,sX:1.17,sY:1.17,a:.82,x:184.5}],["pE",{filters:[{blurY:5,quality:1,type:"BF",blurX:5}],n:"9-7",y:267.3,a:.02,x:189.3}],["tE","9-7",13,{alpha:.29,y:223.4,scaleX:1,scaleY:1,x:171.4}]],[40,["pE",{n:"5-5",y:248,a:.89,x:441}],["tE","5-5",30,{alpha:.03,y:192.9,scaleX:1,scaleY:1,x:423.6}],["pE",{n:"7-6",y:212.7,sX:1.18,sY:1.18,a:.86,x:184.2}],["pE",{filters:[{blurY:40,quality:3,type:"BF",blurX:40}],n:"15-11",y:310,sX:.92,sY:.92,a:0,x:229.2}]],[41,["pE",{n:"7-6",y:210.5,sX:1.19,sY:1.19,a:.9,x:183.7}],["pE",{filters:[{blurY:40,quality:3,type:"BF",blurX:40}],n:"15-11",y:306.4,sX:.95,sY:.95,a:.02,x:227.3}]],[42,["pE",{n:"7-6",y:208.3,sX:1.2,sY:1.2,a:.94,x:183.3}],["pE",{filters:[{blurY:40,quality:3,type:"BF",blurX:40}],n:"15-11",y:302.9,sX:.98,sY:.98,a:.04,x:225.2}]],[43,["pE",{n:"7-6",y:204.9,sX:1.19,sY:1.19,a:.9,x:183.7}],["pE",{filters:[{blurY:40,quality:3,type:"BF",blurX:40}],n:"15-11",y:299.2,sX:1.01,sY:1.01,a:.06,x:223.2}]],[44,["pE",{n:"7-6",y:201.6,sX:1.18,sY:1.18,a:.87,x:184}],["pE",{filters:[{blurY:40,quality:3,type:"BF",blurX:40}],n:"15-11",y:295.6,sX:1.04,sY:1.04,a:.08,x:221.2}],["tE","15-11",7,{alpha:.22,y:270.6,scaleX:1.26,scaleY:1.26,x:207.2}]],[45,["pE",{n:"7-6",y:198.3,sX:1.18,sY:1.18,a:.83,x:184.5}],["tE","7-6",11,{alpha:.41,y:161.6,scaleX:1.09,scaleY:1.09,x:188.8}],["pE",{n:"11-9",y:269.5,sX:1.24,sY:1.24,a:.44,x:266.2}],["tE","11-9",2,{alpha:.52,y:261.7,scaleX:1.28,scaleY:1.28,x:267.9}]],[47,["pE",{filters:[{blurY:5,quality:1,type:"BF",blurX:5}],n:"13-10",y:265.4,sX:.93,sY:.93,a:.4,x:280.4}]],[48,["pE",{n:"11-9",y:257.8,sX:1.3,sY:1.3,a:.56,x:268.8}],["pE",{filters:[{blurY:5,quality:1,type:"BF",blurX:5}],n:"13-10",y:259.8,sX:.94,sY:.94,a:.44,x:279.8}],["tE","13-10",2,{alpha:.52,y:248.3,scaleX:.97,scaleY:.97,x:278.3}],["pE",{filters:[{blurY:63,quality:3,type:"BF",blurX:63}],n:"17-12",y:267.1,sX:1.02,sY:1.02,a:.02,x:364}]],[49,["pE",{n:"11-9",y:254.4,sX:1.28,sY:1.28,a:.54,x:268.7}],["pE",{filters:[{blurY:63,quality:3,type:"BF",blurX:63}],n:"17-12",y:265,sX:1.04,sY:1.04,a:.04,x:364.8}]],[50,["pE",{n:"11-9",y:250.9,sX:1.25,sY:1.25,a:.51,x:268.5}],["pE",{filters:[{blurY:63,quality:3,type:"BF",blurX:63}],n:"17-12",y:263.1,sX:1.06,sY:1.06,a:.06,x:365.7}]],[51,["pE",{n:"11-9",y:247.5,sX:1.23,sY:1.23,a:.48,x:268.4}],["pE",{filters:[{blurY:5,quality:1,type:"BF",blurX:5}],n:"13-10",y:242.6,sX:.98,sY:.98,a:.56,x:277.6}],["tE","13-10",5,{alpha:.37,y:210.7,scaleX:.84,scaleY:.84,x:284.7}],["pE",{filters:[{blurY:63,quality:3,type:"BF",blurX:63}],n:"17-12",y:261.1,sX:1.08,sY:1.08,a:.08,x:366.6}]],[52,["pE",{n:"11-9",y:244,sX:1.21,sY:1.21,a:.46,x:268.3}],["tE","11-9",2,{alpha:.41,y:237.2,scaleX:1.16,scaleY:1.16,x:268.1}],["pE",{filters:[{blurY:40,quality:3,type:"BF",blurX:40}],n:"15-11",y:267,sX:1.29,sY:1.29,a:.24,x:205.3}],["pE",{filters:[{blurY:63,quality:3,type:"BF",blurX:63}],n:"17-12",y:259.2,sX:1.1,sY:1.1,a:.1,x:367.5}],["tE","17-12",8,{alpha:.26,y:243.4,scaleX:1.25,scaleY:1.25,x:374.5}]],[53,["pE",{filters:[{blurY:5,quality:1,type:"BF",blurX:5}],n:"9-7",y:220,a:.31,x:170}],["pE",{filters:[{blurY:40,quality:3,type:"BF",blurX:40}],n:"15-11",y:260.6,sX:1.34,sY:1.34,a:.21,x:206.9}],["tE","15-11",4,{alpha:.12,y:234.6,scaleX:1.57,scaleY:1.57,x:213.6}]],[54,["pE",{filters:[{blurY:5,quality:1,type:"BF",blurX:5}],n:"9-7",y:216.6,sX:.98,sY:.98,a:.29,x:171.5}]],[55,["pE",{filters:[{blurY:5,quality:1,type:"BF",blurX:5}],n:"9-7",y:213,sX:.96,sY:.96,a:.27,x:172.9}],["tE","9-7",13,{alpha:.02,y:167.5,scaleX:.71,scaleY:.71,x:191.8}],["pE",{n:"11-9",y:233.8,sX:1.14,sY:1.14,a:.39,x:268}],["tE","11-9",4,{alpha:.29,y:220.1,scaleX:1.05,scaleY:1.05,x:267.5}]],[57,["pE",{n:"7-6",y:158.3,sX:1.08,sY:1.08,a:.38,x:189.1}],["tE","7-6",2,{alpha:.3,y:151.7,scaleX:1.06,scaleY:1.06,x:189.9}],["pE",{filters:[{blurY:5,quality:1,type:"BF",blurX:5}],n:"13-10",y:204.3,sX:.81,sY:.81,a:.34,x:286.2}]],[58,["pE",{filters:[{blurY:5,quality:1,type:"BF",blurX:5}],n:"13-10",y:197.9,sX:.78,sY:.78,a:.3,x:287.5}],["tE","13-10",5,{alpha:.11,y:166,scaleX:.64,scaleY:.64,x:294.6}],["pE",{filters:[{blurY:40,quality:3,type:"BF",blurX:40}],n:"15-11",y:228,sX:1.62,sY:1.62,a:.09,x:215.3}]],[59,["pE",{filters:[{blurY:40,quality:3,type:"BF",blurX:40}],n:"15-11",y:221.6,sX:1.68,sY:1.68,a:.07,x:217}]],[60,["pE",{n:"7-6",y:148.3,sX:1.06,sY:1.06,a:.26,x:190.3}],["tE","7-6",4,{alpha:.11,y:135,scaleX:1.02,scaleY:1.02,x:191.9}],["pE",{n:"11-9",y:216.7,sX:1.02,sY:1.02,a:.27,x:267.4}],["pE",{filters:[{blurY:40,quality:3,type:"BF",blurX:40}],n:"15-11",y:215.1,sX:1.73,sY:1.73,a:.05,x:218.7}]],[61,["pE",{n:"11-9",y:213.2,sX:1,sY:1,a:.24,x:267.2}],["pE",{filters:[{blurY:40,quality:3,type:"BF",blurX:40}],n:"15-11",y:208.5,sX:1.79,sY:1.79,a:.02,x:220.3}],["pE",{filters:[{blurY:63,quality:3,type:"BF",blurX:63}],n:"17-12",y:241.4,sX:1.27,sY:1.27,a:.28,x:375.4}],["tE","17-12",9,{alpha:.03,y:197,scaleX:1.67,scaleY:1.67,x:358}]],[62,["pE",{n:"11-9",y:209.9,sX:.98,sY:.98,a:.22,x:267.1}],["tE","11-9",2,{alpha:.17,y:203,scaleX:.93,scaleY:.93,x:266.9}],["pE",{filters:[{blurY:40,quality:3,type:"BF",blurX:40}],n:"15-11",y:202,sX:1.84,sY:1.84,a:0,x:222}]],[64,["pE",{filters:[{blurY:5,quality:1,type:"BF",blurX:5}],n:"13-10",y:159.6,sX:.61,sY:.61,a:.07,x:296}]],[65,["pE",{n:"7-6",y:131.6,sX:1.02,sY:1.02,a:.07,x:192.3}],["pE",{n:"11-9",y:199.6,sX:.91,sY:.91,a:.14,x:266.7}],["tE","11-9",5,{alpha:.02,y:182.4,scaleX:.79,scaleY:.79,x:266.1}],["pE",{filters:[{blurY:5,quality:1,type:"BF",blurX:5}],n:"13-10",y:153.2,sX:.58,sY:.58,a:.04,x:297.4}]],[66,["pE",{n:"7-6",y:128.4,sX:1.01,sY:1.01,a:.04,x:192.7}],["pE",{filters:[{blurY:5,quality:1,type:"BF",blurX:5}],n:"13-10",y:146.9,sX:.55,sY:.55,a:0,x:298.8}]],[67,["pE",{n:"7-6",y:125,a:0,x:193}]],[69,["pE",{filters:[{blurY:5,quality:1,type:"BF",blurX:5}],n:"9-7",y:164,sX:.69,sY:.69,a:0,x:193.3}]],[71,["pE",{n:"5-5",y:191,a:0,x:423}],["pE",{n:"11-9",y:179,sX:.77,sY:.77,a:0,x:266}],["pE",{filters:[{blurY:63,quality:3,type:"BF",blurX:63}],n:"17-12",y:192,sX:1.71,sY:1.71,a:0,x:356}]]],totalFrames:72,rect:{x:190.7,y:245,height:100.3,width:273.5}},{graphics:[["f","#70DF00"],["p","ACKEVQg5AAgpgpQgogogAg5QAAg5AogpQApgoA5AAQA6gAAoAoQApApAAA5QAAA5gpAoQgoApg5AA"],["ef"]],rect:{x:0,y:0,height:27.7,width:27.7}},{frameActionList:[[0,["pE",{n:"1-1",t:"SH",id:1,sY:2.94,d:0,sX:2.94}]]],totalFrames:1,rect:{x:0,y:0,height:81.4,width:81.4}},{graphics:[["f","#FF920B"],["p","AAADrQAAhhBFhFQBFhEBiAAQBiAABFBFQBFBFAABiQAABihFBFQhFBFhhAAQhhAAhFhFQhEhFAAhh"],["ef"]],rect:{x:0,y:0,height:47,width:47}},{frameActionList:[[0,["pE",{n:"1-3",t:"SH",id:3,sY:1.04,d:0,sX:1.04}]]],totalFrames:1,rect:{x:0,y:0,height:49,width:49}},{frameActionList:[[0,["pE",{n:"1-1",t:"SH",id:1,sY:.38,d:0,sX:.38}]]],totalFrames:1,rect:{x:0,y:0,height:10.5,width:10.5}},{frameActionList:[[0,["pE",{n:"1-3",t:"SH",id:3,sY:.16,d:0,sX:.16}]]],totalFrames:1,rect:{x:0,y:0,height:7.5,width:7.5}},{frameActionList:[[0,["pE",{n:"1-1",t:"SH",d:0,id:1}]]],totalFrames:1,rect:{x:0,y:0,height:27.7,width:27.7}},{graphics:[["f","#44BFFB"],["p","AH4D8QAABphKBKQhKBKhoAAQhoAAhKhKQhJhKAAhoQAAhoBKhKQBKhJBpAAQBpAABKBKQBKBKAABp"],["ef"]],rect:{x:0,y:0,height:50.4,width:50.4}},{frameActionList:[[0,["pE",{n:"1-8",t:"SH",id:8,sY:.17,d:0,sX:.17}]]],totalFrames:1,rect:{x:0,y:0,height:8.5,width:8.5}},{frameActionList:[[0,["pE",{n:"1-3",t:"SH",id:3,sY:.6,d:0,sX:.6}]]],totalFrames:1,rect:{x:0,y:0,height:28,width:28}},{frameActionList:[[0,["pE",{n:"1-8",t:"SH",d:0,id:8}]]],totalFrames:1,rect:{x:0,y:0,height:50.4,width:50.4}},{frameActionList:[[0,["pE",{n:"1-3",t:"SH",d:0,id:3}]]],totalFrames:1,rect:{x:0,y:0,height:47,width:47}}]};a.exports=c}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(107)},107:function(a,b){function c(a){d=Txplayer.$,this.dataset={},this.context=a,this.init()}var d=Txplayer.$,e=(Txplayer.apiList,Txplayer.util);c.prototype={init:function(){this.dataset.maxHistoryPlayTimeList=50,this.dataset.useConnectionPlay=this.context.config.useConnectionPlay,this.context.dataset.historyDefinition=this.getHistoryDefinition(),this.context.config&&"v3"==this.context.config.version&&(this.dataset.adMuteHistory=this.getAdMuteHistory()),this.context.dataset.historyPlayTime=this.getHistoryPlayTime(),this.addEventListener()},savePlaytimeData:function(a){var b,c=e.getData(Txplayer.dataset.localStorageKey.historyPlayTime),d=this.context.dataset.vid,f=0;if(c)try{b=JSON.parse(c)}catch(g){b={}}else b={};if(!d)return void e.showError("savePlaytimeData Error","找不到vid");for(var h in b)f++;f>=this.dataset.maxHistoryPlayTimeList&&(b={}),b[d]=a,this.context.dataset.historyPlayTime=JSON.stringify(b),e.setData(Txplayer.dataset.localStorageKey.historyPlayTime,JSON.stringify(b))},getHistoryPlayTime:function(){var a,b=e.getData(Txplayer.dataset.localStorageKey.historyPlayTime),c=this.context.dataset.vid;if(c||(c=this.context.config.vid),b)try{a=JSON.parse(b)}catch(d){a={}}else a={};return c?a[c]:void e.showError("getHistoryPlayTime Error","找不到vid")},clearPlaytimeData:function(){var a,b=e.getData(Txplayer.dataset.localStorageKey.historyPlayTime),c=this.context.dataset.vid;if(b)try{a=JSON.parse(b)}catch(d){a={}}else a={};return c?(delete a[c],this.context.dataset.historyPlayTime=JSON.stringify(a),void e.setData(Txplayer.dataset.localStorageKey.historyPlayTime,JSON.stringify(a))):void e.showError("clearPlaytimeData Error","找不到vid")},saveDefinitionData:function(a){a&&(this.context.dataset.historyDefinition=a,e.setData(Txplayer.dataset.localStorageKey.historyDefinition,a))},getHistoryDefinition:function(){var a=e.getData(Txplayer.dataset.localStorageKey.historyDefinition);return"mp4"==a&&(a=""),a},saveAdMuteData:function(a){this.dataset.adMuteHistory=JSON.stringify(a),e.setData(Txplayer.dataset.localStorageKey.adMuteHistory,a)},getAdMuteHistory:function(){return this.dataset.adMuteHistory=e.getData(Txplayer.dataset.localStorageKey.adMuteHistory),e.getData(Txplayer.dataset.localStorageKey.adMuteHistory)},addEventListener:function(){var a=this;this.dataset.eventsList={},this.context.config&&"v3"==this.context.config.version&&(this.dataset.eventsList[e.getUniqueMsgKey("videoPlay")]=function(b){if(b&&"film"!==b.playListType){var c="true"===a.dataset.adMuteHistory;a.context.msg.broadcast("adMuteStateUpdate",{mute:c})}},this.dataset.eventsList[e.getUniqueMsgKey("adMuteChange")]=function(b){b&&b.hasOwnProperty("mute")&&a.saveAdMuteData(b.mute)}),this.dataset.eventsList[e.getUniqueMsgKey("videoTimeUpdate")]=function(b){if(b)if(b.currentTime&&parseInt(b.currentTime)%3===0)a.savePlaytimeData(parseInt(b.currentTime));else{if(b&&"film"!==b.playListType)return;if(b&&b.videoTag&&b.videoTag.currentTime&&parseInt(b.videoTag.currentTime)%3===0){var c=a.context.dataset.currentTime;a.savePlaytimeData(parseInt(c))}}},this.dataset.eventsList[e.getUniqueMsgKey("videoEnd")]=function(b){"film"===b.playListType&&(b.isAllEnd||b.isTheLastFilm)&&a.clearPlaytimeData()},this.dataset.eventsList[e.getUniqueMsgKey("definitionChange")]=function(b){a.saveDefinitionData(b)},d.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)})}},Txplayer.register("HdPlayerHistory",c)}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(99)},60:function(a,b,c){function d(a,b){f=Txplayer.$,this.context=a,this.gContext=b,this.dataset={}}var e=c(61),f=Txplayer.$,g=c(62),h=g.definitionMap,i=Txplayer.util,j=["83","80"];d.prototype={getDefinitionListFromData:function(a){var b=[],c=location.hostname;if(top!==window)try{c=top.location.hostname}catch(d){}if("o"===a.s&&a.fl&&a.fl.fi&&"array"===f.type(a.fl.fi)&&a.fl.fi.length&&a.fl.fi[0])for(var e=0,g=a.fl.fi.length;e<g;e++)a.fl.fi[e].name in h&&("fhd"==a.fl.fi[e].name&&"fhd"!=a.fl.fi[e].name||b.push({name:a.fl.fi[e].name,cname:a.fl.fi[e].cname,sl:a.fl.fi[e].sl,format:a.fl.fi[e].id,lmt:a.fl.fi[e].lmt,fs:a.fl.fi[e].fs,br:a.fl.fi[e].br}));return b},getHlsFromData:function(a){var b=[];return 3===a.dltype&&"o"===a.s&&a.vl&&a.vl.vi&&a.vl.vi.length&&a.vl.vi[0]&&a.vl.vi[0].ul&&a.vl.vi[0].ul.ui&&a.vl.vi[0].ul.ui.length&&f.each(a.vl.vi[0].ul.ui,function(a,c){c.url&&c.hls&&c.hls.pt&&b.push(c.url+c.hls.pt)}),b},checkGetInfoData:function(a){return!!a&&(a&&0!==a.em&&"o"!==a.s?85===a.em&&a.type===-3?-1:-2:1)},checkGetinfoRetCode:function(a){var b,c,d=0;return a&&a.s?"o"!==a.s?(d=a.em||50,c=a.exem):a.vl&&a.vl.vi&&f.isArray(a.vl.vi)&&0!==a.vl.cnt?b=a.vl.vi[0]:d=68:d=50,0!==d||5===b.fst&&f.isPlainObject(b.ul)&&f.isArray(b.ul.ui)&&0!==b.ul.ui.length?0===d&&2!==b.st&&(8!=b.st?d=62:(d=83,c=b.ch)):d=62,this.dataset.isQQMusicAuth&&83===d&&(c=-3),Txplayer.util.isQQBuLuoHost()&&(c=0),{exVal:c,iRetCode:d,vi:b}},getRequestUrl:function(a){a=a||{};var b,c={},d=["av.video.qq.com","bkvv.video.qq.com","h5vv.video.qq.com"],e=a.retryTimes?a.retryTimes-1:0;return Txplayer.util.mobile?c.domain="h5vv.video.qq.com":c.domain="vv.video.qq.com",a.retry&&(Txplayer.util.mobile?c.domain="bkh5vv.video.qq.com":c.domain=d[e]||d[0]),"getinfo"===c.type&&(i.browser.mqq||i.browser.wechat)&&"view.inews.qq.com"===location.hostname&&(c.domain="h5wx.video.qq.com"),!a.retry&&this.gContext&&this.gContext.dataset&&this.gContext.dataset.businessId&&(this.gContext.dataset.authext||this.gContext.dataset.authfrom)&&("11"==this.gContext.dataset.businessId||this.gContext.dataset.businessId>=200)&&(c.domain="sv.video.qq.com"),"http:"===location.protocol?c.protocol="http:":c.protocol="https:","getinfo"===a.type?c.path="/getinfo?":"getvinfo"===a.type?c.path="/getvinfo?":"getkey"===a.type&&(c.path="/getkey?"),b=c.protocol+"//"+c.domain+c.path,a.disableCallback||(b+="callback=?&"),b},getPcVideoMp4Url:function(a){function b(a,b){if(0===b)return a;var c=a.lastIndexOf("."),d=a.substr(0,c)+"."+b+a.substring(c);return d}function c(a){var b=a.indexOf("."),c=a.substr(b);return c}function d(a,b,c,d){for(var e=[],f={},g={},h=a.ui.length,j=0;j<h;j++)f=a.ui[j],g={},f.url&&(f.url&&f.url.indexOf(b+".flv")===-1&&f.url.indexOf(b+".mp4")===-1?g.url=f.url+c:g.url=f.url,f.vt&&(g.vt=parseInt(f.vt)),g.url.indexOf("sdtfrom")===-1&&(g.url.indexOf("?")>-1?g.url+="&sdtfrom="+i.gContext.dataset.sdtfrom:g.url+="?sdtfrom="+i.gContext.dataset.sdtfrom,g.url+="&guid="+i.gContext.dataset.guid),e.push(g));return e}var e,f,g,h,i=this,j=a.vl,k=j.vi,l=k[0],m=[],n=l.fn;if(3==a.dltype){e={},e.vid=l.lnk,e.width=parseInt(l.vw),e.height=parseInt(l.vh),e.bytesTotal=parseInt(l.fs),e.byteRate=l.br,e.filename=l.fn,f=l.fn,e.newFileName=f,e.fileNameSuffix=c(f);var o=i.getHlsFromData(a);e.urlArray=[],h=o.length;for(var p=0;p<h;p++)e.urlArray.push({url:o[p]});return e.vt=l.ul.ui[0].vt,e.duration=parseInt(l.td,10),m.push(e),m}if(h=l.cl.fc,!l.cl.ci&&l.fvkey&&l.fn&&l.ul&&l.ul.ui&&l.ul.ui.length)return e={},e.vid=l.lnk,e.width=parseInt(l.vw),e.height=parseInt(l.vh),e.bytesTotal=parseInt(l.fs),e.byteRate=l.br,e.filename=l.fn,f=l.fn,e.newFileName=f,e.fileNameSuffix=c(f),e.urlArray=d(l.ul,l.lnk,f,e.fileNameSuffix),e.vt=l.ul.ui[0].vt,e.duration=parseInt(l.td,10),m.push(e),m;if(l.cl.ci&&h===l.cl.ci.length){for(var q=0;q<h;q++)g=l.cl.ci[q],e={},e.vid=l.lnk,e.width=parseInt(l.vw),e.height=parseInt(l.vh),e.bytesTotal=parseInt(g.cs),e.duration=parseFloat(g.cd),e.byteRate=l.br,e.filename=l.fn,f=b(n,q+1),e.newFileName=f,e.fileNameSuffix=c(f),e.urlArray=d(l.ul,l.lnk,f,e.fileNameSuffix),e.vt=l.ul.ui[0].vt,m.push(e);return m}},requestGetinfo:function(a,b){b=b||{};var c={charge:0,defaultfmt:"auto",otype:"json",guid:this.gContext.dataset.guid,flowid:this.gContext.dataset.flowid,platform:this.gContext.dataset.platform,sdtfrom:this.gContext.dataset.sdtfrom,defnpayver:1,appVer:Txplayer.dataset.ver,host:window!=top?document.referrer:document.location.host,ehost:document.URL,sphttps:"https:"===location.protocol?1:0,_rnd:i.getTimeStampStr(),spwm:4};this.gContext.dataset.unid&&(c.unid=this.gContext.dataset.unid),this.gContext.dataset.authfrom&&(c.auth_from=this.gContext.dataset.authfrom),this.gContext.dataset.authext&&(c.auth_ext=this.gContext.dataset.authext);var d=f.extend(c,a);"auto"!=d.defn&&d.defn?d.defsrc=2:d.defsrc=1;var g=b.isRetry&&b.cgi?b.cgi:this.getRequestUrl({type:"getinfo"}),h=e.$xx(d.platform,d.vids||d.vid,d.sdtfrom,1,c._rnd);h&&h.u1&&h.u2&&h.c&&(d._qv_rmt=h.u1,d._qv_rmt2=h.u2,i.cookie.set("qv_als",h.c));var j=this,k=f.Deferred(),l=+new Date;this.dataset.videoFormat=d.defn,this.dataset.vid=d.vid;var m=arguments.callee;b.isEmRetry&&b.defer&&(k=b.defer),b.isRetry&&b.cgi&&(g=b.cgi),b.isRetry&&b.defer&&(k=b.defer),a.show1080p||(d.defnpayver=0),this.context.msg.broadcast("getinfoStart",{getinfoURL:g+"&"+f.param(d),time:+new Date});var n=function(a){var c=+new Date,e={endTime:c,startTime:l,getinfoURL:g+"&"+f.param(d),costTime:c-l};a&&"object"===f.type(a)?(e.err="error",e=f.extend(e,a)):a&&"string"===f.type(a)&&(e.err=a,"timeout"==a&&(e.code=600)),"string"===f.type(a)?"timeout"==a?e.errCode=Txplayer.errcode.getPlatformErrorCode("getinfo","neterror","03"):e.errCode=Txplayer.errcode.getPlatformErrorCode("getinfo","neterror","01"):a&&a.code&&(e.errCode=Txplayer.errcode.getPlatformErrorCode("getinfo","cgiInnerError",a.code)),b&&b.isRetry&&b.retryTimes>=3&&(e.isLastRetry=1),e.errCode&&e.exem&&(e.errCode+="."+e.exem),j.context.msg.broadcast("getinfoFinish",e)},o=function(a){a=a||{},"444"==a.code?a.timeout?a.errCode=Txplayer.errcode.getPlatformErrorCode("getinfo","neterror","03"):a.errCode=Txplayer.errcode.getPlatformErrorCode("getinfo","neterror","01"):a.code?a.errCode=Txplayer.errcode.getPlatformErrorCode("getinfo","cgiInnerError",a.code):a.errCode=Txplayer.errcode.getPlatformErrorCode("getinfo","cgiInnerError","04"),a.errCode&&a.exem&&(a.errCode+="."+a.exem),k.reject(a)};delete d.cgi;var p=f.jsonp({url:g,data:d,timeout:6e3,callback:Txplayer.util.getJsonpCallbackName("getinfo")}).done(function(c){var e,g,h,l=j.checkGetInfoData(c),p={};if(1===l){if(e=j.checkGetinfoRetCode(c),83===e.iRetCode)i.showInfo("付费信息","当前视频需要付费观看,vid="+d.vids);else if(0!==e.iRetCode)return Txplayer.util.error(e.iRetCode),void o(c);c.iRetCode=e.iRetCode;try{j.gContext.dataset.reportClip=e.vi.fc||e.vi.cl.fc,j.gContext.dataset.reportStatus=e.vi.vst,j.gContext.dataset.reportType=e.vi.type,j.gContext.dataset.reportTestId=c.tstid,j.gContext.dataset.reportUsrIP=c.ip,j.gContext.dataset.cdnID=e.vi.ul.ui[0].vt}catch(q){}1==c.dltype?(g=j.getPcVideoMp4Url(c),"array"===f.type(g)&&g.length&&(h=g[0].urlArray[0].url+"&vkey="+e.vi.fvkey+"&platform=2"),j.dataset.sectionsData=g,j.dataset.firstSectionUrl=h,j.dataset.getinfoData=c,j.dataset.definitionList=j.getDefinitionListFromData(c),k.resolve(h,g,j.dataset.definitionList,c),j.context.msg.broadcast("reportGetinfo",{filename:e.vi.fn,cdnIp:Txplayer.util.getHostNameByUrl(e.vi.ul.ui[0].url),cdnId:e.vi.ul.ui[0].vt,vkey:e.vi.fvkey}),n(null)):3==c.dltype&&(g=j.getPcVideoMp4Url(c),"array"===f.type(g)&&g.length&&g[0]&&g[0].urlArray&&g[0].urlArray[0]&&g[0].urlArray[0].url&&(h=g[0].urlArray[0].url),j.dataset.sectionsData=g,j.dataset.firstSectionUrl=h,j.dataset.getinfoData=c,j.dataset.definitionList=j.getDefinitionListFromData(c),k.resolve(h,g,j.dataset.definitionList,c),j.context.msg.broadcast("reportGetinfo",{filename:e.vi.fn,cdnIp:Txplayer.util.getHostNameByUrl(e.vi.ul.ui[0].url),cdnId:e.vi.ul.ui[0].vt}),n(null))}else{p={exem:c.exem,code:c.em},n(p);var r;b.isEmRetry?o(p):(r={defer:k,isEmRetry:!0},85==c.em&&c.exem==-3&&c.curTime?j.getRetryCkey(c.curTime,j.dataset.vid).done(function(b){f.extend(a,b.param),m.call(j,a,r)}).fail(function(){m.call(j,a,r)}):m.call(j,a,r))}}).fail(function(c,d){if(!d||"abort"!==d){n(d);var e;b&&b.retryTimes&&b.retryTimes>=3?o({code:444,timeout:"timeout"===d,costTime:+new Date-l}):(b.hasOwnProperty("retryTimes")?b.retryTimes++:b.retryTimes=1,e={defer:k,isRetry:!0,retryTimes:b.retryTimes,cgi:j.getRequestUrl({type:"getinfo",retry:!0,retryTimes:b.retryTimes})},m.call(j,a,e))}});return this.context.msg.off("vidChange.requestGetinfo").on("vidChange.requestGetinfo",function(){p&&p.abort&&p.abort()}),this.context.msg.off("seekStart.requestGetinfo").on("seekStart.requestGetinfo",function(){p&&p.abort&&p.abort()}),this.context.msg.off("userStopVideo.requestGetinfo").on("userStopVideo.requestGetinfo",function(){p&&p.abort&&p.abort()}),k},getHDVideoVkey:function(a){function b(a){for(var b=0,c=a.length;b<c;b++)if(1==a[b].sl)return a[b].id;return-1}var c=this,d=f.Deferred(),g=this.getRequestUrl({type:"getkey"}),h={otype:"json",vid:a.vid,format:b(this.dataset.getinfoData.fl.fi),filename:a.newFileName,platform:this.gContext.dataset.platform,appVer:Txplayer.dataset.ver,vt:a.vt,sdtfrom:this.gContext.dataset.sdtfrom,guid:this.gContext.dataset.guid,flowid:this.gContext.dataset.flowid,linkver:2,lnk:this.gContext.dataset.getinfoJSON.vl.vi[0].lnk,charge:a.isNeedPay?1:0,_rnd:i.getTimeStampStr()};this.gContext.dataset.unid&&(h.unid=this.gContext.dataset.unid),this.gContext.dataset.authfrom&&(h.auth_from=this.gContext.dataset.authfrom),this.gContext.dataset.authext&&(h.auth_ext=this.gContext.dataset.authext);var k=e.$xx(h.platform,h.vid||h.vids,h.sdtfrom,1,h._rnd);k&&k.u1&&k.u2&&k.c&&(h._qv_rmt=k.u1,h._qv_rmt2=k.u2,i.cookie.set("qv_als",k.c));var l,m=function(){return r>c.gContext.config.keyRetryTimes},n=+new Date,o=function(a){var b=+new Date,d={endTime:b,startTime:n,getkeyURL:g+"&"+f.param(h),costTime:b-n,isLastRetry:m()};a&&"object"===f.type(a)?(d.err="error",d=f.extend(d,a),a.em&&(d.code=a.em)):a&&"string"===f.type(a)&&(d.err=a,"timeout"==a&&(d.code=600)),d.errCode=p(a),c.context.msg.broadcast("getkeyFinish",d)},p=function(a){a=a||{},!a.err&&a.em&&(a.err="error"),!a.code&&a.em&&(a.code=a.em);var b="";return"error"===a?b=Txplayer.errcode.getPlatformErrorCode("getkey","neterror","01"):"timeout"===a?b=Txplayer.errcode.getPlatformErrorCode("getkey","neterror","03"):a.errCode?b=a.errCode:"timeout"===a.err?b=Txplayer.errcode.getPlatformErrorCode("getkey","neterror","03"):"no key"===a.err?b=Txplayer.errcode.getPlatformErrorCode("getkey","neterror","04"):a.err&&!a.hasOwnProperty("code")?b=Txplayer.errcode.getPlatformErrorCode("getkey","neterror","01"):a.err&&a.hasOwnProperty("code")&&(b=Txplayer.errcode.getPlatformErrorCode("getkey","cgiInnerError",a.code+"")),b&&a.exem&&(b+="."+a.exem),b},q=function(a){return a=a||{},a.code=a.code||a.em,delete a.em,"445"==a.code?a.timeout?a.errCode=Txplayer.errcode.getPlatformErrorCode("getkey","neterror","03"):a.errCode=Txplayer.errcode.getPlatformErrorCode("getkey","neterror","01"):!a||f.isEmptyObject(a)||a.code||a.key?a.errCode=Txplayer.errcode.getPlatformErrorCode("getkey","cgiInnerError",a.code||""):a.errCode=Txplayer.errcode.getPlatformErrorCode("getkey","neterror","04"),a.errCode&&a.exem&&(a.errCode+="."+a.exem),a&&a.code&&f.inArray(a.code+"",j)>-1?void d.reject(a||{}):m()?(a.code||(a.code=445),void d.reject(a)):(r++,c.context.msg.broadcast("getkeyStart"),void(l=f.jsonp({url:a.url||g,data:h,timeout:6e3,callback:Txplayer.util.getJsonpCallbackName("getkey")}).done(function(b){b&&b.key?(d.resolve(b.key),o(null)):(b.code||(b.code=a.em),a.em&&!b.key&&(b.err="no key"),o(b),q(b))}).fail(function(a,b){b&&"abort"===b||(o(b),q({code:445,url:c.getRequestUrl({type:"getkey",retry:!0,retryTimes:r}),timeout:"timeout"===b}))})))},r=0;return q(),this.context.msg.off("vidChange.getHDVideoVkey").on("vidChange.getHDVideoVkey",function(){l&&l.abort&&l.abort()}),this.context.msg.off("userStopVideo.getHDVideoVkey").on("userStopVideo.getHDVideoVkey",function(){l&&l.abort&&l.abort()}),d},getStaticVideoInfo:function(a){var b,c=f.Deferred(),d={otype:"json",vid:a.vid,platform:"11001",h5flag:1};(i.browser.mqq||i.browser.wechat)&&"view.inews.qq.com"===location.hostname?(d.platform="20701",b="http://h5wx.video.qq.com/getextinfo?callback=?&","https:"===location.protocol&&(b="https://h5wx.video.qq.com/getextinfo?callback=?&")):(b="http://h5vv.video.qq.com/getextinfo?callback=?&","https:"===location.protocol&&(b="https://h5vv.video.qq.com/getextinfo?callback=?&"));var e=this.context.msg.getData("isInAuthRuleList");e&&(d.haskey=1);var g,h=function(){return g=f.ajax({url:b,data:d,dataType:"jsonp",jsonpCallback:Txplayer.util.getJsonpCallbackName("getextinfo")}).done(function(a){a?c.resolve(a):c.reject()}).fail(function(){c.reject()}),c};return this.context.msg.off("vidChange.getStaticVideoInfo").on("vidChange.getStaticVideoInfo",function(){g&&g.abort&&g.abort()}),h()},getRetryCkey:function(a,b){var c,d,e=f.Deferred(),g=function(){var c,d,f={vid:b,timestamp:a};i.os.ios?(c=window.x5.ios.getBrowserSignature,d=i.os.ipad?f:"vid:"+f.vid+"["+f.timestamp+"]"):(c=window.x5.android.getBrowserSignature,d="vid:"+f.vid+"["+f.timestamp+"]"),c(d,function(b){var c;"object"==typeof b&&b.key&&b.ver&&b.platform?(c={param:{cKey:b.key,encryptVer:b.ver,platform:b.platform,_rnd:a}},e.resolve(c)):"object"==typeof b&&b.data?(c={param:{cKey:b.data,encryptVer:"4.0",platform:"161001",_rnd:a}},e.resolve(c)):"string"==typeof b?(c={param:{cKey:b,encryptVer:"4.0",platform:"161001",_rnd:a}},e.resolve(c)):e.reject()},function(){e.reject()})};return c=window.x5&&window.x5.ios&&"function"===f.type(window.x5.ios.getBrowserSignature),d=window.x5&&"function"===f.type(window.x5.getBrowserSignature),c||d?g():e.reject(),e}},a.exports=d},61:function(a,b){var c={};c.ha=function(a){function b(a,b){return((a>>1)+(b>>1)<<1)+(1&a)+(1&b)}for(var c=[],d=0;d<64;)c[d]=0|4294967296*Math.abs(Math.sin(++d));var e=function(d){for(var e,f,g,h,i=[],j=window.unescape(encodeURI(d)),k=j.length,l=[e=1732584193,f=-271733879,~e,~f],m=0;m<=k;)i[m>>2]|=(j.charCodeAt(m)||128)<<8*(m++%4);for(i[d=(k+8>>6)*a+14]=8*k,m=0;m<d;m+=a){for(k=l,h=0;h<64;)k=[g=k[3],b(e=k[1],(g=b(b(k[0],[e&(f=k[2])|~e&g,g&e|~g&f,e^f^g,f^(e|~g)][k=h>>4]),b(c[h],i[[h,5*h+1,3*h+5,7*h][k]%a+m])))<<(k=[7,12,17,22,5,9,14,20,4,11,a,23,6,10,15,21][4*k+h++%4])|g>>>32-k),e,f];for(h=4;h;)l[--h]=b(l[h],k[h])}for(d="";h<32;)d+=(l[h>>3]>>4*(1^7&h++)&15).toString(a);return d};return e}(16),c.stringToHex=function(a){for(var b="",c=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),d=0;d<a.length;d++)b+=c[a.charCodeAt(d)>>4]+c[15&a.charCodeAt(d)];return b},c.hexToString=function(a){for(var b="",c="0x"==a.substr(0,2)?2:0;c<a.length;c+=2)b+=String.fromCharCode(parseInt(a.substr(c,2),16));return b},c._Seed="#$#@#*ad",c.tempcalc=function(a,b){for(var c="",d=0;d<a.length;d++)c+=String.fromCharCode(a.charCodeAt(d)^b.charCodeAt(d%4));return c},c.u1=function(a,b){for(var c="",d=b;d<a.length;d+=2)c+=a.charAt(d);return c},c._urlStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c.urlenc=function(a,b,d){for(var e,f,g,h,i,j,k,l="",m=0;m<a.length;)e=a.charCodeAt(m++),f=a.charCodeAt(m++),g=a.charCodeAt(m++),15==m&&(l+="A",l+=b,l+=d),h=e>>2,i=(3&e)<<4|f>>4,j=(15&f)<<2|g>>6,k=63&g,isNaN(f)?j=k=64:isNaN(g)&&(k=64),l=l+c._urlStr.charAt(h)+c._urlStr.charAt(i)+c._urlStr.charAt(j)+c._urlStr.charAt(k);return l},c.$xx=function(a,b,d,e,f){f=f||parseInt(+new Date/1e3),e=(""+e).charAt(0);var g="",h="",i={plt:a||"",vid:b||"",std:d||"",sts:e||"",ts:f,rf:g,ua:h};i=window.JSON?JSON.stringify(i):function(){var a=[];for(var b in i)a.push('"'+b+'":"'+i[b]+'"');return"{"+a.join(",")+"}"}(i);var j=c.hexToString(c.ha(a+b+f+c._Seed+g+h+e.charAt(0)+d)),k=c.urlenc(c.tempcalc(j,c._Seed),e.charAt(0),f),l=c.urlenc(c.tempcalc(j,"86FG@hdf"),e.charAt(0),f),m=c.u1(k,0),n=c.u1(k,1);return{p:i,u:k,c:l,u1:m,u2:n,t:f}},a.exports=c},62:function(a,b){var c={unstarted:-1,ended:0,playing:1,paused:2,buffering:3,cued:4,stop:5},d={msd:"流畅180P",sd:"标清270P",hd:"高清480P",shd:"超清720P",fhd:"蓝光1080P"};a.exports={playerstate:c,definitionMap:d}},63:function(a,b){function c(a){var b={getinfo:["http://h5vv.video.qq.com/getinfo?callback=?","https://h5vv.video.qq.com/getinfo?callback=?"],edugetvinfo:["http://sv.video.qq.com/edugetvinfo?callback=?","https://sv.video.qq.com/edugetvinfo?callback=?"],mvgetinfo:["http://sv.video.qq.com/mvgetinfo?callback=?","https://sv.video.qq.com/mvgetinfo?callback=?"],getinfoInews:["http://h5wx.video.qq.com/getinfo?callback=?","https://h5wx.video.qq.com/getinfo?callback=?"],getvinfo:["http://h5vv.video.qq.com/getvinfo?callback=?","https://h5vv.video.qq.com/getvinfo?callback=?"],getkey:["http://h5vv.video.qq.com/getkey?callback=?","https://h5vv.video.qq.com/getkey?callback=?"],mvgetkey:["http://sv.video.qq.com/mvgetkey?callback=?","https://sv.video.qq.com/mvgetkey?callback=?"],getkeyInews:["http://h5wx.video.qq.com/getkey?callback=?","https://h5wx.video.qq.com/getkey?callback=?"],zb:["http://info.zb.video.qq.com/?callback=?","https://info.zb.video.qq.com/?callback=?"],rmd_mobile:["http://like.video.qq.com/fcgi-bin/rmd_mobile?callback=?","https://like.video.qq.com/fcgi-bin/rmd_mobile?callback=?"],like:["http://like.video.qq.com/fcgi-bin/like?","https://like.video.qq.com/fcgi-bin/like?"],dataout_ex:["http://sns.video.qq.com/fcgi-bin/dlib/dataout_ex?","https://sns.video.qq.com/fcgi-bin/dlib/dataout_ex?"],get_dtype:["http://h5vv.video.qq.com/getdtype?","https://h5vv.video.qq.com/getdtype?"]};return"https:"===window.location.protocol?b[a][1]:b[a][0]}function d(a){return e=Txplayer.$,this.context=a.context,this.init()}var e=Txplayer.$,f=Txplayer.util,g=f.AppHelper,h=[{reg:function(){return!!this.cfg.noAuth},request:function(a){var b=this;a.resolve({param:{vids:b.cfg.vid,defaultfmt:b.cfg.fmt}})}},{reg:function(){return!(!this.cfg.eduext&&!this.cfg.authext)},request:function(a){var b=this;a.resolve({cgi:c("edugetvinfo"),param:{eduext:b.cfg.eduext,platform:f.mobile?"261001":"260201",vid:b.cfg.vid,defn:b.cfg.fmt}})}},{reg:function(){return 1===this.cfg.classType},request:function(a){var b=this;a.resolve({cgi:c("edugetvinfo"),param:{platform:221001,vid:b.cfg.vid,defn:b.cfg.fmt}})}},{reg:function(){if(window!==top&&"v.qq.com"===location.hostname&&"/iframe/player.html"===location.pathname){var a=f.getParams(location.href);if(a&&a.cKey&&a.encryptVer&&a.platform)return this.params=a,!0}return!1},request:function(a){var b,d=this,e={cgi:c("getinfo"),param:{encryptVer:d.params.encryptVer,platform:d.params.platform,cKey:d.params.cKey,vids:d.cfg.vid,defaultfmt:d.cfg.fmt}};try{b=window.parent.location.href}catch(f){}b&&(e.param.wxrefer=b),a.resolve(e)}},{reg:function(){return!(!f.browser.mqq||"xiaoqu.qq.com"!==window.location.hostname&&"buluo.qq.com"!==window.location.hostname)},request:function(a){if(!window.getBrowserSignature)return void a.reject();var b=this;window.getBrowserSignature(b.cfg.vid,function(c){var d;if(c&&c.data)try{var e=JSON.parse(c.data);e&&e.result&&e.result.token&&(d=e.result.token)}catch(g){}d?a.resolve({param:{cKey:d,encryptVer:"6.4",platform:f.os.ios?"170408":"170308",vids:b.cfg.vid,defaultfmt:b.cfg.fmt}}):a.reject()})}},{reg:function(){return!(!f.browser.mqqbrowser||f.browser.mqq||f.browser.wechat||f.browser.qqdownloader||window!==top)},request:function(a){var b,d,h=this,i="undefined"!=typeof h.cfg.svr_time?h.cfg.svr_time+"":parseInt(+new Date/1e3)+"",j=function(){var b,d,e={vid:h.cfg.vid};e.timestamp=i,f.os.ios?(b=window.x5.ios.getBrowserSignature,d=f.os.ipad?e:"vid:"+e.vid+"["+e.timestamp+"]"):(b=window.x5.android.getBrowserSignature,d="vid:"+e.vid+"["+e.timestamp+"]"),b(d,function(b){var d;"object"==typeof b&&b.key&&b.ver&&b.platform?(d={cgi:c("getvinfo"),param:{cKey:b.key,encryptVer:b.ver,platform:b.platform,vid:h.cfg.vid,defn:h.cfg.fmt}},a.resolve(d)):"object"==typeof b&&b.data?(d={cgi:c("getvinfo"),param:{cKey:b.data,encryptVer:"4.0",platform:"161001",vid:h.cfg.vid,defn:h.cfg.fmt}},a.resolve(d)):"string"==typeof b?(d={cgi:c("getvinfo"),param:{cKey:b,encryptVer:"4.0",platform:"161001",vid:h.cfg.vid,defn:h.cfg.fmt}},a.resolve(d)):a.reject()},function(){a.reject()})};b=window.x5&&window.x5.ios&&"function"===e.type(window.x5.ios.getBrowserSignature),d=window.x5&&"function"===e.type(window.x5.getBrowserSignature),b||d?j():g.loadMqqBrowserAPI().done(function(){b=window.x5&&window.x5.ios&&"function"===e.type(window.x5.ios.getBrowserSignature),d=window.x5&&"function"===e.type(window.x5.getBrowserSignature),b||d?j():a.reject()}).fail(function(){a.reject()})}},{reg:function(){return!(!f.browser.qqnews&&!f.browser.kuaibao)},request:function(a){var b,c,d,e=this,g=e.cfg.vid,h="undefined"!=typeof e.cfg.svr_time?e.cfg.svr_time+"":parseInt(+new Date/1e3)+"",i="TVP_KUAIBAO_CB_"+h.substr(-4,4);if(window.top!==window){try{var j=window.top.location.href;j&&(b=window.top,c=b.document)}catch(k){d=!0}if(d)return void a.reject()}else b=window,c=b.document;b[i]=function(b){var c;try{c=JSON.parse(b)}catch(d){}if(c&&c.key&&c.ver&&c.platform&&c.sdtfrom){var f={param:{cKey:c.key,encryptVer:c.ver,platform:c.platform,sdtfrom:c.sdtfrom,vid:e.cfg.vid,defaultfmt:"mp4",clip:4}};a.resolve(f)}else a.reject()};var l=function(){var a={method:"getCKey",types:["string","string","string"],args:[g,h,i],instanceName:"TencentNewsScriptControllerJsInterface"},b="jsbridge://get_with_json_data?json="+encodeURIComponent(JSON.stringify(a))+"&_t="+h,c=new Image;c.src=b},m=function(){var a=function(){b.getBrowserSignature(g,h,i)};"function"==typeof b.getBrowserSignature?(a(),c.addEventListener("TencentNewsJSInjectionComplete",function(){a()})):c.addEventListener("TencentNewsJSInjectionComplete",function(){a()})};f.os.ios?m():f.os.android?l():a.reject()}},{reg:function(){return!(!f.browser.douban&&!f.browser.liebao)},request:function(a){var b,c=this,d="undefined"!=typeof c.cfg.svr_time?c.cfg.svr_time+"":parseInt(+new Date/1e3)+"",e=function(){if(!window.getBrowserSignature)return void a.reject();try{b=window.getBrowserSignature(c.cfg.vid,d)}catch(e){}if(b&&b.key&&b.ver&&b.platform){var f={param:{cKey:b.key,encryptVer:b.ver,platform:b.platform,vid:c.cfg.vid,defaultfmt:c.cfg.fmt}};a.resolve(f)}else a.reject()};e()}},{reg:function(){return!(!f.browser.mqq||"mqqcartoon"!==f.getUrlParam("openS"))},request:function(a){var b=this,d="undefined"!=typeof b.cfg.svr_time?b.cfg.svr_time+"":parseInt(+new Date/1e3)+"";e.getScript("http://imgcache.qq.com/club/client/comic/release/js/util/qqComicVideoAuth.js?t="+d,function(){"function"===e.type(window.getBrowserSignature)?window.getBrowserSignature(b.cfg.vid,function(d){if(d&&d!==-1){var e={cgi:c("getvinfo"),param:{cKey:d,encryptVer:"6.4",platform:"170101",vid:b.cfg.vid,defn:b.cfg.fmt}};a.resolve(e)}}):a.reject()})}},{reg:function(){return f.isNewsPlugin()},request:function(a){a.resolve({param:{platform:"20701"}})}}];d.prototype={init:function(){return this.exportsModuleApis(),this.reg_request},reg_request:function(a,b){var c=this;c.cfg=a,c.cfg2=b;var d=e.Deferred(),f=!1;return e(h).each(function(a,b){return"function"!==e.type(b.reg)||("function"!==e.type(b.request)||(!b.reg.call(c)||(f=!0,b.request.call(c,d),!1)))}),f||d.reject(),setTimeout(function(){d.reject()},6e3),d},exportsModuleApis:function(){var a=this;this.context.msg.setData("isInAuthRuleList",function(b,c){var d=!1;a.cfg={},a.cfg2={},e(h).each(function(b,c){return"function"!==e.type(c.reg)||(!c.reg.call(a)||(d=!0,!1))}),c.data=d})}},a.exports=d},99:function(a,b,c){function d(a){f=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=c(60),f=Txplayer.$,g=Txplayer.util,h=(c(100),c(63)),i=c(101);d.prototype={init:function(){var a=this;this.auth=new h({context:this.context}),this.getVideoMark=new i(this.context),this.context.dataset.connectionPlayType=0,this.dataset.hasVideoPlayed=!1,this.dataset.urlIndex=0,["vid","cid","columnId","title","nextVid","tpid","authext","eduext","authfrom","isNeedPay","autoplay","skipPrelude","connectionPlayTime","playStartTime"].forEach(function(b){a.context.dataset[b]=a.context.config[b]}),this.context.config.duration&&this.context.config.playEndTime&&(this.context.dataset.playEndTime=parseInt(this.context.config.duration)-this.context.config.playEndTime,this.context.dataset.playEndTime<0&&(this.context.dataset.playEndTime=null)),g.isSupportSafariHls()&&(this.context.dataset.useHls=!0),a.context.dataset.hasChromeHlsPlugin&&(this.context.dataset.useChromeHls=!0,this.context.dataset.useHls=!0),this.getinfo=new e({msg:this.context.msg},this.context),this.addEventListener(),this.exportsModuleApis(),this.context.dataset.autoplay&&this.play({nextVid:this.context.dataset.nextVid,vid:this.context.dataset.vid,connectionPlayTime:this.context.dataset.connectionPlayTime,playStartTime:this.context.dataset.playStartTime})},seekTo:function(a){function b(){h===i.index?n.context.msg.broadcast("setFocusVideoCurrentTime",{time:c-i.prevDurtion,autoplay:!0}):n.context.dataset.videoPreloadList[i.index]&&(d=n.context.dataset.videoPreloadList[i.index],d.autoplay=!0,d.currentTime=c-i.prevDurtion,d.updateIndex=i.index,n.context.msg.broadcast("setFocusVideoUrl",d),n.context.msg.broadcast("clearPreloadVideoUrl"))}if("object"===f.type(a)&&a.showTips&&(this.context.dataset.seekToSyncFlag=!0),!this.context.dataset.isPlayingAd){if(0===this.context.dataset.playState)return void g.showError("播放已结束，不能seek");if(this.context.dataset.playState===-1)return void g.showError("播放状态未初始化，不能seek","seekTo");var c,d,e,h,i,j,k,l,m,n=this,o=this.context.dataset.currentTime,p="object"!==f.type(a)||!a.hasOwnProperty("connectionPlayTime")&&!a.hasOwnProperty("playStartTime")&&!a.hasOwnProperty("historyTime")&&!a.hasOwnProperty("showTips")&&!a.hasOwnProperty("doNotReport");if(a&&"object"===f.type(a)&&(a.time&&"string"==typeof a.time&&/^\d+$/.test(a.time)&&(a.time=Number(a.time)),a.connectionPlayTime&&"string"==typeof a.connectionPlayTime&&/^\d+$/.test(a.connectionPlayTime)&&(a.connectionPlayTime=Number(a.connectionPlayTime)),a.playStartTime&&"string"==typeof a.playStartTime&&/^\d+$/.test(a.playStartTime)&&(a.playStartTime=Number(a.playStartTime))),"object"===f.type(a)?c="number"===f.type(a.time)?a.time:"number"===f.type(a.connectionPlayTime)?a.connectionPlayTime:"number"===f.type(a.playStartTime)?a.playStartTime:null:"number"===f.type(a)&&(c=a,a={}),"number"!==f.type(c))return void g.error("seekTo参数错: 参数必须为number("+c+")");if(c<0&&(c=0),"number"===f.type(c)&&c<=this.context.dataset.duration&&("number"!==f.type(this.context.dataset.canPlayTime)||c<=this.context.dataset.canPlayTime)&&this.updateCurrentTime(c,"seekTo"),e=this.context.dataset.duration,c>e)return void g.showError("seekTo参数错误: seekTime["+c+"]不能超过视频的时长["+e+"]","");"number"==f.type(this.context.dataset.canPlayTime)&&c>this.context.dataset.canPlayTime&&(c=this.context.dataset.canPlayTime),i=this.getVideoSeekToInfo(c),h=this.context.msg.getData("getPlayListIndex","film"),j=+new Date,m=this.context.msg.getData("checkTimeisInBufferdRange",c),this.context.msg.broadcast("seekStart",{type:"film",seekTime:c,seekIndex:i.index,seekStartTime:j,currentTimeWhenSeekStart:o,isUserAction:p,isSeekTimeInBuffer:m}),this.context.msg.off("videoSeeked.seekTo"),this.context.msg.once("videoSeeked.seekTo",function(){k=+new Date,l=n.context.dataset.currentTime,n.context.msg.broadcast("seekEnd",{seekStartTime:j,seekEndTime:k,seekTime:c,currentTimeWhenSeekStart:o,currentTimeWhenSeekEnd:l,isUserAction:p,isSeekTimeInBuffer:m}),Math.abs(c-l)>5&&(n.context.dataset.retrySeekTo=!0,b())}),this.pause(),b(),a.seekTime=c,n.context.msg.broadcast("showUiSeekTip",a),a.bulletid&&n.context.msg.broadcast("barrageSeekTime",{bulletid:a.bulletid,time:c})}},play:function(a){var b=this;if(this.context.dataset.canPlayTime&&this.context.dataset.currentTime>=this.context.dataset.canPlayTime&&("undefined"===f.type(a)||"string"===f.type(a)&&a===this.context.dataset.vid||"object"===f.type(a)&&!a.vid||"object"===f.type(a)&&a.vid===this.context.dataset.vid))return void this.showUIVipGuide("trial");var c=function(){return!!("string"===f.type(a)||"object"===f.type(a)&&a.vid)};if(this.context.dataset.isPlayingAd&&!c())return void this.context.msg.broadcast("play");if(1!==this.context.dataset.playState&&!this.context.dataset.isPlayingAd||!("string"===f.type(a)&&a===this.context.dataset.vid||"object"===f.type(a)&&a.vid===this.context.dataset.vid)){if("undefined"===f.type(a)||"object"===f.type(a)&&!a.vid){if(this.dataset.hasVideoPlayed)return void this.context.msg.broadcast("play");if(this.context.dataset.getinfoJSON&&this.context.dataset.getinfoJSON.vl&&this.context.dataset.getinfoJSON.vl.vi&&this.context.dataset.getinfoJSON.vl.vi.length&&this.context.dataset.getinfoJSON.vl.vi[0]&&this.context.dataset.getinfoJSON.vl.vi[0].vid===this.context.dataset.vid&&this.context.dataset.videoPreloadList&&this.context.dataset.videoPreloadList.length)return void this.context.msg.broadcast("setFocusVideoUrl",f.extend({},this.context.dataset.videoPreloadList[0],{autoplay:!0}));this.context.dataset.autoplay=!0}"string"===f.type(a)?a={vid:a,autoplay:!0}:"undefined"===f.type(a)&&(a={}),this.checkLanguageSwitch(a),a.hasOwnProperty("cid")&&(this.context.dataset.cid=a.cid),a.hasOwnProperty("columnId")&&(this.dataset.columnId=a.columnId),a.hasOwnProperty("autoplay")&&(this.context.dataset.autoplay=a.autoplay),a.hasOwnProperty("isNeedPay")&&(this.context.dataset.isNeedPay=a.isNeedPay),a.hasOwnProperty("nextVid")&&(this.context.dataset.nextVid=a.nextVid),a.hasOwnProperty("bullet")&&(this.dataset.bullet=a.bullet),a.hasOwnProperty("bulletId")&&(this.dataset.bulletId=a.bulletId),a.hasOwnProperty("showBullet")&&(this.context.config.showBullet=a.showBullet||this.context.config.showBullet||!1),a.hasOwnProperty("playEndTime")&&a.playEndTime&&a.hasOwnProperty("duration")?(this.context.dataset.playEndTime=parseInt(a.duration)-parseInt(a.playEndTime),this.context.dataset.playEndTime<0&&(this.context.dataset.playEndTime=null)):a.hasOwnProperty("vid")&&a.vid!==this.context.dataset.vid&&(this.context.dataset.playEndTime=null),a.hasOwnProperty("trailerMode")&&a.trailerMode?this.context.dataset.trailerMode=!0:this.context.dataset.trailerMode=!1,this.context.dataset.connectionPlayTime=a.connectionPlayTime?a.connectionPlayTime:0,this.context.dataset.playStartTime=a.playStartTime?a.playStartTime:0,this.context.dataset.connectionPlayType=a.hasOwnProperty("connectionPlayType")?a.connectionPlayType:0,!a.hasOwnProperty("connectionPlayType")&&a.hasOwnProperty("vid")&&this.context.dataset.vid&&a.vid!==this.context.dataset.vid&&(this.context.dataset.connectionPlayType=3),a.hasOwnProperty("title")&&(this.context.dataset.title=g.xss(a.title)),a.authext&&(this.context.dataset.authext=a.authext),a.eduext&&(this.context.dataset.eduext=a.eduext),this.context.dataset.isAnNewPlayAction=!!a.isAnNewPlayAction,this.dataset.hasVideoPlayed=!1,this.context.dataset.hasLoadVideoUrl=!1;var d=this.context.dataset.vid;if(a.hasOwnProperty("vid")&&this.setVid(a.vid),this.context.msg.broadcast("beforeVideoPlay",this.context.dataset.vid,d),this.initNextVid(),!this.context.dataset.hasOwnProperty("isPlayingAd")){var e={autoplay:b.context.dataset.autoplay};e.playStartTime=b.getSkipPreludeTime(),e.connectionPlayTime=b.context.dataset.connectionPlayTime,this.loadVideoUrls(e)}}},pause:function(){this.context.dataset.isPlayingAd||this.context.msg.broadcast("pause")},setVid:function(a){if(a&&a!==this.context.dataset.vid){g.showInfo("HdPlayerControl.onVidChange",{currentVid:this.context.dataset.vid,nextVid:a});var b=this.context.dataset.vid;this.context.dataset.vid=a,this.context.msg.broadcast("vidChange",a,b);try{this.context.userMsg.broadcast("vidChange",a,b)}catch(c){}this.onVidChange()}},onVidChange:function(){this.updateCurrentTime(0,"onVidChange"),
this.context.msg.off("videoPlaying.loadAndSeekSync"),this.context.msg.off("getVideoUrlSuccess.loadVideoUrls"),this.context.msg.off("videoPlaying.showUiSeekTip"),this.dataset.urlIndex=0,this.context.dataset.seekToSyncFlag=!1,this.context.dataset.filmVideoData=null,this.context.dataset.videoPreloadList=null,this.context.dataset.bufferedTime=this.getBufferdTime(),this.context.dataset.bufferHealth=null,this.context.dataset.duration=null,this.context.dataset.getinfoJSON=null,this.context.dataset.playerId=g.createGUID(),this.context.dataset.flowid=this.context.dataset.playerId+"_"+this.context.dataset.platform},retryUrlsWhenErr:function(a){var b=this,c=a.currentTime,d=a.index;if(b.dataset.urlIndex++,b.context.dataset.filmVideoData&&!(d>=b.context.dataset.filmVideoData.length||(b.dataset.urlIndex>=b.context.dataset.filmVideoData[d].urlArray.length&&(b.dataset.urlIndex=0),a.preload)))if(b.context.dataset.useHls===!0)b.context.msg.broadcast("setFocusVideoUrl",{url:b.context.dataset.filmVideoData[d].urlArray[b.dataset.urlIndex].url,currentTime:c,autoplay:!0});else{if(g.browser.ie&&0==b.context.dataset.playState)return;b.requestVideoNextPartKey(b.context.dataset.filmVideoData[d],b.dataset.urlIndex).done(function(a){b.context.msg.broadcast("setFocusVideoUrl",{url:a,currentTime:c,autoplay:!0})})}},addEventListener:function(){this.dealAdMoudle(),this.dealFilmMoudle()},exportsModuleApis:function(){var a=this;this.initExtendApisModule(),this.dataset.privateApis={},this.dataset.privateApis.playControl=this.play.bind(this),this.dataset.privateApis.seekTo=this.seekTo.bind(this),this.dataset.privateApis.retryUrlsWhenErr=this.retryUrlsWhenErr.bind(this),this.dataset.privateApis.requestGetinfo=function(b,c){a.loadVideoUrls(b)},f.each(this.dataset.privateApis,function(b,c){a.context.msg.on(b,c)}),this.dataset.dataApis={},this.dataset.dataApis.getVideoSeekToInfo=function(b,c){c.data=a.getVideoSeekToInfo(b)},f.each(this.dataset.dataApis,function(b,c){a.context.msg.setData(b,c)})}};var j=c(102);g.extend(d.prototype,j);var k=c(103);g.extend(d.prototype,k);var l=c(104);g.extend(d.prototype,l);var m=c(105);g.extend(d.prototype,m);var n=c(106);g.extend(d.prototype,n),Txplayer.register("HdPlayerControl",d)},100:function(a,b){var c={};c.defaultMsg=c[10001]=c[50]=c[68]=c[71]=c[73]=c[74]=c[76]=c[77]=c[445]=c[444]="啊哦，没能找到你要的节目信息~",c[51]=c[52]=c[64]=c[61]=c[62]=c[63]=c[65]=c[66]=c[69]=c[81]=c[82]=c[84]=c[86]=c["80.10"]=c[94]="啊哦，本来在这儿的视频不见了~",c[80]=c[83]="啊哦，版权原因，该视频暂时无法播放~",c.getPlatformErrorCode=function(a,b,c){var d="-",e="-",f="-";return c=c||"00",Txplayer.util.os.mac?d="62":Txplayer.util.os.windows&&(d="61"),"getinfo"===a?e="101":"getkey"===a?e="102":"ad"===a?e="215":"player"===a&&(e="200"),"neterror"===b?f="140":"cgiInnerError"===b?(f="13",c&&(c=""+c),2===c.length&&(c="0"+c)):"h5video"===b?f="111":"aderror"===b&&(f="150"),d+e+"."+f+c},a.exports=c},101:function(a,b){function c(a){d=Txplayer.util,e=Txplayer.$,this.context=a,this.dataset={_cache:{}},this.dataset.url="//ncgi.video.qq.com/fcgi-bin/livemark/get_video_mark",this.init()}var d,e,f=c.prototype;f.init=function(){this.addEventListeners()},f.addEventListeners=function(){var a=this;this.dataset.eventList={},this.dataset.eventList[d.getUniqueMsgKey("vidChange")]=function(){a.dataset.request&&"function"===e.type(a.dataset.request.abort)&&a.dataset.request.abort(),a.dataset._cache={}},e.each(this.dataset.eventList,function(b,c){a.context.msg.on(b,c)})},f.requestVideoMark=function(){var a=this.context.dataset.vid;if(!this.dataset._cache[a]){var b=d.getJsonpCallbackName("get_video_mark"),c={idlist:a,otype:"json",pr:1,callback:b},f=this;this.context.dataset.cid&&(c.cid=this.context.dataset.cid),this.context.dataset.columnId&&(c.lid=this.context.dataset.columnId),this.dataset.request=e.jsonp({url:this.dataset.url,data:c,callback:b}).done(function(b){f._handleData(b),f.dataset._cache[a]=!0})}},f._handleData=function(a){var b=[],c={},f=this;try{b=a.results[0].fields[0].videotag[0].ts.t[0]}catch(g){}e.each(b,function(a,b){b=b||{};var d=b.cate;"undefined"!==e.type(b.cate)&&(c[d]||(c[d]=[]),c[d].push(b))}),e.each(c,function(a,b){try{f.context.msg.broadcast("getVideoMarkDataReady."+a,b)}catch(c){d.showError("getVideoMark.handleData.Error."+a,c)}})},a.exports=c},102:function(a,b){function c(){var a=this;this.context.dataset.isLoadingAdEmpty=!0,this.context.msg.on("allLoadingAdPlayFail",function(){if(!a.context.dataset.hasLoadVideoUrl){var b={autoplay:!0};b.playStartTime=a.getSkipPreludeTime(),b.connectionPlayTime=a.context.dataset.connectionPlayTime,a.loadVideoUrls(b)}}),this.context.msg.on("loadingAdRequestError",function(b){if(a.context.dataset.isPreloadAd=b.isPrepLoad,!a.context.dataset.isPreloadAd&&!a.context.dataset.hasLoadVideoUrl){a.context.dataset.isLoadingAdEmpty=!0;var c={autoplay:!0};c.playStartTime=a.getSkipPreludeTime(),c.connectionPlayTime=a.context.dataset.connectionPlayTime,a.loadVideoUrls(c)}}),this.context.msg.on("loadingadIsEmpty",function(b){if(a.context.dataset.isPreloadAd=b,!a.context.dataset.isPreloadAd){a.context.dataset.isLoadingAdEmpty=!0;var c={autoplay:a.context.dataset.autoplay};c.playStartTime=a.getSkipPreludeTime(),c.connectionPlayTime=a.context.dataset.connectionPlayTime,a.loadVideoUrls(c)}}),this.context.msg.on("loadingAdDataReady",function(b,c){if(a.context.dataset.isPreloadAd=c,b&&"array"===Txplayer.$.type(b)&&b.length){var d=c?a.context.dataset.nextVideoInfo.vid:a.context.dataset.vid,e=[];return Txplayer.$(b).each(function(b,c){if(c&&"PVL"==c.type){var f=c.image;if("array"===Txplayer.$.type(c.image)&&(f=c.image[0]),f&&f.url){a.context.dataset.loadingImageAdUrl=f.url,a.context.dataset.loadingImageAdData=c;var g=new Image;g.onerror=function(){a.context.dataset.loadingImageAdUrl=null,a.context.msg.broadcast("loadingImageAdPreloadError")},g.src=a.context.dataset.loadingImageAdUrl}}else{var h="array"===Txplayer.$.type(c.image)?c.image[0].cs:c.image.cs;c.image.url&&e.push({url:c.image.url,type:"loadingad",data:{bytesTotal:h},filesize:h,advid:c.image.vid,vid:d})}}),a.context.msg.broadcast("loadingImageAdUrlReady",{url:a.context.dataset.loadingImageAdUrl}),0===e.length?void a.context.msg.broadcast("loadingadIsEmpty",c):void(a.hasVidAdInPlaylist("loadingad",d)||(a.context.dataset.isLoadingAdEmpty=!1,a.context.msg.broadcast("addUrls2Player",e),a.context.msg.broadcast("play")))}}),this.context.msg.on("endingAdDataReady",function(b){if(b&&"array"===Txplayer.$.type(b)&&b.length){var c=[];Txplayer.$(b).each(function(b,d){d.image.url&&c.push({url:d.image.url,type:"endingad",advid:d.image.vid,vid:a.context.dataset.vid})}),0!==c.length&&(a.hasVidAdInPlaylist("endingad",a.context.dataset.vid)||(a.context.msg.broadcast("addUrls2Player",c),a.context.msg.broadcast("play")))}}),this.context.msg.on("insertAdDataReady",function(b){if(b.data&&b.insertTime&&"array"===Txplayer.$.type(b.data)&&b.data.length){var c,d=a.getVideoSeekToInfo(b.insertTime),e=d.index+1;if(a.context.dataset.useHls&&(e+=a.context.dataset.playListIndex),b.insertTime&&b.insertTime>15&&(c=a.getVideoSeekToInfo(b.insertTime-15),c&&c.index!==d.index&&a.context.dataset.playListIndex!=d.index&&(e-=1)),d&&d.hasOwnProperty("index")){var f=[];Txplayer.$(b.data).each(function(b,c){f.push({url:c.image.url,type:"insertad",advid:c.image.vid,vid:a.context.dataset.vid})});var g={data:f,type:"insertad",startIndex:e};a.context.msg.broadcast("addUrls2Player",g),a.context.msg.broadcast("lockAndPreloadNext")}}}),this.context.msg.on("videoPlaying",function(b){if("film"!==a.context.dataset.currentPlayListType){if(a.context.dataset.isLoadingAdEmpty)return;if(a.context.dataset.hasLoadVideoUrl)return;var c={autoplay:!0};c.playStartTime=a.getSkipPreludeTime(),c.connectionPlayTime=a.context.dataset.connectionPlayTime,a.loadVideoUrls(c)}})}a.exports={dealAdMoudle:c}},103:function(a,b){function c(){var a=this;a.context.msg.on("beforeVideoPlay",function(b,c){var d=a.context.dataset.nextVideoInfo?a.context.dataset.nextVideoInfo.vid:"";if(a.context.dataset.isPreloadAd&&b==d)if(a.context.dataset.playList&&a.context.dataset.playList.length>0)a.context.msg.broadcast("play",{notNeedUpdateIndex:!0});else{var e={autoplay:!0};e.playStartTime=a.getSkipPreludeTime(),e.connectionPlayTime=a.context.dataset.connectionPlayTime,a.loadVideoUrls(e)}a.context.dataset.isPreloadAd&&(a.context.dataset.isPreloadAd=!1)}),this.context.msg.on("videoPlaying",function(b){"film"===a.context.dataset.currentPlayListType&&(a.dataset.hasVideoPlayed=!0)}),this.context.msg.on("videoEnd",function(b){b.playListTypeEnd&&"film"===b.playListType&&(a.dataset.hasVideoPlayed=!1,a.context.dataset.getinfoJSON=null)}),this.context.msg.on("userStopVideo",function(b){a.dataset.hasVideoPlayed=!1}),a.context.msg.on(d.getUniqueMsgKey("beforeVideoRePlay"),function(){a.updateCurrentTime(0,"beforeVideoRePlay"),a.context.dataset.bufferedTime=0,a.context.dataset.videoBufferedTime=0,a.context.dataset.currentTime=0,a.dataset.hasVideoPlayed=!1,a.context.dataset.getinfoJSON=null,a.context.dataset.filmVideoData=[],a.context.dataset.videoCurrentTime=0}),a.context.msg.on(d.getUniqueMsgKey("videoTimeUpdate"),function(b){if(b&&"film"===b.playListType){var c=a.calcCurrentTime();c&&b&&b.videoTag&&b.videoTag.currentTime&&a.updateCurrentTime(c,"onSectionTimeupdate"),a.context.dataset.bufferedTime=a.getBufferdTime(),a.context.dataset.canPlayTime&&c&&c>=a.context.dataset.canPlayTime&&a.showUIVipGuide("trial")}}),a.context.msg.on("videoPlaying",function(b){if(b&&"film"===b.playListType&&a.context.dataset.canPlayTime){var c=a.calcCurrentTime();c&&a.updateCurrentTime(c,"onSectionPlaying"),c&&c>=a.context.dataset.canPlayTime&&a.showUIVipGuide("trial")}}),a.context.msg.on("seekStart",function(b){b&&"film"===b.type&&a.context.dataset.canPlayTime&&b&&b.seekTime&&b.seekTime>=a.dataset.canPlayTime&&a.showUIVipGuide("trial")}),a.context.msg.on("videoEnd",function(b){b&&"film"===b.playListType&&a.context.dataset.canPlayTime&&a.context.dataset.currentTime>a.context.dataset.canPlayTime&&(a.updateCurrentTime(a.context.dataset.canPlayTime,"videoEnd"),a.showUIVipGuide("trial"))}),a.context.msg.on("beforeVideoPlay",function(b,c){if(a.context.dataset.hasChromeHlsPlugin){a.context.dataset.useChromeHls=!0,a.context.dataset.useHls=!0;var e=["html5hd","safarihls","chromehls"],f=a.context.config.playerType;e.indexOf(f)>-1&&(a.context.config.playerType="chromehls")}d.isSupportSafariHls()&&(a.context.dataset.useHls=!0)}),this.context.msg.on("videoInterruptByError",function(){a.dataset.getVkeyErrorData&&83===a.dataset.getVkeyErrorData.code?a.showUIVipGuide("trial"):a.dataset.getVideoInfoErrorData&&91===a.dataset.getVideoInfoErrorData.code&&(a.showUIVipGuide("switchDef"),a.context.dataset.isDefinitionSwitching=!1)}),a.context.msg.on("chromehlsErrorSwitchToHtml5hd",function(b,c){a.context.msg.broadcast("reportChromeHlsError",b.code),a.context.dataset.useHls=!1,a.context.dataset.useChromeHls=!1;var d=["html5hd","safarihls","chromehls"],e=a.context.config.playerType;d.indexOf(e)>-1&&(a.context.config.playerType="html5hd");var f={autoplay:!0};f.playStartTime=a.getSkipPreludeTime(),f.connectionPlayTime=a.context.dataset.connectionPlayTime,a.loadVideoUrls(f)}),a.context.msg.on(d.getUniqueMsgKey("getVideoUrlSuccess"),function(){var b={width:a.context.dataset.videoWidth,height:a.context.dataset.videoHeight};if(b.width&&b.height){var c=a.context.dataset.$playermod.width(),d=a.context.dataset.$playermod.height(),e=b.width*(d/b.height),f=b.height*(c/b.width);e<c&&e>=c-20?a.context.dataset.$videomod.addClass("txp_video_fit_cover"):f<d&&f>=d-20?a.context.dataset.$videomod.addClass("txp_video_fit_cover"):a.context.dataset.$videomod.removeClass("txp_video_fit_cover")}});var b=function(){var b={otype:"json",market_id:1,platform:2,unix_time:+new Date,ip:a.context.dataset.reportUsrIP,user_agent:navigator.userAgent,qq:d.getQQFromCookie(),wx_openid:d.cookie.get("vuserid"),refer:document.referrer,url:location.href};Txplayer.$.jsonp({url:"//ncgi.video.qq.com/fcgi-bin/get_guid_http_to_jce?callback=?",data:b,callback:Txplayer.util.getJsonpCallbackName("get_guid")}).done(function(b){b&&0==b.err_code&&b.guid?(a.context.dataset.unid=b.guid,d.setData(Txplayer.dataset.localStorageKey.unid,b.guid)):a.dataset.hasRequestUnid=!1}).fail(function(){a.dataset.hasRequestUnid=!1})};a.context.msg.on(d.getUniqueMsgKey("videoPlaying"),function(c){if(c&&"film"===c.playListType){if(a.context.dataset.unid)return;var e=d.getData(Txplayer.dataset.localStorageKey.unid);if(e)return void(a.context.dataset.unid||(a.context.dataset.unid=e));if(a.dataset.hasRequestUnid)return;a.dataset.hasRequestUnid=!0,b()}}),a.context.msg.on(d.getUniqueMsgKey("videoPlaying"),function(b){b&&"film"===b.playListType&&a.getVideoMark&&a.getVideoMark.requestVideoMark()})}var d=Txplayer.util;a.exports={dealFilmMoudle:c}},104:function(a,b,c){var d=Txplayer.util,e=c(100),f={requestVideoUrlsByVid:function(a){a=a||{};var b={vid:this.context.dataset.vid,defn:this.context.dataset.historyDefinition||"",charge:this.context.dataset.isNeedPay?1:0,fhdswitch:a.fhdswitch?1:0,show1080p:this.context.config.show1080p?1:0,isHLS:0},c=this,f={};Txplayer.$.extend(b,a),this.context.dataset.useHls===!0&&"false"!=d.getUrlParam("ishls")&&Txplayer.$.extend(b,{isHLS:1,dtype:3,sphls:1}),this.getinfo.requestGetinfo(b).done(function(a,b,d,e){if(b&&(c.context.dataset.filmVideoData=b,c.dataset.DefinitionList=d,c.context.dataset.definitionList=d,Txplayer.$(c.context.dataset.definitionList).each(function(a,b){1===b.sl&&(c.context.dataset.currentDefinitionRate=b.br,c.context.dataset.definition=b.name,c.context.dataset.currentDefinitionFormat=b.format)})),c.context.dataset.getinfoJSON=e,c.context.dataset.duration=c.getDuration(),c.dataset.getVideoInfoErrorData=null,c.dataset.userPayStatus=c.getUserPayStatus(),c.context.dataset.filesize=c.getFileSize(),c.context.dataset.canPlayTime=null,e&&e.preview&&(1===e.exem||83===e.iRetCode)&&(c.context.dataset.canPlayTime=e.preview,f={code:83,trailTime:e.preview}),e&&e.vl&&e.vl.vi&&"object"===Txplayer.$.type(e.vl.vi[0])&&(c.context.dataset.videoWidth=e.vl.vi[0].vw,c.context.dataset.videoHeight=e.vl.vi[0].vh,c.context.dataset.tpid=e.vl.vi[0].videotype,c.context.dataset.ckey=e.vl.vi[0].fvkey),e.preview||1!==e.exem&&83!==e.iRetCode){if(1==e.dltype){c.context.msg.broadcast("destroyHlsPlayer"),c.context.dataset.useHls=!1,c.context.dataset.useChromeHls=!1;var g=["html5hd","safarihls","chromehls"],h=c.context.config.playerType;g.indexOf(h)>-1&&(c.context.config.playerType="html5hd")}c.context.msg.broadcast("getVideoUrlSuccess",a)}else f={code:83,trailTime:0};f&&f.hasOwnProperty("trailTime")&&!f.trailTime?c.showUIVipGuide("trial"):(f&&f.hasOwnProperty("code")&&83===f.code||c.context.dataset.trailerMode)&&c.context.msg.broadcast("showUIVipTip",f)}).fail(function(b){if(b&&91===b.code)c.dataset.getVideoInfoErrorData=b,c.context.msg.broadcast("videoInterruptByError");else if(b&&"76"===b.code&&"hls"===b.type)c.context.dataset.useHls=!1,c.requestVideoUrlsByVid(a);else{var d=e[b.code]||e.defaultMsg;"80"==b.code&&"10"==b.exem&&(d=e["80.10"]),c.context.msg.broadcast("error",{errCode:b.errCode,code:b.code,msg:d,type:"cgi",exem:b.exem});try{c.context.userMsg.broadcast("error",{errCode:b.errCode,code:b.code,msg:d,type:"cgi",exem:b.exem})}catch(f){}}})},requestVideoNextPartKey:function(a,b){if(b=b||0,!this.context.dataset.filmVideoData)return!1;var c=this,d=Txplayer.$.Deferred();return this.dataset.preloadStatus="pending",a.isNeedPay=this.context.dataset.isNeedPay,this.getinfo.getHDVideoVkey(a).done(function(e){return c.dataset.getVkeyErrorData=null,e?void d.resolve(a.urlArray[b].url+"&vkey="+e):(c.dataset.preloadStatus="fail",void d.reject())}).fail(function(a){if(!c.context.dataset.canPlayTime||83!==a.code){c.dataset.getVkeyErrorData=a,c.context.msg.broadcast("error",{code:a.code,errCode:a.errCode,msg:e[a.code]||e.defaultMsg,type:"cgi"});try{c.context.userMsg.broadcast("error",{code:a.code,errCode:a.errCode,msg:e[a.code]||e.defaultMsg,type:"cgi"})}catch(b){}d.reject(a)}}),d},loadVideoUrls:function(a){a=a||{},this.context.dataset.hasLoadVideoUrl=!0;var b,c=this,e=function(a){if(c.context.dataset.playState===-1)c.context.msg.on("videoPlaying.loadAndSeekSync",function(b){"film"==b.playListType&&(c.context.dataset.seekToSyncFlag||(a(),c.context.msg.off("videoPlaying.loadAndSeekSync")))});else{if(c.context.dataset.seekToSyncFlag)return;a()}};this.context.msg.once("getVideoUrlSuccess.loadVideoUrls",function(b){if(!c.context.dataset.filmVideoData)return void d.showError("onGetVideoUrlSuccess失败","找不到播放url列表");var f=[];c.context.dataset.useHls===!0?f.push({url:b,filesize:c.context.dataset.filmVideoData[0].bytesTotal,type:"film",vid:c.context.dataset.vid}):Txplayer.$(c.context.dataset.filmVideoData).each(function(a,e){return 0===a&&b?void f.push({url:b,type:"film",filesize:e.bytesTotal,vid:c.context.dataset.vid,data:e}):void f.push({_url:e.urlArray,data:e,type:"film",filesize:e.bytesTotal,vid:c.context.dataset.vid,getUrlSync:function(){var a=Txplayer.$.Deferred();return c.requestVideoNextPartKey(this.data,c.dataset.urlIndex).done(function(b){d.showInfo("getUrlSync.done",b),a.resolve(b)}).fail(function(b){d.showError("getUrlSync.fail",b),a.reject(b)}),a}})});var g={data:f,type:"film"};return c.context.dataset.videoPreloadList=f,c.context.msg.broadcast("preloadListChange",b),a.repalcePlayList&&(g.repalcePlayList=!0),a.clear&&(g.clear=!0),c.context.msg.broadcast("addUrls2Player",g),c.setVid(a.vid),c.context.dataset.useChromeHls&&(c.context.dataset.hlsLoadStartTime=a.connectionPlayTime?a.connectionPlayTime:a.playStartTime,c.context.dataset.hlsLoadStartTime=+c.context.dataset.hlsLoadStartTime),a.autoplay&&(c.context.dataset.autoplay=!0,c.context.dataset.isPlayingAd||c.context.msg.broadcast("play")),c.context.dataset.useChromeHls?(c.context.msg.off("videoPlaying.showUiSeekTip"),void c.context.msg.on("videoPlaying.showUiSeekTip",function(b){b&&"film"==b.playListType&&(delete c.context.dataset.hlsLoadStartTime,c.context.msg.off("videoPlaying.showUiSeekTip"),a.type="chromehls",c.context.msg.broadcast("showUiSeekTip",a))})):void(a.connectionPlayTime?e(function(){c.seekTo({connectionPlayTime:a.connectionPlayTime})}):a.playStartTime&&e(function(){c.seekTo({playStartTime:a.playStartTime})}))}),b=Txplayer.$.extend({},{vid:a.vid,charge:a.charge,defn:a.defn,fhdswitch:a.fhdswitch}),this.auth({eduext:this.context.config.eduext||"",authext:this.context.config.authext||"",vid:this.context.dataset.vid}).done(function(a){a&&a.cgi&&(b.cgi=a.cgi),a&&a.param&&(b=Txplayer.$.extend(b,a.param),a.param.platform&&(c.context.dataset.platform=a.param.platform)),c.requestVideoUrlsByVid(b)}).fail(function(){c.requestVideoUrlsByVid(b)})}};a.exports=f},105:function(a,b){var c=function(){this.dataset.moduleApis={},this.dataset.moduleApis.seekTo=this.seekTo.bind(this),this.dataset.moduleApis.play=this.play.bind(this),this.dataset.moduleApis.pause=this.pause.bind(this),this.dataset.moduleApis.getVid=this.getVid.bind(this),this.dataset.moduleApis.getCid=this.getCid.bind(this),this.dataset.moduleApis.getColumnId=this.getColumnId.bind(this),this.dataset.moduleApis.isSmallWindowMode=this.isSmallWindowMode.bind(this),this.dataset.moduleApis.setPlayerVipStatus=this.setPlayerVipStatus.bind(this),this.dataset.moduleApis.getDuration=this.getDuration.bind(this),this.dataset.moduleApis.getFileSize=this.getFileSize.bind(this),this.dataset.moduleApis.getVideoSize=this.getVideoSize.bind(this),this.dataset.moduleApis.getCurrentTime=this.getCurrentTime.bind(this),this.dataset.moduleApis.seekRight=this.seekRight.bind(this),this.dataset.moduleApis.seekLeft=this.seekLeft.bind(this),this.dataset.moduleApis.togglePlayPause=this.togglePlayPause.bind(this),this.dataset.moduleApis.getUserPayStatus=this.getUserPayStatus.bind(this),this.dataset.moduleApis.getVideoType=this.getVideoType.bind(this),this.dataset.moduleApis.getPlayerType=this.getPlayerType.bind(this),this.dataset.moduleApis.setSmallWindowMode=this.setSmallWindowMode.bind(this),this.dataset.moduleApis.getDefinitionList=this.getDefinitionList.bind(this),this.dataset.moduleApis.callPlayerExtendMethod=this.callPlayerExtendMethod.bind(this),Txplayer.$.extend(this.context.userApi,this.dataset.moduleApis)},d={initExtendApisModule:c,getDuration:function(){var a=0;return this.context.dataset.getinfoJSON&&this.context.dataset.getinfoJSON.vl&&this.context.dataset.getinfoJSON.vl.vi&&this.context.dataset.getinfoJSON.vl.vi[0]&&this.context.dataset.getinfoJSON.vl.vi[0].td&&(a=parseFloat(this.context.dataset.getinfoJSON.vl.vi[0].td)),parseFloat(a)},getFileSize:function(){if(!this.context.dataset.filmVideoData||"array"!==Txplayer.$.type(this.context.dataset.filmVideoData))return 0;var a=0;return Txplayer.$(this.context.dataset.filmVideoData).each(function(b,c){a+=parseInt(c.bytesTotal)}),parseInt(a/1024)},getVideoSize:function(){return{width:this.context.dataset.videoWidth,height:this.context.dataset.videoHeight}},getVideoType:function(){return this.context.config.videoType},getPlayerType:function(){return this.context.config.playerType},getCurrentTime:function(){return this.context.dataset.currentTime||0},getVid:function(){return this.context.dataset.vid},getCid:function(){return this.context.dataset.cid},getColumnId:function(){return this.context.dataset.columnId},isSmallWindowMode:function(){return!!this.context.dataset.isSmallWindowMode},callPlayerExtendMethod:function(){var a=Array.prototype.slice.call(arguments,0),b=a.shift();if(b)switch(a.length){case 1:try{this.context.msg.broadcast(b,a[0])}catch(c){}break;case 2:try{this.context.msg.broadcast(b,a[0],a[1])}catch(c){}break;default:try{this.context.msg.broadcast(b,a)}catch(c){}}},setPlayerVipStatus:function(a){this.context.config.show1080p=!!a},getDefinitionList:function(){return[]},seekRight:function(a){var b=5;"number"===Txplayer.$.type(a)&&(b=a);var c=this.context.dataset.duration;if(c){var d=this.getCurrentTime();d+=b,d>c||this.seekTo(d)}},seekLeft:function(a){var b=5;"number"===Txplayer.$.type(a)&&(b=a);var c=this.context.dataset.duration;if(c){var d=this.getCurrentTime();d-=b,d<0||this.seekTo(d)}},togglePlayPause:function(){this.context.dataset.isPlayingAd||(1===this.context.dataset.playState?(this.pause(),this.context.msg.broadcast("userPausePlayer")):(this.play(),this.context.msg.broadcast("userPlayPlayer")))},getUserPayStatus:function(){var a=null;return this.context.dataset.getinfoJSON&&this.context.dataset.getinfoJSON.vl&&this.context.dataset.getinfoJSON.vl.vi&&this.context.dataset.getinfoJSON.vl.vi.length&&this.context.dataset.getinfoJSON.vl.vi[0]&&(a=this.context.dataset.getinfoJSON.vl.vi[0].ch),a},setSmallWindowMode:function(a){this.context.dataset.isSmallWindowMode=!!a,this.context.msg.broadcast("smallWindowModeChange",{isSmallWindow:!!a})}};a.exports=d},106:function(a,b){var c=Txplayer.util,d={calcCurrentTime:function(){if("film"!=this.context.dataset.currentPlayListType)return 0;var a=this.context.msg.getData("getPlayListIndex","film");this.context.dataset.filmVideoData&&a>=this.context.dataset.filmVideoData.length&&(a=0);var b=0;return Txplayer.$(this.context.dataset.filmVideoData).each(function(c,d){return!(c>=a)&&void(b+=d.duration)}),b+=this.context.dataset.videoCurrentTime,parseInt(b)},getBufferdTime:function(){if(this.context.dataset.isPlayingAd)return 0;var a=this.context.msg.getData("getPlayListIndex","film"),b=0;return Txplayer.$(this.context.dataset.filmVideoData).each(function(c,d){return c!==a&&void(b+=d.duration)}),b+=this.context.dataset.videoBufferedTime},updateCurrentTime:function(a,b){"number"===Txplayer.$.type(a)&&(this.context.dataset.currentTime=a)},getVideoSeekToInfo:function(a){var b=0,c=0;this.context.dataset.useHls||Txplayer.$(this.context.dataset.filmVideoData).each(function(d,e){if(c=d,b+=e.duration,b>a)return b-=e.duration,!1});var d={index:c,prevDurtion:b};return d},showUIVipGuide:function(a){var b={trial:{trialFinish:!0},switchDef:{switchDefinitionFail:!0}};this.pause(),"trial"!=a||this.context.dataset.canPlayTime||(this.context.userApi.stop&&this.context.userApi.stop(),this.context.msg.broadcast("disablePlayBtn")),this.context.msg.broadcast("showUIVipGuide",b[a]);try{this.context.userMsg.broadcast("showUIVipGuide",b[a])}catch(c){}this.context.dataset.isBrowserFullscreen&&this.context.msg.broadcast("exitBrowserFullscreen"),this.context.dataset.isWindowFullscreen&&this.context.msg.broadcast("exitWindowFullscreen")},getSkipPreludeTime:function(){var a;return a=this.context.dataset.skipPrelude?parseInt(this.context.dataset.playStartTime):0},checkLanguageSwitch:function(a){var b=c.getSessionData(Txplayer.dataset.sessionStorageKey.languageSwitch),d="";try{if(b&&(b=b.split("|")||[],b.length>0)){var e=b[0],f=(b[1],b[2]),g=(new Date).getTime();g-f<3e4?e===a.vid&&(d="page_langSwitch"):c.delSessionData(Txplayer.dataset.sessionStorageKey.languageSwitch)}var h=this.context.dataset.adext||"";d?0===h.length?h=d:h.indexOf("page_langSwitch")===-1&&(h=h+"|"+d):h=h.replace(/\|?page\_langSwitch/g,""),this.context.dataset.adext=h}catch(i){}},initNextVid:function(){var a=this;"array"==Txplayer.$.type(Txplayer.dataset.isReadyPlugins)&&Txplayer.dataset.isReadyPlugins.indexOf("UiPlayNext")!=-1?this.context.msg.broadcast("setNextVid",{nextVid:this.context.dataset.nextVid}):this.context.msg.on("pluginReady",function(b){"UiPlayNext"==b.name&&a.context.msg.broadcast("setNextVid",{nextVid:a.context.dataset.nextVid})})},hasVidAdInPlaylist:function(a,b){if(!this.context.dataset.playList)return!1;for(var c=!1,d=0;d<this.context.dataset.playList.length;d++)if(this.context.dataset.playList[d].vid==b&&this.context.dataset.playList[d].type==a){c=!0;break}return c}};a.exports=d}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(158)},158:function(a,b,c){function d(a){e=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util,g=(Txplayer.apiList,c(159));d.prototype={init:function(){this.write(),this.addEventListerner(),this.exportsModuleApis()},write:function(){var a={error:"txp-ui-error",errorMsg:"txp-ui-error-msg",errorHandler:"txp-ui-error-handler",errorRefresh:"txp-ui-error-refresh",openNewPage:"txp-ui-error-newpage",errorCode:"txp-ui-error-code",background:"txp-ui-error-background"},b=e.tmpl(g,a);this.context.dataset.$playermod.append(b),this.dataset.$error=this.context.dataset.$playermod.find('[data-role="'+a.error+'"]'),this.dataset.$errorMsg=this.context.dataset.$playermod.find('[data-role="'+a.errorMsg+'"]'),this.dataset.$errorHandler=this.context.dataset.$playermod.find('[data-role="'+a.errorHandler+'"]'),this.dataset.$errorRefresh=this.context.dataset.$playermod.find('[data-role="'+a.errorRefresh+'"]'),this.dataset.$openNewPage=this.context.dataset.$playermod.find('[data-role="'+a.openNewPage+'"]'),this.dataset.$errorCode=this.context.dataset.$playermod.find('[data-role="'+a.errorCode+'"]'),this.dataset.$background=this.context.dataset.$playermod.find('[data-role="'+a.background+'"]')},remove:function(){this.dataset.$error.remove()},hide:function(){this.dataset.$error.addClass(Txplayer.dataset.hideClass)},showErrorUiTips:function(a){a&&"object"===e.type(a.msg)&&(a.msg=a.msg.defaultMsg);var b=a.code+"",c=this.context.dataset.flowid;if(b&&b.indexOf("_")>-1&&(b=b.split("_")[0]),a&&e.inArray(b,["83"])>-1&&"function"===e.type(this.context.config.showOpenVIPGuide))return this.context.config.showOpenVIPGuide(),void(this.context.dataset.isBrowserFullscreen&&this.context.msg.broadcast("exitBrowserFullscreen"));this.dataset.$error.removeClass(Txplayer.dataset.hideClass),this.dataset.$errorMsg.html(a.msg||"加载失败，请重试"),this.dataset.$errorCode.html("[ 错误码:"+(a.errCode||"")+", "+c+" ]"),e.inArray(a.code+"",["1","2","3","4","5","444","445","10001","50","68","71","73","74","76","77"])>-1?this.dataset.$errorRefresh.removeClass(Txplayer.dataset.hideClass):this.dataset.$errorRefresh.addClass(Txplayer.dataset.hideClass);var d="txp_error_buddy_1",f="txp_error_buddy_2",g="txp_error_buddy_3",h={10001:d,50:d,68:d,71:d,73:d,74:d,76:d,77:d,444:d,445:d,51:f,52:f,64:f,61:f,62:f,63:f,65:f,66:f,69:f,81:f,82:f,84:f,86:f,80:g,83:g};this.dataset.$background.removeClass().addClass("txp_error_buddy"),this.dataset.$background.addClass(h[a.code]||d)},addEventListerner:function(){var a=this;this.dataset.eventsList={},this.dataset.eventsList[f.getUniqueMsgKey("videoPlaying")]=function(){a.hide()},this.dataset.eventsList[f.getUniqueMsgKey("vidChange")]=function(){a.hide()},e.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)}),this.dataset.$errorRefresh.off("click").on("click",function(){window.location.reload()}),this.dataset.$openNewPage.off("click").on("click",function(){var b=a.context.config.otherVideoLink;b&&window.open(b)}),this.context.msg.on("error",function(b){b&&e.inArray(b.type,["film","cgi","init"])===-1||(a.context.dataset.disableHotKey=!0,b&&94==b.code||a.showErrorUiTips(b))})},exportsModuleApis:function(){var a=this;this.dataset.privateApis={},this.dataset.privateApis.showErrorUiTips=this.showErrorUiTips.bind(this),e.each(this.dataset.privateApis,function(b,c){a.context.msg.on(b,c)})}},Txplayer.register("UiError",d)},159:function(a,b){a.exports='<div data-role="<%=error%>" class="txp_video_error txp_none">\r\n  <div data-role="<%=background%>" class="txp_error_buddy txp_error_buddy_1"></div>\r\n  <div data-role="<%=errorMsg%>" class="txp_error_title"></div>\r\n  <div data-role="<%=errorHandler%>" class="txp_error_desc">\r\n    <span data-role="<%=errorRefresh%>">\r\n      你可以<a href="javascript:;" class="txp_link_refresh">刷新</a>试试，或\r\n    </span>\r\n    <a data-role="<%=openNewPage%>" href="javascript:;" class="txp_link_explorer">看看其他精彩视频</a>\r\n  </div>\r\n  <div class="txp_error_code" data-role="<%=errorCode%>">[错误码: xx, xxx]</div>\r\n</div>'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(215)},62:function(a,b){var c={unstarted:-1,ended:0,playing:1,paused:2,buffering:3,cued:4,stop:5},d={msd:"流畅180P",sd:"标清270P",hd:"高清480P",shd:"超清720P",fhd:"蓝光1080P"};a.exports={playerstate:c,definitionMap:d}},215:function(a,b,c){function d(a){f=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=c(216),f=Txplayer.$,g=Txplayer.util,h=(Txplayer.apiList,c(62).definitionMap);d.prototype={init:function(){this.write(),this.addEventListener(),this.exportsModuleApis()},write:function(){var a={hide:Txplayer.dataset.hideClass,tips:"txp-ui-tips",text:"txp-ui-tips-text",close:"txp-ui-tips-close"},b=f.tmpl(e,a);this.context.dataset.$loading?this.context.dataset.$loading.before(b):this.context.dataset.$playermod.append(b),this.dataset.$tips=this.context.dataset.$playermod.find('[data-role="'+a.tips+'"]'),this.dataset.$text=this.context.dataset.$playermod.find('[data-role="'+a.text+'"]'),this.dataset.$close=this.context.dataset.$playermod.find('[data-role="'+a.close+'"]')},remove:function(){this.dataset.$tips.remove()},stopTips:function(){this.context.msg.broadcast("hideUiTips"),this.dataset.trialMovie_TIMER&&(clearInterval(this.dataset.trialMovie_TIMER),this.dataset.trialMovie_TIMER=null)},dealVipTip:function(a){var b,c=this,d=function(){try{b=c.context.config.flashCallFn({type:c.context.dataset.trailerMode?"trailerMode":"getPayTip"})}catch(a){g.showInfo("[updateTrialData.getTips.error]",a)}if(b){c.dataset.getTip_TIMER&&(clearTimeout(c.dataset.getTip_TIMER),c.dataset.getTip_TIMER=null);var e=b.match(/\[.*?\]/);if(e){e=e[0];var f='<a href="javascript:;" data-action="openVIP" data-role="txp-ui-tips-openVIP">'+e.slice(1,-1)+"</a>";b=b.replace(e,f)}}else c.dataset.getTip_TIMER&&clearTimeout(c.dataset.getTip_TIMER),c.dataset.getTip_TIMER=setTimeout(function(){b=d()},1e3)},e=function(){c.context.dataset.isUiTipsShowing||c.context.dataset.isPlayingAd||(b||d(),b&&c.context.msg.broadcast("showUiTips",{text:b,time:300}))};e(),this.dataset.trialMovie_TIMER&&clearInterval(c.dataset.trialMovie_TIMER),this.dataset.trialMovie_TIMER=setInterval(function(){e()},5e3)},dealSeekTip:function(a){var b,c=this;a&&a.showTips?"undefined"==typeof Txplayer.plugins["txp-history-plugin"]&&(b="<a>"+g.formatPlayTime(a.seekTime)+"</a>",c.context.msg.broadcast("showUiTips",{text:"您上次观看至 "+b+" 处，正在为您续播",time:3,hideClose:!0})):a.connectionPlayTime?"undefined"==typeof Txplayer.plugins["txp-history-plugin"]&&(b="<a>"+g.formatPlayTime(a.connectionPlayTime)+"</a>",c.context.msg.broadcast("showUiTips",{text:"您上次观看至 "+b+" 处，正在为您续播",time:3,hideClose:!0})):a.playStartTime?c.dataset.hasShowTips||(b="<a>"+g.formatPlayTime(a.playStartTime)+"</a>",c.context.msg.broadcast("showUiTips",{text:"腾讯视频已为您跳过片头",time:3,hideClose:!0})):a.historyTime?"undefined"==typeof Txplayer.plugins["txp-history-plugin"]&&c.context.msg.broadcast("showUiTips",{text:"您上次观看至 "+a.historyTime+" 处，正在为您续播",time:5}):a.uiText&&(c.context.msg.broadcast("showUiTips",{text:a.uiText,time:a.time}),c.dataset.hasShowTips=!0)},dealDenitionTip:function(){var a=this;this.dataset.eventsList[g.getUniqueMsgKey("setDefinitionStart")]=function(b,c){if(c)return void a.context.msg.broadcast("showUiTips",{text:"正在缓冲...",time:3,hideClose:!0});var d=h[b];d&&(d="<a>["+d+"]</a>",a.context.msg.broadcast("showUiTips",{text:"正在为您切换清晰度"+d,time:10}))},this.dataset.eventsList[g.getUniqueMsgKey("setDefinitionDone")]=function(b){a.context.msg.broadcast("hideUiTips")},this.dataset.eventsList[g.getUniqueMsgKey("setDefinitionFail")]=function(b){a.context.msg.broadcast("showUiTips",{text:"sorry, 切换清晰度失败, 请稍后重试",time:5})}},dealPlaybackRateTip:function(a){if(!this.context.dataset.isPlayingAd){if(a>=4)return void this.context.msg.broadcast("showUiTips",{text:"播放速度已经达到最高值",time:3,hideClose:!0});if(a<=.4)return void this.context.msg.broadcast("showUiTips",{text:"播放速度已经达到最低值",time:3,hideClose:!0});a=1.25==a?a:a.toFixed(1),this.context.msg.broadcast("showUiTips",{text:"正在<a>"+a+"</a>倍速度播放",time:3,hideClose:!0})}},dealVolumeTip:function(a){a.mute===!0?this.context.msg.broadcast("showUiTips",{text:"视频静音",time:2,hideClose:!0}):a.mute===!1?this.context.msg.broadcast("showUiTips",{text:"取消视频静音",time:2,hideClose:!0}):a.volume>=0&&this.context.msg.broadcast("showUiTips",{text:"当前音量: <a>"+a.volume+"</a>",time:3,hideClose:!0})},dealConsoleReportTip:function(a){this.context.msg.broadcast("showUiTips",{text:"您的反馈我们已收到，感谢您的支持~",time:5,hideClose:!0})},showVIPShareTips:function(){var a="//vip.video.qq.com/fcgi-bin/comm_cgi?callback=?",b=f.jsonp||f.ajax,c=this,d=function(a){var b="该账号多地登录存在安全隐患，已暂停会员服务，请修改密码并等待一段时间后重试。";a=a||{},a.tips=a.tips||b;var d=0;c.context.dataset.openAccountData=[],a.buttonlist&&"array"===f.type(a.buttonlist)&&f.each(a.buttonlist,function(b,e){e&&(e.title&&e.url&&(a.tips+='&nbsp;<a href="javascript:;" data-action="shareVIP" data-click="'+d+'">'+e.title+"</a>&nbsp;",c.context.dataset.openAccountData.push(e)),d++)}),c.context.msg.broadcast("showUiTips",{text:a.tips,time:3e4})};b({url:a,data:{name:"attack_account",cmd:1},timeout:6e3,callback:Txplayer.util.getJsonpCallbackName("getshareviptips")}).done(function(a){d(a)}).fail(function(a,b){d()})},addEventListener:function(){var a=this;this.dataset.$close.on("click",function(){a.context.msg.broadcast("hideUiTips",{userAction:!0,tips:a.dataset.$text.html()})}),this.dataset.eventsList={},this.dealDenitionTip(),this.dataset.eventsList[g.getUniqueMsgKey("vidChange")]=function(){a.stopTips(),a.dataset.hasShowTips=!1},this.dataset.eventsList[g.getUniqueMsgKey("error")]=function(b){a.stopTips(),b&&94==b.code&&a.showVIPShareTips()},f.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)}),a.context.msg.on("showUIVipGuide",function(b){a.stopTips()})},exportsModuleApis:function(){var a=this;this.dataset.moduleApis={},this.dataset.moduleApis.showUiTips=function(b){b&&b.text&&(a.context.dataset.isSmallWindowMode||(b.time=b.time||4,"undefined"===f.type(b.hideClose)&&(b.hideClose=!1),b.hideClose?a.dataset.$close.addClass(Txplayer.dataset.hideClass):a.dataset.$close.removeClass(Txplayer.dataset.hideClass),a.dataset.$tips.removeClass(Txplayer.dataset.hideClass),a.dataset.$text.html(b.text),a.context.dataset.isUiTipsShowing=!a.dataset.$tips.hasClass(Txplayer.dataset.hideClass),a.dataset.hide_TIMER&&clearTimeout(a.dataset.hide_TIMER),a.dataset.hide_TIMER=setTimeout(function(){a.context.msg.broadcast("hideUiTips")},1e3*b.time)))},this.dataset.moduleApis.hideUiTips=function(b){a.dataset.$tips.addClass(Txplayer.dataset.hideClass),a.context.dataset.isUiTipsShowing=!a.dataset.$tips.hasClass(Txplayer.dataset.hideClass)},this.dataset.moduleApis.showUIVipTip=function(b){a.dealVipTip(b)},this.dataset.moduleApis.showUiSeekTip=function(b){a.dealSeekTip(b)},this.dataset.moduleApis.showUiRateTip=function(b){a.dealPlaybackRateTip(b)},this.dataset.moduleApis.showUiPlaybackRateTip=function(b){a.dealPlaybackRateTip(b)},this.dataset.moduleApis.showUiVolumeTip=function(b){a.dealVolumeTip(b)},this.dataset.moduleApis.showConsoleReportTips=function(b){a.dealConsoleReportTip(b)},f.each(this.dataset.moduleApis,function(b,c){a.context.msg.on(b,c)})}},Txplayer.register("UiTips",d)},216:function(a,b){a.exports='<txpdiv data-role="<%=tips%>" class="txp_alert_info <%=hide%>">\r\n  <txpdiv class="txp_alert_content">\r\n    <txpdiv data-role="<%=text%>" class="txp_alert_text"></txpdiv>\r\n    <button data-role="<%=close%>" class="txp_btn txp_btn_close" title="关闭"></button>\r\n  </txpdiv>\r\n</txpdiv>'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(149)},149:function(a,b,c){function d(a){f=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=c(150),f=Txplayer.$,g=Txplayer.util;d.prototype={init:function(){this.dataset.controlHideClass="txp_autohide",this.context.dataset.isControlShow=!0,this.write(),this.addEventListener(),this.loadSubPlugins()},write:function(){var a={controlWrap:"txp-control-wrap",progressRole:"txp-control-progress",buttonsLeftRole:"txp-control-left",buttonsRightRole:"txp-control-right",hide:Txplayer.dataset.hideClass,autoHide:this.dataset.controlHideClass},b=f.tmpl(e,a);this.context.dataset.$playermod.append(b),this.dataset.$playermod=this.context.dataset.$playermod,this.dataset.$controlWrap=this.context.dataset.$playermod.find('[data-role="'+a.controlWrap+'"]'),this.dataset.$progressmod=this.context.dataset.$playermod.find('[data-role="'+a.progressRole+'"]'),this.dataset.$buttonsleftmod=this.context.dataset.$playermod.find('[data-role="'+a.buttonsLeftRole+'"]'),this.dataset.$buttonsrightmod=this.context.dataset.$playermod.find('[data-role="'+a.buttonsRightRole+'"]'),(this.context.config.autoplay||g.mobile)&&(this.context.dataset.$playermod.addClass(this.dataset.controlHideClass),this.context.dataset.isControlShow=!1)},remove:function(){this.dataset.$controlWrap.remove()},loadSubPlugins:function(){var a=[];if(this.context.pluginConfig&&"array"===f.type(this.context.pluginConfig.subPlugins)&&(a=this.context.pluginConfig.subPlugins.slice(0)),!g.mobile&&"v4"==this.context.config.version)for(var b=0;b<a.length;b++)if(["UiControlPlay","UiVolume","UiDefinition"].indexOf(a[b])!=-1){if(g.inArray(this.context.config.removePluginsList,a[b])!=-1)continue;a[b]="v4"+a[b]}var c={msg:this.context.msg,userMsg:this.context.userMsg,userApi:this.context.userApi,privateApi:this.context.privateApi,dataset:this.context.dataset,config:this.context.config,$mod:{$playermod:this.dataset.$playermod,$progressmod:this.dataset.$progressmod,$buttonsleftmod:this.dataset.$buttonsleftmod,$buttonsrightmod:this.dataset.$buttonsrightmod}};g.loadPlugins.call(this,a,c,this.context.config.settings)},handlerUiControlShowHide:function(){function a(a){if(a=a||{},a&&!a.force){if(1!==e.context.dataset.playState&&!e.context.dataset.isPlayingAd)return;if(e.context.dataset.isSmallWindowMode)return;if(e.context.dataset.isFocusVideoBufferIng)return;if(e.context.dataset.isVideoSeeking)return;if(e.dataset.isMouseHoverControl)return;if(e.context.dataset.isRightClickMenu)return;if(e.context.dataset.disableHideControl)return}e.context.dataset.$playermod.addClass(e.dataset.controlHideClass),e.context.msg.broadcast("hideUiControl"),e.context.dataset.isControlShow=!1,e.dataset.hideControl_TIMER&&(clearTimeout(e.dataset.hideControl_TIMER),e.dataset.hideControl_TIMER=null)}function b(){return!e.context.dataset.$playermod.hasClass(e.dataset.controlHideClass)}function c(a){if(a=a||{},a&&!a.force){if(e.context.dataset.isSmallWindowMode)return;if(e.dataset.errorcode)return}e.context.msg.broadcast("beforeUiControlShow"),e.context.dataset.$playermod.removeClass(e.dataset.controlHideClass),e.context.dataset.isControlShow=!0,d()}function d(){e.dataset.hideControl_TIMER&&(clearTimeout(e.dataset.hideControl_TIMER),e.dataset.hideControl_TIMER=null),e.dataset.hideControl_TIMER=setTimeout(function(){a()},3e3)}var e=this;this.dataset.hideControl_TIMER=null,g.mobile?this.context.msg.on("ready",function(){e.context.dataset.$shadow.on("touchend",function(){b()?a():c()})}):(this.dataset.$playermod.on("click mouseenter",function(a){c(a)}),this.dataset.$playermod.on("mouseleave",function(b){a(b)}),this.dataset.$playermod.on("mousemove",function(a){e.dataset.screenX==a.screenX&&e.dataset.screenY==a.screenY||(e.dataset.screenX=a.screenX,e.dataset.screenY=a.screenY,c(a))})),this.dataset.eventsList[g.getUniqueMsgKey("videoPause")]=function(a){a&&a.end||e.context.dataset.isPlayingAd||c()},this.dataset.eventsList[g.getUniqueMsgKey("videoEnd")]=function(a){a&&a.isAllEnd&&c()},this.dataset.eventsList[g.getUniqueMsgKey("error")]=function(b){b&&94==b.code||(a({force:!0}),e.dataset.errorcode=b.code)},this.dataset.eventsList[g.getUniqueMsgKey("videoPlaying")]=function(){delete e.dataset.errorcode,d()},this.dataset.eventsList[g.getUniqueMsgKey("smallWindowModeChange")]=function(b){b&&b.isSmallWindow&&a({force:!0})},this.dataset.eventsList[g.getUniqueMsgKey("hideUicontrol")]=function(b){a()},f.each(this.dataset.eventsList,function(a,b){e.context.msg.on(a,b)}),this.show=c,this.hide=a},addEventListener:function(){var a=this;this.dataset.eventsList={},this.handlerUiControlShowHide(),this.dataset.eventsList[g.getUniqueMsgKey("userStopVideo")]=function(b){a.show()},this.dataset.eventsList[g.getUniqueMsgKey("showUicontrol")]=function(b){a.context.dataset.$playermod.removeClass(a.dataset.controlHideClass),a.context.dataset.isControlShow=!0},this.dataset.eventsList[g.getUniqueMsgKey("videoEnd")]=function(b){b&&b.isAllEnd&&(a.context.dataset.$playermod.removeClass(a.dataset.controlHideClass),a.context.dataset.isControlShow=!0)},f.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)}),this.dataset.$controlWrap.on("mouseenter",function(){a.dataset.isMouseHoverControl=!0}).on("mouseleave",function(){a.dataset.isMouseHoverControl=!1}),this.dataset.eventsList[g.getUniqueMsgKey("windowFullscreenChange")]=function(b){a.dataset.isMouseHoverControl=!1,setTimeout(function(){a.dataset.isMouseHoverControl=!1,a.hide({force:!0})},1e3)},this.dataset.eventsList[g.getUniqueMsgKey("browserFullscreenChange")]=function(b){a.dataset.isMouseHoverControl=!1,setTimeout(function(){a.dataset.isMouseHoverControl=!1,a.hide({force:!0})},200)}}},Txplayer.register("UiControl",d)},150:function(a,b){a.exports='<txpdiv data-role="<%=controlWrap%>" class="txp_bottom">\r\n  <txpdiv class="txp_progress_bar_container" data-role="<%=progressRole%>"></txpdiv>\r\n  <txpdiv class="txp_controls">\r\n    <txpdiv class="txp_left_controls" data-role="<%=buttonsLeftRole%>"></txpdiv>\r\n    <txpdiv class="txp_right_controls" data-role="<%=buttonsRightRole%>"></txpdiv>\r\n  </txpdiv>\r\n</txpdiv>'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(202)},202:function(a,b,c){function d(a){e=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util,g=(Txplayer.apiList,c(203));d.prototype={init:function(){this.write(),this.addEventListerner()},write:function(){var a={loadedProgress:"txp-control-load-progress",playedProgress:"txp-control-play-progress",playStartTimePoint:"txp-control-play-start-time-point",playEndTimePoint:"txp-control-play-end-time-point",playedPoint:"txp-control-play-point",progressList:"txp-control-progress-list",progressIndicator:"txp-control-progress-indicator",tabindex:Txplayer.dataset.tabindex++};this.dataset.renderData=a;var b=e.tmpl(g,a);this.context.$mod.$progressmod.append(b),this.dataset.$loadedProgress=this.context.$mod.$progressmod.find('[data-role="'+a.loadedProgress+'"]'),this.dataset.$playprogress=this.context.$mod.$progressmod.find('[data-role="'+a.playedProgress+'"]'),this.dataset.$playStartTimePoint=this.context.$mod.$progressmod.find('[data-role="'+a.playStartTimePoint+'"]'),this.dataset.$playEndTimePoint=this.context.$mod.$progressmod.find('[data-role="'+a.playEndTimePoint+'"]'),this.dataset.$playpoint=this.context.$mod.$progressmod.find('[data-role="'+a.playedPoint+'"]'),this.dataset.$progressIndicator=this.context.$mod.$progressmod.find('[data-role="'+a.progressIndicator+'"]'),this.dataset.$progressList=this.context.$mod.$progressmod.find('[data-role="'+a.progressList+'"]')},remove:function(){this.dataset.$loadedProgress.remove(),this.dataset.$playprogress.remove(),this.dataset.$playpoint.remove(),this.dataset.$playStartTimePoint.remove(),this.dataset.$playEndTimePoint.remove(),this.dataset.$progressIndicator.remove(),this.dataset.$progressList.remove()},isInProgressArea:function(a){var b=this;if(1!=a.which)return!1;var c=e(a.target);return c.data("role")===b.dataset.renderData.progressList||"txp-control-progress"===c.data("role")||c.data("role")===b.dataset.renderData.progressIndicator||c.data("role")===b.dataset.renderData.playedPoint||c.data("role")===b.dataset.renderData.playedProgress||c.data("role")===b.dataset.renderData.loadedProgress||c.hasClass("txp_interact_dot")||c.hasClass("txp_progress_role")},progressOnMouseMove:function(){var a,b,c,d=!1,f=this,g=-1,h=!1,i=function(b){g=b.pageX-f.context.$mod.$playermod.offset().left,g!==-1&&(g>a?g=a:g<0&&(g=0),c=parseInt(g/a*1e4)/100)},j=function(b){var c=parseInt(g/a*1e4)/100;0===g?0:parseInt(g/a*1e4)/100;f.updateProgressWidth(c+"%"),"mousedown"==b&&f.context.msg.broadcast("userSeekStart",{time:parseInt(f.context.dataset.duration*c/100)}),"mouseup"==b&&f.context.msg.broadcast("userSeekEnd",{time:parseInt(f.context.dataset.duration*c/100)})};this.context.$mod.$progressmod.on("mouseenter",function(){a=f.dataset.$progressList.width(),b=f.dataset.$progressIndicator.width();var c=f.dataset.$playStartTimePoint,d=f.dataset.$playEndTimePoint;f.context.dataset.skipPrelude?(f.context.dataset.playStartTime&&c.show(),f.context.dataset.playEndTime&&d.show()):(c.hide(),d.hide())}).on("mouseleave",function(){f.dataset.$playStartTimePoint.hide(),f.dataset.$playEndTimePoint.hide()}),e("body").on("mousedown",function(a){f.context.dataset.isPlayingAd||f.isVideoCanNotPlay()||f.context.dataset.isImgAdLoadingShowing||f.isInProgressArea(a)&&(f.context.dataset.isDisableProgress||(h=!0,d=!0,f.context.dataset.isVideoSeeking=!0,f.context.msg.broadcast("pause"),i(a),j("mousedown")))}).on("mousemove",function(a){f.context.dataset.isPlayingAd||f.context.dataset.isImgAdLoadingShowing||f.isVideoCanNotPlay()||(i(a),h&&d&&j())}).on("mouseup",function(b){if(!f.context.dataset.duration)return void(h=!1);if(!f.context.dataset.isPlayingAd&&!f.context.dataset.isImgAdLoadingShowing&&h){f.context.dataset.playState;i(b);var c=parseInt(f.context.dataset.duration*(g/a));j("mouseup"),f.context.msg.broadcast("seekTo",c),d=!1,h=!1}})},isVideoCanNotPlay:function(){var a=this.context.dataset.playState;return 0===a||a===-1},progressOnTouch:function(){var a,b,c,d,e=this,f=function(a){var f=parseInt(b/c*1e4)/100,g=parseInt((b-d/2)/c*1e4)/100;e.updateProgressWidth(g+"%"),e.context.msg.broadcast("progressUpdate",f),"touchstart"==a&&e.context.msg.broadcast("userSeekStart",{time:parseInt(e.context.dataset.duration*f/100)}),"touchend"==a&&e.context.msg.broadcast("userSeekEnd",{time:parseInt(e.context.dataset.duration*f/100)})};this.context.$mod.$progressmod.on("touchstart",function(g){e.context.dataset.isPlayingAd||(g=g.originalEvent?g.originalEvent:g,g&&g.touches&&g.touches.length&&(g=g.touches[0],a=e.dataset.$progressList.offset().left,b=g.pageX-a,c=e.dataset.$progressList.width(),d=e.dataset.$progressIndicator.width(),f("touchstart"),e.context.dataset.isControlTouch=!0,e.context.msg.broadcast("pause")))}).on("touchmove",function(c){e.context.dataset.isPlayingAd||(c=c.originalEvent?c.originalEvent:c,c&&c.touches&&c.touches.length&&(c.preventDefault(),c=c.touches[0],b=c.pageX-a,b>e.dataset.$progressList.width()?b=e.dataset.$progressList.width():b<0&&(b=0),f(),e.context.dataset.isControlTouch=!0))}).on("touchend",function(a){if(!e.context.dataset.isPlayingAd){var d=parseInt(e.context.dataset.duration*(b/c));d>=e.context.dataset.duration&&(d=e.context.dataset.duration-1),f("touchend"),e.context.dataset.isControlTouch=!1,e.context.msg.broadcast("seekTo",d)}})},getCanplayTimeLimit:function(){var a;return"number"==e.type(this.context.dataset.canPlayTime)&&this.context.dataset.duration&&(a=this.context.dataset.canPlayTime/this.context.dataset.duration,a=100*a),a},updateBufferedBar:function(a){if(this.context.dataset.duration&&"number"===e.type(a)){var b=parseInt(100*a/this.context.dataset.duration);b>=99&&(b=100),this.dataset.$loadedProgress.css({width:b+"%"})}},updateProgressWidth:function(a){var b=this.getCanplayTimeLimit();b&&(a=parseFloat((a+"").replace("%","")),a>b&&(a=b),a+="%"),this.dataset.$playprogress.css("width",a),this.dataset.$playpoint.css("left",a)},updateSkipPrelude:function(){var a=this.context.dataset,b=this.dataset.$playStartTimePoint,c=this.dataset.$playEndTimePoint,d=a.playStartTime?+a.playStartTime:0,e=a.playEndTime?+a.playEndTime:0,f=this.context.dataset.duration||0;d?b.css("left",d/f*100+"%"):b.css("left","-20px"),e?c.css("left",e/f*100+"%"):c.css("left","-20px")},addEventListerner:function(){var a=this;this.dataset.eventsList={},a.context.dataset.duration?a.updateSkipPrelude():this.dataset.eventsList[f.getUniqueMsgKey("getVideoUrlSuccess")]=function(){a.updateSkipPrelude()},this.dataset.eventsList[f.getUniqueMsgKey("seekStart")]=function(b){if(a.context.dataset.isControlShow&&!a.context.dataset.isPlayingAd&&a.context.dataset.duration){var c=b.seekTime/a.context.dataset.duration;c=100*c+"%",a.updateProgressWidth(c),b.currentTimeWhenSeekStart&&b.currentTimeWhenSeekStart>b.seekTime&&a.updateBufferedBar(b.seekTime)}},this.dataset.eventsList[f.getUniqueMsgKey("videoTimeUpdate")]=function(){if(!a.context.dataset.isPlayingAd&&a.context.dataset.duration&&!a.context.dataset.isVideoSeeking){var b=a.context.dataset.currentTime;if(a.context.dataset.isControlShow||b%5===0){var c=b/a.context.dataset.duration;c=100*c+"%",a.updateProgressWidth(c),a.updateBufferedBar(a.context.dataset.bufferedTime)}}},this.context.dataset.$playermod.on("mouseenter",function(){if(!a.context.dataset.isPlayingAd&&a.context.dataset.duration&&!a.context.dataset.isVideoSeeking&&0!=a.context.dataset.playState){var b=a.context.dataset.currentTime,c=b/a.context.dataset.duration;c=100*c+"%",a.updateProgressWidth(c),a.updateBufferedBar(a.context.dataset.bufferedTime)}}),this.dataset.eventsList[f.getUniqueMsgKey("videoProgress")]=function(){a.context.dataset.isControlShow&&1===a.context.dataset.playState&&a.updateBufferedBar(a.context.dataset.bufferedTime)},this.dataset.eventsList[f.getUniqueMsgKey("vidChange")]=function(){a.updateBufferedBar(0),a.updateProgressWidth(0)},this.dataset.eventsList[f.getUniqueMsgKey("videoPlaying")]=function(b){b&&"endingad"===b.playListType&&(a.context.dataset.bufferedTime=0,a.updateBufferedBar(0),a.updateProgressWidth(0))},this.dataset.eventsList[f.getUniqueMsgKey("videoEnd")]=function(b){b&&b.isAllEnd&&(a.updateBufferedBar(0),a.updateProgressWidth(0))},this.dataset.eventsList[f.getUniqueMsgKey("videoEnd")]=function(b){b&&b.isTheLastFilm&&(a.updateBufferedBar(0),a.updateProgressWidth(0))},this.dataset.eventsList[f.getUniqueMsgKey("beforeVideoPlay")]=function(b){a.updateBufferedBar(0),a.updateProgressWidth(0)},this.dataset.eventsList[f.getUniqueMsgKey("speedyTouchmove")]=function(b){100*b/a.context.dataset.duration+"%";a.updateProgressWidth()},this.dataset.eventsList[f.getUniqueMsgKey("userStopVideo")]=function(b){a.updateBufferedBar(0),a.updateProgressWidth(0)},this.dataset.eventsList[f.getUniqueMsgKey("disableProgress")]=function(b){a.context.dataset.isDisableProgress=!0},this.dataset.eventsList[f.getUniqueMsgKey("videoPlaying")]=function(b){b&&"film"===b.playListType&&(a.context.dataset.isDisableProgress=!1)},e.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)}),f.mobile?this.progressOnTouch():this.progressOnMouseMove()}},Txplayer.register("UiProgress",d)},203:function(a,b){a.exports='<txpdiv class="txp_progress_list" data-role="<%=progressList%>">\r\n  <txpdiv class="txp_progress_load" style="width:0%" data-role="<%=loadedProgress%>"></txpdiv>\r\n  <txpdiv class="txp_progress_play" style="width:0%" data-role="<%=playedProgress%>"></txpdiv>\r\n  <txpdiv class="txp_interact_progress_list">\r\n    <txpdiv class="txp_interact_dot" style="left: -20px" data-role="<%=playStartTimePoint%>"></txpdiv>\r\n    <txpdiv class="txp_interact_dot" style="left: -20px" data-role="<%=playEndTimePoint%>"></txpdiv>\r\n  </txpdiv>\r\n</txpdiv>\r\n\r\n<txpdiv class="txp_btn_scrubber" style="left:0%" data-role="<%=playedPoint%>">\r\n  <txpdiv class="txp_scrubber_indicator" data-role="<%=progressIndicator%>"></txpdiv>\r\n</txpdiv>'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(176)},176:function(a,b){function c(a){d=Txplayer.$,this.dataset={},this.context=a,this.addEventListerner()}var d=Txplayer.$,e=Txplayer.util;c.prototype={renderList:function(a){var b=this;b.dataset.list=a,b.dataset.$dots=[];var c=0;this.dataset.popPointId=e.getUrlParam("videoMark"),d.each(a,function(a,e){e.pt&&e.ti&&(c=e.pt/1e3/b.context.dataset.duration*100,c<=100&&(d(".txp_interact_progress_list").append('<txpdiv class="txp_interact_dot" data-role="txp-control-progress-normal-dot" data-index="'+a+'"style="left:'+c+'%"></txpdiv>'),e.id==b.dataset.popPointId&&b.dealPopPoint(a,c)))}),b.dataset.$dots=d(".txp_interact_progress_list").find('[data-role="txp-control-progress-normal-dot"]'),b.addDotsEvent()},dealPopPoint:function(a,b){var c=this;if(c.dataset.popPointIndex=a,c.dataset.list[a].ti){d(".txp_progress_bar_container").append('<txpdiv class="txp_interact_dot_tips txp_none" data-time="'+c.dataset.list[a].pt/1e3+'" data-per="'+b+'" style="left:'+b+'%"> <txpdiv class="txp_interact_dot_tips_text">'+c.dataset.list[a].ti+'</txpdiv> <txpdiv class="txp_interact_dot_tips_arrow"></txpdiv></txpdiv>'),c.dataset.dopTips=d(".txp_interact_dot_tips"),c.dataset.dopTipsArrow=d(".txp_interact_dot_tips_arrow");var e=d(".txp_interact_dot_tips").outerWidth?d(".txp_interact_dot_tips").outerWidth()/2:d(".txp_interact_dot_tips").width()/2,f=d(".txp_progress_bar_container").outerWidth?d(".txp_progress_bar_container").outerWidth():d(".txp_progress_bar_container").width()/2,g=e/f*100,h=100-g,i=e;b<g?(i=b*f/100,i<16&&(i=16),b=g):b>h&&(i=2*e-(f-b*f/100),i>2*e-16&&(i=2*e-16),b=h),c.dataset.dopTips.css({left:b+"%"}),c.dataset.dopTipsArrow.css({left:i+"px"}),this.context.dataset.isPlayingAd?c.context.msg.on("videoPlaying.dotTips",function(a){a&&"film"==a.playListType&&(c.context.msg.off("videoPlaying.dotTips"),c.showDopTips())}):c.showDopTips()}},showDopTips:function(){var a=this;a.context.msg.broadcast("showUicontrol"),a.context.dataset.disableHideControl=!0,a.dataset.isShowDopTips=!0,d(".txp_interact_dot_tips").removeClass("txp_none"),setTimeout(function(){a.context.dataset.disableHideControl=!1,a.context.msg.broadcast("hideUicontrol"),a.dataset.isShowDopTips=!1,d(".txp_interact_dot_tips").addClass("txp_none")},1e4),d(".txp_interact_dot_tips").on("click",function(){var b=d(this).data("time");a.context.dataset.disableHideControl=!1,a.dataset.isShowDopTips=!1,d(".txp_interact_dot_tips").addClass("txp_none"),a.context.msg.broadcast("seekTo",b)}),d(".txp_interact_dot_tips").on("mouseenter mouseleave mousemove",function(a){a.stopPropagation()})},addDotsEvent:function(){var a=this;a.dataset.$dots.on("mouseenter",function(){var b=parseInt(d(this).data("index"));return a.dataset.isShowDopTips&&b==a.dataset.popPointIndex?void(a.context.dataset.disableShowPreview=!0):(d(".txp_interact_dot_tips").addClass("txp_none"),void(a.dataset.list&&a.dataset.list[b]&&(d(".txp_tooltip_preview .txp_tooltip_dot_text").removeClass("txp_none"),d(".txp_tooltip_preview .txp_tooltip_dot_text").html(e.xss(a.dataset.list[b].ti)))))}),a.dataset.$dots.on("mouseleave",function(){a.context.dataset.disableShowPreview=!1,d(".txp_tooltip_preview .txp_tooltip_dot_text").addClass("txp_none"),d(".txp_tooltip_preview .txp_tooltip_dot_text").html("")})},clearList:function(){this.dataset.$dots&&this.dataset.$dots.length>0&&this.dataset.$dots.remove(),this.dataset.dopTips&&this.dataset.dopTips.remove()},addEventListerner:function(){var a=this;this.dataset.eventsList={},this.dataset.eventsList["getVideoMarkDataReady.1"]=function(b){a.renderList(b)},this.dataset.eventsList[e.getUniqueMsgKey("vidChange")]=function(b){a.clearList(),a.dataset={}},d.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)})}},Txplayer.register("UiNormalPoint",c)}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(151)},151:function(a,b,c){function d(a){e=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util,g=c(152);d.prototype={init:function(){this.write(),this.addEventListener()},write:function(){var a={playBtn:"txp-ui-control-playbtn",tips:"txp-ui-control-playbtn-tips",isUseH5Type:f.isUseH5Type(),tabindex:Txplayer.dataset.tabindex++},b=e.tmpl(g,a);this.context.$mod.$buttonsleftmod.append(b),this.dataset.$playbtn=this.context.$mod.$buttonsleftmod.find('[data-role="'+a.playBtn+'"]'),this.dataset.$tips=this.context.$mod.$buttonsleftmod.find('[data-role="'+a.tips+'"]')},remove:function(){this.dataset.$playbtn.remove()},initPlayState:function(){var a=this.context.dataset.playState;1===a||3===a?(this.dataset.$playbtn.attr("data-status","pause"),this.dataset.$tips.html("暂停")):0===a?(this.dataset.$playbtn.attr("data-status","replay"),this.dataset.$tips.html("重新播放")):(this.dataset.$playbtn.attr("data-status","play"),this.dataset.$tips.html("播放"))},bindMouseEvent:function(){var a=this;this.dataset.$playbtn.on("mouseenter",function(){a.dataset.$playbtn.addClass(Txplayer.dataset.btnHoverClass)}).on("mouseleave",function(){a.dataset.$playbtn.removeClass(Txplayer.dataset.btnHoverClass)})},stopPauseTimer:function(){this.dataset.pauseTimer&&(clearTimeout(this.dataset.pauseTimer),this.dataset.pauseTimer=null)},addEventListener:function(){var a=this;this.initPlayState(),this.dataset.$playbtn.on(Txplayer.dataset.clickEventName,function(){var b=(e(this),a.context.dataset.isPlayingAd);b||("pause"===a.dataset.$playbtn.attr("data-status")?(a.context.msg.broadcast("pause"),a.context.msg.broadcast("userPausePlayer")):("replay"===a.dataset.$playbtn.attr("data-status")?(a.context.msg.broadcast("beforeVideoRePlay"),a.context.msg.broadcast("playControl",{vid:a.context.dataset.vid,connectionPlayType:1,playStartTime:a.context.dataset.playStartTime,playEndTime:a.context.dataset.playEndTime})):a.context.msg.broadcast("playControl",{connectionPlayType:1}),a.context.msg.broadcast("userPlayPlayer")))}),this.dataset.eventsList={},this.dataset.eventsList[f.getUniqueMsgKey("videoPlay")]=function(){a.dataset.isAllEnd=!1,a.dataset.$playbtn.attr("data-status","pause"),a.dataset.$tips.html("暂停")},this.dataset.eventsList[f.getUniqueMsgKey("videoPause")]=function(b){b&&"film"!=b.playListType||a.context.dataset.isDefinitionSwitching&&!a.context.dataset.useChromeHls||a.context.dataset.isVideoSeeking||(a.stopPauseTimer(),a.dataset.pauseTimer=setTimeout(function(){if((!a.context.dataset.isDefinitionSwitching||a.context.dataset.useChromeHls)&&!a.context.dataset.isVideoSeeking&&!a.dataset.isAllEnd&&2===a.context.dataset.playState){if(a.context.dataset.canPlayTime&&a.context.dataset.currentTime>=a.context.dataset.canPlayTime)return a.dataset.isAllEnd=!0,a.dataset.$playbtn.attr("data-status","replay"),a.dataset.$playbtn.removeClass("txp_disabled"),void a.dataset.$tips.html("重新播放");a.dataset.$playbtn.attr("data-status","play"),a.dataset.$tips.html("播放")}},200))},this.dataset.eventsList[f.getUniqueMsgKey("seekEnd")]=function(b){"h5"!=a.context.config.playerType&&2===a.context.dataset.playState&&(!a.context.dataset.canPlayTime||a.context.dataset.currentTime<a.context.dataset.canPlayTime)&&(a.dataset.$playbtn.attr("data-status","play"),a.dataset.$tips.html("播放"))},this.dataset.eventsList[f.getUniqueMsgKey("videoEnd")]=function(b){b&&b.isAllEnd&&(a.dataset.isAllEnd=!0,a.context.msg.broadcast("pause"),a.dataset.$playbtn.attr("data-status","replay"),a.dataset.$playbtn.removeClass("txp_disabled"),a.dataset.$tips.html("重新播放"))},this.dataset.eventsList[f.getUniqueMsgKey("vidChange")]=function(b){a.dataset.$playbtn.attr("data-status","play"),a.dataset.$tips.html("播放")},this.dataset.eventsList[f.getUniqueMsgKey("beforeVideoPlay")]=function(b){a.dataset.isAllEnd=!1},this.dataset.eventsList[f.getUniqueMsgKey("videoPlaying")]=function(b){setTimeout(function(){if("film"!=a.context.dataset.currentPlayListType){if(a.dataset.$playbtn.hasClass("txp_disabled"))return;a.dataset.$playbtn.addClass("txp_disabled")}else a.dataset.$playbtn.removeClass("txp_disabled")},100)},this.dataset.eventsList[f.getUniqueMsgKey("userStopVideo")]=function(b){a.initPlayState(),a.dataset.$playbtn.removeClass("txp_disabled")},this.dataset.eventsList[f.getUniqueMsgKey("disablePlayBtn")]=function(b){a.dataset.$playbtn.addClass("txp_disabled")},e.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)}),f.mobile||this.bindMouseEvent()}},Txplayer.register("UiControlPlay",d)},152:function(a,b){a.exports='<txpdiv data-role="<%=playBtn%>" class="txp_btn txp_btn_play" data-status="play" aria-label="播放/暂停">\r\n  <% if(isUseH5Type){ %>\r\n  <svg class="txp_icon txp_icon_play" viewBox="0 0 60 60" >\r\n\t<use class="txp_svg_play" xlink:href="#txp_svg_play" />\r\n\t<use class="txp_svg_pause" xlink:href="#txp_svg_pause" />\r\n\t<use class="txp_svg_stop" xlink:href="#txp_svg_stop" />\r\n\t<use class="txp_svg_replay" xlink:href="#txp_svg_replay" />\r\n  </svg>\r\n  <% }else{%>\r\n  <svg class="txp_icon txp_icon_play" version="1.1" viewBox="0 0 36 36">\r\n    <use class="txp_svg_symbol txp_svg_play" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_play"></use>\r\n    <use class="txp_svg_symbol txp_svg_pause" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_pause"></use>\r\n    <use class="txp_svg_symbol txp_svg_stop" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_stop"></use>\r\n    <use class="txp_svg_symbol txp_svg_replay" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_replay"></use>\r\n  </svg>\r\n  <txpdiv data-role="<%=tips%>" class="txp_tooltip">播放</txpdiv>\r\n  <% } %>\r\n</txpdiv>'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(189)},189:function(a,b,c){function d(a){e=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util,g=c(190),h=c(191),i=c(192);Txplayer.apiList;d.prototype={init:function(){this.dataset.playerConfig=this.context.config,this.dataset.nextData=null,this.context.dataset.nextVideoInfo={},this.dataset.nextVideoInfoCopy={},this.context.dataset.nextVid=this.dataset.playerConfig.nextVid,this.dataset.getNextVid="function"===e.type(this.dataset.playerConfig.getNextVid)?this.dataset.playerConfig.getNextVid:e.noop,this.write(),this.addEventListerner(),this.exportsModuleApis()},write:function(){var a={next:"txp-ui-control-play-next",hideClass:Txplayer.dataset.hideClass,tabindex:Txplayer.dataset.tabindex++,nextTip:"txp-next-tip"};this.dataset.renderData=a;var b=e.tmpl(g,a);this.context.$mod.$buttonsleftmod.append(b),this.dataset.$next=this.context.$mod.$buttonsleftmod.find('[data-role="'+a.next+'"]'),this.dataset.$nextTip=this.context.$mod.$buttonsleftmod.find('[data-role="'+a.nextTip+'"]');var c={tipMod:"txp-next-tip-mod",tipText:"txp-next-tip-text",tipPreview:"txp-next-tip-preview",hideClass:Txplayer.dataset.hideClass},d=e.tmpl(h,c);this.context.$mod.$playermod.append(d),this.dataset.$tipMod=this.context.$mod.$playermod.find('[data-role="'+c.tipMod+'"]'),this.dataset.$tipText=this.dataset.$tipMod.find('[data-role="'+c.tipText+'"]'),this.dataset.$tipPreview=this.dataset.$tipMod.find('[data-role="'+c.tipPreview+'"]');var f={tipContentMod:"txp-next-tip-content-mod",tipContentText:"txp-next-tip-content-text",tipContentCancle:"txp-next-tip-content-cancle",tipContentPlay:"txp-next-tip-content-play",tipContentPoster:"txp-next-tip-content-poster",hideClass:Txplayer.dataset.hideClass},j=e.tmpl(i,f);this.context.$mod.$playermod.append(j),this.dataset.$tipContentMod=this.context.$mod.$playermod.find('[data-role="'+f.tipContentMod+'"]'),this.dataset.$tipContentText=this.dataset.$tipContentMod.find('[data-role="'+f.tipContentText+'"]'),this.dataset.$tipContentCancle=this.dataset.$tipContentMod.find('[data-role="'+f.tipContentCancle+'"]'),this.dataset.$tipContentPlay=this.dataset.$tipContentMod.find('[data-role="'+f.tipContentPlay+'"]'),this.dataset.$tipContentPoster=this.dataset.$tipContentMod.find('[data-role="'+f.tipContentPoster+'"]'),this.initDisplay()},remove:function(){this.dataset.$next.remove(),this.dataset.$tipMod.remove(),this.dataset.$tipContentMod.remove()},initDisplay:function(){1==this.context.dataset.nextVid?(this.dataset.$next.removeClass(Txplayer.dataset.hideClass),this.dataset.$next.removeClass("txp_disabled"),this.writeTips()):0==this.context.dataset.nextVid?(this.dataset.$tipMod.addClass(Txplayer.dataset.hideClass),this.dataset.$nextTip.addClass(Txplayer.dataset.hideClass),this.dataset.$next.addClass(Txplayer.dataset.hideClass)):(this.dataset.$next.removeClass(Txplayer.dataset.hideClass),this.dataset.$next.addClass("txp_disabled"))},writeTips:function(){this.dataset.nextData&&this.dataset.nextData.title&&this.dataset.nextData.preview&&(this.dataset.$tipText.html(f.xss(this.dataset.nextData.title)),this.dataset.$tipContentText.html(f.xss(this.dataset.nextData.title)),this.dataset.$tipPreview.attr("src",this.dataset.nextData.preview)),this.dataset.nextData&&this.dataset.nextData.previewPoster&&this.dataset.$tipContentPoster.css({"background-image":"url("+this.dataset.nextData.previewPoster+")"})},canclePlayTheNext:function(){this.dataset.isCancle=!0,clearTimeout(this.dataset.timer),this.dataset.timer=null,this.dataset.$tipContentMod.addClass(Txplayer.dataset.hideClass)},doPlayTheNext:function(a,b){var c=this;if(this.dataset.$tipContentMod.addClass(Txplayer.dataset.hideClass),c.dataset.nextData.showCountdown)return void c.nofreshDoPlayTheNext(c.dataset.nextVideoInfo,b);try{this.context.userMsg.broadcast("beforePlayNext",{vid:a||c.dataset.nextData.pageUrl})}catch(d){}},nofreshDoPlayTheNext:function(a,b){var c=this;if(11===a.vid.length){try{c.context.userMsg.broadcast("beforePlayNext",{vid:a.vid})}catch(d){}var e={vid:a.vid,nextVid:a.nextVid,bullet:a.bullet,bulletId:a.bulletId,duration:a.duration,playStartTime:a.playStartTime,playEndTime:a.playEndTime,isNeedPay:a.isNeedPay,title:a.title,autoplay:!a.hasOwnProperty("autoplay")||a.autoplay,defaultDefinition:a.defaultDefinition};b.hasOwnProperty("connectionPlayType")&&(e.connectionPlayType=b.connectionPlayType),c.context.msg.broadcast("playControl",e)}},playTheNext:function(a){if(f.showInfo("uiPlayNext.playTheNext",a),a=a||{},1==this.context.dataset.nextVid){var b,c=this,d=this.context.dataset.vid;try{b=c.dataset.getNextVid(d),c.dataset.nextVideoInfo=b}catch(e){f.showInfo("[playTheNext.getNextVid.error]",e)}if(!b||!b.vid)return void f.showError("播放下个视频失败","找不到vid");if(c.dataset.nextData&&(c.dataset.nextData.pageUrl||c.dataset.nextData.showCountdown)&&a.isAllEnd&&!f.os.ipad)return this.dataset.$tipContentMod.removeClass(Txplayer.dataset.hideClass),this.dataset.timer&&(clearTimeout(this.dataset.timer),this.dataset.timer=null),void(this.dataset.timer=setTimeout(function(){c.dataset.isCancle||c.doPlayTheNext(c.dataset.nextData.pageUrl,a)},1e4));if(c.dataset.nextData&&c.dataset.nextData.pageUrl&&!c.dataset.nextData.showCountdown)try{c.context.userMsg.broadcast("beforePlayNext",{vid:b.pageUrl})}catch(e){}else c.nofreshDoPlayTheNext(b,a),c.context.msg.broadcast("updateNextVideoInfo")}},showTip:function(){var a=this;a.dataset.nextData&&a.dataset.nextData.title&&a.dataset.nextData.preview?a.dataset.$tipMod.removeClass(Txplayer.dataset.hideClass):a.dataset.$nextTip.removeClass(Txplayer.dataset.hideClass)},hideTip:function(){var a=this;a.dataset.nextData&&a.dataset.nextData.title&&a.dataset.nextData.preview?a.dataset.$tipMod.addClass(Txplayer.dataset.hideClass):a.dataset.$nextTip.addClass(Txplayer.dataset.hideClass)},bindMouseEvent:function(){var a=this;this.dataset.$next.on("mouseenter",function(b){e(b.relatedTarget).parents().hasClass("txp_btn_next")||a.showTip()}).on("mouseleave",function(b){e(b.relatedTarget).parents().hasClass("txp_btn_next")||a.hideTip()})},addEventListerner:function(){var a=this;this.dataset.$next.on(Txplayer.dataset.clickEventName,function(){a.context.dataset.nextVid&&(a.hideTip(),a.playTheNext({connectionPlayType:3}))}),this.dataset.$tipContentCancle.on(Txplayer.dataset.clickEventName,function(){a.canclePlayTheNext(),a.context.msg.broadcast("showUicontrol")}),this.dataset.$tipContentPlay.on(Txplayer.dataset.clickEventName,function(){a.doPlayTheNext(a.dataset.nextData.pageUrl,{connectionPlayType:3})}),this.dataset.eventsList={},this.dataset.eventsList[f.getUniqueMsgKey("vidChange")]=function(){a.dataset.isCancle=null,a.dataset.nextData=null,a.dataset.$tipContentMod.addClass(Txplayer.dataset.hideClass)},this.dataset.eventsList[f.getUniqueMsgKey("hideUiControl")]=function(){a.hideTip()},this.dataset.eventsList[f.getUniqueMsgKey("beforeVideoPlay")]=function(){a.canclePlayTheNext(),a.dataset.isCancle=null},this.dataset.eventsList[f.getUniqueMsgKey("userStopVideo")]=function(){a.canclePlayTheNext(),a.dataset.isCancle=null},this.dataset.eventsList[f.getUniqueMsgKey("videoEnd")]=function(b){b.isAllEnd&&a.context.dataset.nextVid&&!a.context.dataset.canPlayTime&&(a.context.dataset.nextVideoInfo.vid||"v3"!=a.context.config.version||a.context.userApi.stop&&a.context.userApi.stop(),a.context.dataset.disableAutoPlayNext||a.context.dataset.isLoopPlay||a.playTheNext({connectionPlayType:2,isAllEnd:!0}))},this.dataset.eventsList[f.getUniqueMsgKey("updateNextVideoInfo")]=function(){var b=!a.context.dataset.isLoopPlay&&!a.context.dataset.disableAutoPlayNext;b?a.context.dataset.nextVideoInfo=a.dataset.nextVideoInfoCopy:a.context.dataset.nextVideoInfo={}},this.dataset.eventsList[f.getUniqueMsgKey("userPlayNext")]=function(b){a.context.dataset.nextVid&&(a.hideTip(),a.playTheNext(b))},e.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)}),f.mobile||this.bindMouseEvent()},exportsModuleApis:function(){var a=this;this.dataset.moduleApis={},this.dataset.moduleApis.getNextData=function(b,c){return a.dataset.nextData},this.dataset.moduleApis.setNextVid=function(b,c){if(a.context.dataset.nextVid=b.nextVid,1==a.context.dataset.nextVid){var d,e=a.context.dataset.vid;try{d=a.dataset.getNextVid(e)}catch(g){f.showInfo("[playTheNext.getNextVid.error]",g)}d&&(a.dataset.nextData={vid:e,nextVid:d.vid},d.title&&(a.dataset.nextData.title=d.title),d.preview&&(a.dataset.nextData.preview=d.preview),d.showCountdown&&(a.dataset.nextData.showCountdown=d.showCountdown),d.pageUrl&&(a.dataset.nextData.pageUrl=d.pageUrl),d.previewPoster&&(a.dataset.nextData.previewPoster=d.previewPoster),"v.qq.com"!==location.hostname||f.os.ipad||a.dataset.nextData.pageUrl||a.context.dataset.canPlayTime||a.context.dataset.isLoopPlay?(a.context.dataset.nextVideoInfo={},a.dataset.nextVideoInfoCopy={}):(a.context.dataset.nextVideoInfo.vid=d.vid,a.context.dataset.nextVideoInfo.cid=d.cid||a.context.dataset.cid,a.dataset.nextVideoInfoCopy.vid=d.vid,a.dataset.nextVideoInfoCopy.cid=d.cid||a.context.dataset.cid))}else a.context.dataset.nextVideoInfo={},a.dataset.nextVideoInfoCopy={};a.initDisplay(),a.context.msg.broadcast("updateNextVideoInfo")},e.extend(this.context.userApi,this.dataset.moduleApis),e.each(this.dataset.moduleApis,function(b,c){a.context.msg.on(b,c)})}},Txplayer.register("UiPlayNext",d)},190:function(a,b){a.exports='<txpdiv data-role="<%=next%>" class="txp_btn txp_btn_next" data-report="play-next" aria-label="下一集">\r\n  <svg class="txp_icon txp_icon_next" version="1.1" viewBox="0 0 36 36">\r\n    <use class="txp_svg_symbol txp_svg_next" xlink:href="#txp_svg_next" />\r\n  </svg>\r\n  <txpdiv class="txp_tooltip <%=hideClass%>" data-role="<%=nextTip%>">下一集</txpdiv>\r\n</txpdiv>'},191:function(a,b){a.exports='<txpdiv class="txp_hint_next <%=hideClass%>" data-role="<%=tipMod%>">\r\n<txpdiv class="txp_next_pic"><img data-role="<%=tipPreview%>" alt="" /></txpdiv>\r\n\t<txpdiv class="txp_next_wording">\r\n\t\t<txpdiv class="txp_label">下一个</txpdiv>\r\n\t\t<txpdiv class="txp_next_title" data-role="<%=tipText%>"></txpdiv>\r\n\t</txpdiv>\r\n</txpdiv>\r\n'},192:function(a,b){a.exports='<txpdiv class="txp_overlay_next <%=hideClass%>" data-role="<%=tipContentMod%>">\r\n<div class="txp_next_poster" data-role="<%=tipContentPoster%>" style="background-image:url()"></div>\r\n<txpdiv class="txp_next_content">\r\n\t<txpdiv class="txp_label">即将播放</txpdiv>\r\n\t<txpdiv class="txp_next_title" data-role="<%=tipContentText%>"></txpdiv>\r\n\t<a class="txp_cancel" href="javascript:" data-role="<%=tipContentCancle%>">取消</a>\r\n\t<button class="txp_btn txp_btn_play_lg" data-status="play" data-role="<%=tipContentPlay%>">\r\n\t\t<svg class="txp_icon txp_icon_play" viewBox="0 0 36 36" >\r\n\t\t\t<use class="txp_svg_symbol txp_svg_play" xlink:href="#txp_svg_play" />\r\n\t\t</svg>\r\n\t\t<svg class="txp_icon_cirlce" viewBox="0 0 72 72" >\r\n\t\t\t<circle r="34" cy="36" cx="36"></circle>\r\n\t\t</svg>\r\n\t</button>\r\n</txpdiv>\r\n</txpdiv>'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(174)},174:function(a,b,c){function d(a){this.dataset={},this.context=a,this.support()&&this.init()}var e=Txplayer.$,f=Txplayer.util,g=c(175),h=d.prototype;h.init=function(){this.dataset.hideClass=Txplayer.dataset.hideClass,this.dataset.onStatus="on",this.dataset.offStatus="off",this.dataset.tipsFlag=0,this.dataset.eventsList={},this.dataset.isLoopPlay=!1,this.write(),this.addEventListener()},h.getHistorySetting=function(){var a=f.getData(Txplayer.dataset.localStorageKey.loopPlaySetting);try{a=JSON.parse(a)}catch(b){a={}}this.dataset.tipsFlag=a.tipsFlag},h.setData=function(a,b){var c=f.getData(Txplayer.dataset.localStorageKey.loopPlaySetting)||{};c[a]=b,f.setData(Txplayer.dataset.localStorageKey.loopPlaySetting,JSON.stringify(c))},h.write=function(){var a=this,b={loopPlayBtn:"txp-ui-control-loop-play-btn",loopPlayStatus:"txp-ui-control-loop-play-status",loopPlayTips:"txp-ui-control-loop-play-tips",loopPlayText:"txp-ui-control-loop-play-text"};this.dataset.renderData=b;var c=e.tmpl(g,b);this.context.$mod.$buttonsleftmod.append(c),["loopPlayBtn","loopPlayStatus","loopPlayTips","loopPlayText"].forEach(function(c){a.dataset["$"+c]=a.context.$mod.$buttonsleftmod.find('[data-role="'+b[c]+'"]')}),this.reset()},h.reset=function(){this.dataset.$loopPlayTips.addClass(this.dataset.hideClass),this.dataset.$loopPlayStatus.attr("data-status",this.dataset.offStatus),this.dataset.$loopPlayText.text("打开循环播放"),this.dataset.hasTrigger=!1,this.context.dataset.isLoopPlay=!1},h.support=function(){return window.VIDEO_INFO&&22==window.VIDEO_INFO.type||this.context.config.showLoopPlay},h.addEventListener=function(){var a=this;this.dataset.$loopPlayTips.on("mouseenter",function(){a.dataset.$loopPlayText.hide()}),this.dataset.$loopPlayBtn.on("click",function(){var b=a.dataset.$loopPlayStatus.attr("data-status"),c="";b===a.dataset.offStatus?(c="关闭循环播放",b=a.dataset.onStatus):(c="打开循环播放",b=a.dataset.offStatus),a.dataset.$loopPlayStatus.attr("data-status",b),a.context.dataset.isLoopPlay=b===a.dataset.onStatus,a.dataset.$loopPlayText.text(c),a.context.msg.broadcast("reportUsrAction",{usr_action:"loop-play-click:"+b}),a.context.msg.broadcast("updateNextVideoInfo")}).on("mouseenter",function(){a.dataset.$loopPlayText.show()}).on("mouseleave",function(){a.dataset.$loopPlayText.hide()}),this.dataset.eventsList[f.getUniqueMsgKey("videoPlay")]=function(b){a.getHistorySetting(),"film"!==b.playListType||a.dataset.hasTrigger||(a.dataset.hasTrigger=!0,a.dataset.tipsFlag?a.dataset.$loopPlayTips.addClass(a.dataset.hideClass):(a.dataset.$loopPlayTips.removeClass(a.dataset.hideClass),a.setData("tipsFlag",1),setTimeout(function(){a.dataset.$loopPlayTips.addClass(a.dataset.hideClass)},5e3)))};var b=!1;this.dataset.eventsList["beforeUiControlShow.showLoopPlay"]=function(){a.context.dataset.isControlShow&&!b&&(b=!0,a.context.msg.broadcast("reportUsrAction",{usr_action:"loop-play-view"}))},this.dataset.eventsList["hideUiControl.hideLoopPlay"]=function(){b=!1},this.dataset.eventsList[f.getUniqueMsgKey("videoEnd")]=function(b){b.isAllEnd&&a.context.dataset.isLoopPlay&&(a.context.msg.broadcast("beforeVideoRePlay"),a.context.msg.broadcast("playControl",{connectionPlayType:1,vid:a.context.dataset.vid,playStartTime:a.context.dataset.playStartTime,playEndTime:a.context.dataset.playEndTime}))},this.dataset.eventsList[f.getUniqueMsgKey("vidChange")]=function(b){a.reset()},e.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)})},Txplayer.register("UiLoopPlay",d)},175:function(a,b){a.exports='<txpdiv class="txp_btn txp_btn_loop" data-role="<%=loopPlayStatus%>">\r\n    <svg data-role="<%=loopPlayBtn%>"class="txp_icon txp_icon_loop" version="1.1" viewBox="0 0 36 36">\r\n        <use class="txp_svg_symbol txp_svg_loop" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_loop"></use>\r\n        <use class="txp_svg_symbol txp_svg_loop_off" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_loop_off"></use>\r\n    </svg>\r\n    <txpdiv class="txp_tooltip" data-role="<%=loopPlayText%>"></txpdiv>\r\n    <txpdiv class="txp_popup_loop" data-role="<%=loopPlayTips%>">\r\n        <img src="//i.gtimg.cn/qqlive/images/20170629/loop_tip.png" alt="">\r\n        <txpdiv class="txp_popup_loop_text">可以打开洗脑循环了哟</txpdiv>\r\n    </txpdiv>\r\n</txpdiv>'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(213)},213:function(a,b,c){function d(a){e=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util,g=(Txplayer.apiList,c(214));d.prototype={init:function(){this.write(),this.addEventListerner()},write:function(){var a={time:"txp-control-time-mod",currentTimeRole:"txp-control-currenttime",durationRole:"txp-control-duration"},b=e.tmpl(g,a);this.context.$mod.$buttonsleftmod.append(b),this.dataset.$time=this.context.$mod.$buttonsleftmod.find('[data-role="'+a.time+'"]'),this.dataset.$currenttime=this.context.$mod.$buttonsleftmod.find('[data-role="'+a.currentTimeRole+'"]'),this.dataset.$duration=this.context.$mod.$buttonsleftmod.find('[data-role="'+a.durationRole+'"]')},remove:function(){this.dataset.$time.remove()},updateDuration:function(a){"undefined"===e.type(a)&&(a=this.context.dataset.duration),"number"===e.type(a)&&this.dataset.$duration.html(f.formatPlayTime(a))},updateCurrentTime:function(a){"undefined"===e.type(a)&&(a=this.context.dataset.currentTime),a>this.context.dataset.duration||"number"===e.type(a)&&this.dataset.$currenttime.html(f.formatPlayTime(a))},addEventListerner:function(){var a=this;a.updateDuration(),this.dataset.eventsList={},this.dataset.eventsList[f.getUniqueMsgKey("getVideoUrlSuccess")]=function(){a.updateDuration()},this.dataset.eventsList[f.getUniqueMsgKey("vidChange")]=function(){a.updateCurrentTime(0),a.updateDuration(0)},this.dataset.eventsList[f.getUniqueMsgKey("videoEnd")]=function(b){b&&"film"===b.playListType&&(b.playListTypeEnd||b.isTheLastFilm)&&(a.context.dataset.canPlayTime?a.updateCurrentTime(a.context.dataset.canPlayTime):a.updateCurrentTime(0),a.updateDuration())},this.dataset.eventsList[f.getUniqueMsgKey("playStateChange")]=function(b){b&&0==b.state&&(a.updateDuration(0),a.updateCurrentTime(0))},this.dataset.eventsList.beforeVideoRePlay=function(){a.updateDuration()},this.dataset.eventsList[f.getUniqueMsgKey("videoTimeUpdate")]=function(b){a.context.dataset.isControlShow&&"film"==a.context.dataset.currentPlayListType&&a.updateCurrentTime()},this.dataset.eventsList[f.getUniqueMsgKey("beforeUiControlShow")]=function(b){a.context.dataset.isPlayingAd||a.updateCurrentTime()},this.dataset.eventsList[f.getUniqueMsgKey("speedyTouchmove")]=function(b){a.updateCurrentTime(b)},this.dataset.eventsList[f.getUniqueMsgKey("progressUpdate")]=function(b){var c=a.context.dataset.duration,d=c*b/100>c?c:c*b/100;a.updateCurrentTime(d)},this.dataset.eventsList[f.getUniqueMsgKey("seekStart")]=function(b){b&&"number"===e.type(b.seekTime)&&a.updateCurrentTime(b.seekTime)},e.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)})}},Txplayer.register("UiShowTime",d)},214:function(a,b){a.exports='<txpdiv data-role="<%=time%>" class="txp_time_display">\r\n  <txpdiv class="txp_time_current" data-role="<%=currentTimeRole%>">00:00</txpdiv>\r\n  <txpdiv class="txp_time_separator">/</txpdiv>\r\n  <txpdiv class="txp_time_duration" data-role="<%=durationRole%>">00:00</txpdiv>\r\n  <txpdiv class="txp_live_badge">直播</txpdiv>\r\n</txpdiv>'}});