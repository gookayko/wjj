
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(139)},139:function(a,b,c){function d(a){e=Txplayer.$,this.msg=new Txplayer.Events,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=(Txplayer.util,c(140));d.prototype={init:function(){this.write(),this.handleDisplay(),this.handleCurrent(),this.addEventListerner()},write:function(){var a={btn:"txp-ui-control-barrage-btn",hideClass:Txplayer.dataset.hideClass,tabindex:Txplayer.dataset.tabindex++};this.dataset.renderData=a;var b=e.tmpl(f,a);this.context.$mod.$buttonsrightmod.append(b),this.dataset.$btn=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.btn+'"]'),this.dataset.hasBarrage=this.context.dataset.isShowBulletRegion,this.dataset.isFullScreen=this.context.dataset.isWindowFullscreen,this.dataset.isOpenBarrage=this.context.dataset.flashBulletSwitchStatus,this.dataset.isCoolOpen="coolOpen"===this.context.config.playerType,this.handleDisplay(),this.handleCurrent()},remove:function(){this.dataset.$btn.remove()},handleDisplay:function(){this.dataset.$btn[this.dataset.hasBarrage&&(this.dataset.isFullScreen||this.dataset.isCoolOpen)?"removeClass":"addClass"](Txplayer.dataset.hideClass)},handleCurrent:function(){this.dataset.$btn[this.dataset.isOpenBarrage?"addClass":"removeClass"](Txplayer.dataset.currentClass)},addEventListerner:function(){var a=this;a.dataset.$btn.on(Txplayer.dataset.clickEventName,function(){var b=e(this),c=!b.hasClass(Txplayer.dataset.currentClass);a.context.msg.broadcast("bulletSwitch",c)}),a.context.msg.on("flashBulletSwitchStatusChange",function(b){a.dataset.isOpenBarrage=b,a.handleCurrent()}),a.context.msg.on("showBulletRegion",function(b){a.dataset.hasBarrage=b,a.handleDisplay()}),a.context.msg.on("windowFullscreenChange",function(b){a.dataset.isFullScreen=b,a.handleDisplay()})}},Txplayer.register("UiBarrageBtn",d)},140:function(a,b){a.exports='<button data-role="<%=btn%>" class="txp_btn txp_btn_barrage <%=hideClass%>" data-report="barrage-btn">\r\n\t<txpdiv class="txp_btn_inner">弹幕</txpdiv>\r\n</button>'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(179)},179:function(a,b,c){function d(a){f=Txplayer.$,g=Txplayer.util,this.context=a,this.dataset={selectedClass:"txp_menuitem_selected",hideClass:Txplayer.dataset.hideClass,activeClass:"active",disableClass:"txp_disabled",progressRole:"txp-control-onlywatch-progress",renderData:{onlyWatch:"ui-only-watch",onlyWatchPop:"ui-only-watch-pop",onlyWatchList:"ui-only-watch-list",onlyWatchProgress:"txp-control-onlywatch-progress",onlyWatchRocket:"ui-only-watch-rocket",onlyWatchRocketImage:"ui-only-watch-rocket-image",hideClass:Txplayer.dataset.hideClass}},this.init()}function e(a){var b=0;return f.each(a,function(a,c){b+=(c.et-c.bt)/1e3,c.bt=Math.round(c.bt/1e3),c.et=Math.round(c.et/1e3)}),b}var f,g,h=c(180),i=c(181),j=c(182),k=c(183),l=c(184),m=d.prototype;m.init=function(){this.write(),this.addEventListeners()},m.write=function(){var a=this.context.$mod.$buttonsrightmod,b=f.tmpl(h,this.dataset.renderData);a.append(b)},m.handleData=function(a){var b=[],c={},d=[];f.each(a,function(a,d){var g=d.per||[],h=d.cp||[];f.each(g,function(a,d){var f={pers:[],cate:1};f.pers.push({idx:d.idx,id:d.id,name:d.name,imgurl:d.imgurl}),f.period=d.period||[],f.time=e(f.period),f.minute=Math.floor(f.time/60),f.minute?f.minute=f.minute+"分钟":f.minute=Math.floor(f.time)+"秒",f.id=d.id,c[d.id]=f,b.push(f)}),f.each(h,function(a,d){var f={};f.cate=2,f.pers=d.pers||[],f.period=d.period||[];var g=d.pers.reduce(function(a,b){return a+"_"+b.id},"").replace(/^_/,"");f.pers.sort(function(a,b){return a.idx>b.idx?1:a.idx<b.idx?-1:0}),f.time=e(f.period),f.minute=Math.floor(f.time/60),f.minute?f.minute=f.minute+"分钟":f.minute=Math.floor(f.time)+"秒",f.id=g,c[g]=f,b.push(f)})}),b.sort(function(a,b){return a.cate>b.cate?1:a.cate<b.cate?-1:a.pers[0].idx>b.pers[0].idx?1:a.pers[0].idx<b.pers[0].idx?-1:0}),f.each(b,function(a,b){d.push({id:b.id,name:b.pers.reduce(function(a,b){return a+"，"+b.name},"").replace(/^，/,""),pics:b.pers.map(function(a){return a.imgurl})})}),this.dataset.list=b,this.dataset.map=c,"function"==typeof window.__flashplayer_justwatchTAInfoArray&&window.__flashplayer_justwatchTAInfoArray(d),this.render()},m.clear=function(){this.dataset.hasRequest=!1,this.dataset.$onlyWatchList&&this.dataset.$onlyWatchList.off("click").remove(),this.dataset.$onlyWatch&&this.dataset.$onlyWatch.off("click mouseenter mouseleave").empty().addClass(this.dataset.hideClass),this.dataset.$onlyWatchRocket&&this.dataset.$onlyWatchRocket.remove(),f('[data-role="'+this.dataset.progressRole+'"]').remove()},m.addEventListeners=function(){var a=this;this.dataset.eventList={};var b=this.dataset,c=this.context;b.eventList["getVideoMarkDataReady.1088"]=function(b){a.clear(),b=b||[],b=b[0]||{},b.gds&&b.gds.length>0&&a.handleData(b.gds)},b.eventList[g.getUniqueMsgKey("videoTimeUpdate")]=function(){var d=c.dataset.currentTime;if(b.hasOnlyWatch&&b.currentJumpTime&&b.currentJumpTime.length>0&&d>=b.minBt&&d<=b.maxBt){var e,g=b.currentUser.period||[],h=b.currentJumpTime.indexOf(d);h>-1&&h<b.currentJumpTime.length-1&&(e=g[h+1],e&&a.handleSeek(e.bt,function(){a.rocketFly(e.bt)}))}else"undefined"!==f.type(d)&&d===b.maxEt&&a.context.msg.broadcast("userPlayNext",{connectionPlayType:3})},b.eventList[g.getUniqueMsgKey("videoEnd")]=function(a){a.isAllEnd&&b.$onlyWatch&&b.$onlyWatch.addClass(b.disableClass)},b.eventList[g.getUniqueMsgKey("vidChange")]=function(b){a.clear()},b.eventList[g.getUniqueMsgKey("beforeVideoPlay")]=function(){b.$onlyWatch&&b.$onlyWatch.removeClass(b.disableClass)},b.eventList[g.getUniqueMsgKey("justwatchTASelect")]=function(c,d){var e=b.$onlyWatchList.find('[data-id="'+c+'"]');a.setLocalData({t:0,cid:a.context.dataset.cid,aid:c,select:d}),a.toggleSelect(e,d),a.handleOnlyWatchChange(a.dataset.map[c],d)},b.eventList[g.getUniqueMsgKey("hideUiTips")]=function(b){b&&b.userAction&&"即将为你播放下一个精华片段"===b.tips&&a.setLocalData({t:3})},f.each(b.eventList,function(a,b){c.msg.on(a,b)})},m.addUiEventListeners=function(){var a=this,b=!1,c=this.dataset;c.$onlyWatch.on("click",function(){f(this).hasClass("txp_disabled")||a.context.dataset.duration&&(c.$onlyWatchPop.show(),c.$onlyWatch.toggleClass(c.activeClass))}).on("mouseleave",function(){b=!0;var a=setTimeout(function(){clearTimeout(a),b&&(c.$onlyWatch.removeClass(c.activeClass),c.$onlyWatchPop.hide())},200)}).on("mouseenter",function(){b=!1}),c.$onlyWatchList.on("click",function(b){var d,e,g=f(b.target);d=g.hasClass("txp_menuitem")?g:g.parents(".txp_menuitem");var h=d.hasClass(c.selectedClass);e=d.data("id");var i=c.map[e];a.setLocalData({t:0,cid:a.context.dataset.cid,aid:e,select:!h}),a.toggleSelect(d,!h),a.handleOnlyWatchChange(i,!h)})},m.render=function(){var a=this.dataset.renderData;a.list=this.dataset.list;var b=this.context.$mod.$buttonsrightmod,c=f.tmpl(j,a),d=f.tmpl(k,a);this.dataset.$onlyWatch||(this.dataset.$onlyWatch=b.find('[data-role="'+a.onlyWatch+'"]')),this.dataset.$onlyWatch.append(f.tmpl(i,this.dataset.renderData)),this.dataset.$onlyWatch.removeClass(this.dataset.hideClass),this.dataset.$onlyWatchList=this.dataset.$onlyWatch.find(".txp_popup_content").append(c),this.dataset.$onlyWatchPop=this.dataset.$onlyWatch.find('[data-role="'+a.onlyWatchPop+'"]'),this.dataset.$onlyWatchRocket=this.context.$mod.$progressmod.append(d).find('[data-role="'+a.onlyWatchRocket+'"]'),this.dataset.$onlyWatchRocketImage=this.dataset.$onlyWatchRocket.find('[data-role="'+a.onlyWatchRocketImage+'"]'),this.dataset.$onlyWatch.removeClass(this.dataset.disableClass);var e=this.getLocalData(this.context.dataset.cid);if(e.s){var g=e.s,h=this.dataset.map[g];if(h){var l=this.dataset.$onlyWatchList.find('[data-id="'+g+'"]');this.toggleSelect(l,!0),this.handleOnlyWatchChange(h,!0)}}this.addUiEventListeners()},m.renderProgress=function(a){a=a||{};var b=a.period||[],c=this,d=c.context.$mod.$progressmod.find('[data-role="txp-control-progress-list"]');f('[data-role="'+this.dataset.progressRole+'"]').remove();var e=this.context.dataset.duration;if(e&&b.length>0){var g="";f.each(b,function(a,b){g+=f.tmpl(l,{role:c.dataset.progressRole,width:(b.et-b.bt)/e*100+"%",left:b.bt/e*100+"%"})}),d.append(g)}},m.toggleSelect=function(a,b){var c=this;if(c.dataset.$onlyWatchList.find(".txp_menuitem").removeClass(c.dataset.selectedClass).find(".txp_icon_selected").hide(),b?(a.addClass(c.dataset.selectedClass).find(".txp_icon_selected").show(),c.dataset.hasOnlyWatch=!0):(c.dataset.currentUser=null,c.dataset.currentJumpTime=null,a.removeClass(c.dataset.selectedClass).find(".txp_icon_selected").hide(),c.dataset.hasOnlyWatch=!1),"function"===f.type(window.__flashplayer_justwatchTASelect)&&c.dataset.currentUser){var d=c.dataset.currentUser.id;d&&window.__flashplayer_justwatchTASelect(d,!1)}},m.handleSeek=function(a,b){var c=this,d=!1,e=0,f=this.getLocalData(c.context.dataset.cid);d=f.t<3,this.setLocalData({t:++f.t}),d&&(c.context.dataset.isPlayingAd||(this.context.msg.broadcast("showUiTips",{text:"即将为你播放下一个精华片段",time:3}),e=3e3)),c.context.dataset.isPlayingAd||setTimeout(function(){c.context.dataset.isPlayingAd||(b&&b(),c.context.msg.broadcast("seekTo",{doNotReport:!0,time:Math.floor(a)}))},e)},m.handleOnlyWatchChange=function(a,b){var c,d=this,e=d.dataset.$onlyWatchRocketImage,g=(d.dataset.$onlyWatchRocket,a.period||[]),h="",i=d.context.dataset.currentTime||d.context.dataset.connectionPlayTime||0;d.context.dataset.duration;if(f.each(g,function(a,b){return!(i>=b.bt&&i<=b.et)&&(i<b.bt?(c=b,!1):void 0)}),"function"===f.type(window.__flashplayer_justwatchTASelect)){var j=a.pers.reduce(function(a,b){return a+"_"+b.id},"").replace(/^_/,"");window.__flashplayer_justwatchTASelect(j,b)}return b?(f.each(a.pers,function(a,b){h+='<img src="'+b.imgurl+'">'}),e.html(h),2==a.pers.length?e.addClass("txp_role_filter_rocket_avatar_two"):e.removeClass("txp_role_filter_rocket_avatar_two"),d.dataset.currentUser=a,d.dataset.minBt=g[0].bt,d.dataset.maxBt=g[g.length-1].bt,d.dataset.maxEt=g[g.length-1].et,d.dataset.currentJumpTime=g.map(function(a,b){return a.et}),c&&d.handleSeek(Math.floor(c.bt),function(){d.rocketFly(c.bt)}),void d.renderProgress(a)):void d.renderProgress()},m.rocketFly=function(a){var b=this.dataset.$onlyWatchRocket,c=this.context.dataset.currentTime||this.context.dataset.connectionPlayTime||0,d=this.context.dataset.duration,e=(a-c)/60,f=a/d*100,g=b.css("left"),h=this;g=g?+g.replace("%",""):0,g>f&&(g=c/d*100),b.removeClass(this.dataset.hideClass),b.css({left:g+"%"}),b.show().animate({left:f+"%",duration:1e3*e},function(){setTimeout(function(){b.fadeOut().addClass(h.dataset.hideClass)},3e3)})},m.getLocalData=function(a){var b=g.getData(Txplayer.dataset.localStorageKey.onlyWatch);if(!b)return{t:0,s:""};b=f.parseJSON(b);var c=b.s||{};return{t:b.t,s:c[a]||""}},m.setLocalData=function(a){var b=g.getData(Txplayer.dataset.localStorageKey.onlyWatch);if(b=b?f.parseJSON(b):{t:0,s:""},a.cid){var c=b.s||{};a.select?c[a.cid]=a.aid:c[a.cid]="",b.s=c}else b.t=a.t;g.setData(Txplayer.dataset.localStorageKey.onlyWatch,window.JSON&&JSON.stringify(b)||"")},Txplayer.register("UiOnlyWatch",d)},180:function(a,b){a.exports='<txpdiv class="txp_btn txp_btn_role_filter" data-role="<%=onlyWatch%>"  aria-label="只看TA"></txpdiv>'},181:function(a,b){a.exports='\r\n<txpdiv class="txp_label">只看TA</txpdiv>\r\n<txpdiv class="txp_popup txp_popup_role_filter" data-role="<%=onlyWatchPop%>">\r\n    <txpdiv class="txp_popup_content"></txpdiv>\r\n</txpdiv>'},182:function(a,b){a.exports='<% for (var i = 0, len = list.length; i < len; i++) { %>\r\n<txpdiv class="txp_menuitem" data-id="<%=list[i].id%>">\r\n    <% if (list[i].pers.length == 2) { %>\r\n        <txpdiv class="txp_popup_role_avatar txp_popup_role_avatar_two">\r\n            <img src="<%=list[i].pers[0].imgurl%>" alt="<%=list[i].pers[0].name%>">\r\n            <img src="<%=list[i].pers[1].imgurl%>" alt="<%=list[i].pers[1].name%>">    \r\n        </txpdiv> \r\n        <txpdiv class="txp_popup_role_filter_text">\r\n            <txpdiv class="txp_text_em"><%=list[i].pers[0].name%>, <%=list[i].pers[1].name%></txpdiv>\r\n            <txpdiv class="">精华版<txpdiv class="txp_text_em"><%=list[i].minute%></txpdiv></txpdiv>\r\n        </txpdiv>\r\n    <% } else { %>\r\n        <txpdiv class="txp_popup_role_avatar"><img src="<%=list[i].pers[0].imgurl%>"></txpdiv> \r\n        <txpdiv class="txp_popup_role_filter_text">\r\n            <txpdiv class="">只看<txpdiv class="txp_text_em"><%=list[i].pers[0].name%></txpdiv></txpdiv>\r\n            <txpdiv class="">精华版<txpdiv class="txp_text_em"><%=list[i].minute%></txpdiv></txpdiv> \r\n        </txpdiv>\r\n    <% } %>\r\n    <svg class="txp_icon txp_icon_selected" version="1.1" viewBox="0 0 16 16" width="16" height="16" style="display: none;">\r\n        <use class="txp_svg_symbol txp_svg_share" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_selected"></use>\r\n    </svg>\r\n</txpdiv>\r\n<% } %>'},183:function(a,b){a.exports='<txpdiv data-role="<%=onlyWatchRocket%>" class="txp_role_filter_rocket <%=hideClass%> ">\r\n    <txpdiv class="txp_role_filter_rocket_avatar" data-role="<%=onlyWatchRocketImage%>"></txpdiv>\r\n</txpdiv>'},184:function(a,b){a.exports='<txpdiv class="txp_progress_role" data-role="<%=role%>" style="width: <%=width%>; left: <%=left%>"></txpdiv>'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(153)},62:function(a,b){var c={unstarted:-1,ended:0,playing:1,paused:2,buffering:3,cued:4,stop:5},d={msd:"流畅180P",sd:"标清270P",hd:"高清480P",shd:"超清720P",fhd:"蓝光1080P"};a.exports={playerstate:c,definitionMap:d}},153:function(a,b,c){function d(a){e=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util,g=c(154),h=c(155),i=c(62).definitionMap;d.prototype={init:function(){this.dataset.currentClass="txp_current",this.dataset.setDefinitionDone="videoPlaying.switch_definition",this.context.dataset.isDefinitionSwitching=!1,this.write(),this.addEventListener(),this.exportsModuleApis()},write:function(){var a={definition:"txp-ui-control-definition",hoverBtn:"txp-ui-control-definition-hover",list:"txp-ui-control-definition-list",tabindex:Txplayer.dataset.tabindex++};this.dataset.renderData=a;var b=e.tmpl(g,a);this.context.$mod.$buttonsrightmod.append(b),this.dataset.$definition=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.definition+'"]'),this.dataset.$hover=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.hoverBtn+'"]'),this.dataset.$list=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.list+'"]')},remove:function(){this.dataset.$definition.remove(),this.dataset.$list.remove()},setDefinition:function(a,b){if(a&&!this.context.dataset.isDefinitionSwitching){b="undefined"!==e.type(b)&&!!b;var c,d=this.getDefinitionList(),g=this,h=this.context.msg.getData("getPlayListIndex","film"),i=this.context.dataset.videoCurrentTime;if(i&&(this.dataset.setDefinitionPrevTimePoint=i),e(d).each(function(b,d){if(d.name===a)return c=!0,!0}),!c&&"auto"!==a)return void f.error("未知清晰度格式，或者视频没有指定的清晰度");this.dataset.defaultDefinition=a,this.dataset.prevDefinition=this.getDefinition(),this.context.dataset.isDefinitionSwitching=!0,this.context.msg.broadcast("setDefinitionStart",a,b),f.showInfo("HdPlayerControl.setDefinition",a),this.context.msg.once("preloadListChange.switch_definition",function(b){var c,d=g.context.dataset.videoCurrentTime;!d&&g.dataset.setDefinitionPrevTimePoint&&(d=g.dataset.setDefinitionPrevTimePoint);var i;0===h&&(i=g.context.msg.getData("getVideoSeekToInfo",d),i.hasOwnProperty("index")&&i.hasOwnProperty("prevDurtion")&&(h=i.index,d-=i.prevDurtion,d<0&&(d=0))),c=0===h?b:g.context.dataset.videoPreloadList[h],c&&("string"===e.type(c)?c={url:c,autoplay:!0,currentTime:d,updateIndex:h,type:"film",fromSetDefinition:!0,defn:a}:(c.autoplay=!0,c.currentTime=d,c.updateIndex=h,c.type="film",c.fromSetDefinition=!0,c.defn=a),g.stopSetDefinition(),g.context.dataset.isDefinitionSwitching=!0,g.context.msg.broadcast("setFocusVideoUrl",c),g.context.msg.once(g.dataset.setDefinitionDone,function(b){g.dataset.hasSetDefinitionRetry=!1,g.stopSetDefinition(),g.context.dataset.isDefinitionSwitching=!1,g.context.msg.broadcast("setDefinitionDone",b),g.context.msg.broadcast("definitionChange",a);try{g.context.userMsg.broadcast("definitionChange",{definition:a})}catch(c){}}),g.context.dataset.useChromeHls||(g.dataset.setDefinitionTimeOut_TIMER=setTimeout(function(){g.stopSetDefinition(),f.showError("切换清晰度失败",""),g.context.dataset.isDefinitionSwitching=!1,g.context.msg.broadcast("setDefinitionFail",{}),g.dataset.prevDefinition&&!g.dataset.hasSetDefinitionRetry&&(g.dataset.setDefinitionRetry_TIMER=setTimeout(function(){g.stopSetDefinition(),g.setDefinition(g.dataset.prevDefinition),g.dataset.hasSetDefinitionRetry=!0},1500))},2e4)))}),this.context.msg.broadcast("requestGetinfo",{defn:a,vid:this.context.dataset.vid,repalcePlayList:!0,fhdswitch:1}),g.context.msg.once("getinfoFinish.setDefinition",function(a){a&&a.errCode&&a.isLastRetry&&g.context.msg.broadcast("setDefinitionFail",a)})}},stopSetDefinition:function(){this.context.dataset.isDefinitionSwitching=!1,this.context.msg.off(this.dataset.setDefinitionDone),this.dataset.setDefinitionTimeOut_TIMER&&(clearTimeout(this.dataset.setDefinitionTimeOut_TIMER),this.dataset.setDefinitionTimeOut_TIMER=null),this.dataset.setDefinitionRetry_TIMER&&(clearTimeout(this.dataset.setDefinitionRetry_TIMER),this.dataset.setDefinitionRetry_TIMER=null),this.context.msg.off("getinfoFinish.setDefinition")},getDefinitionList:function(){var a=this.context.dataset.definitionList;return a?(e(a).each(function(a,b){i.hasOwnProperty(b.name)&&(b.cname=b.cname.replace(/[;\(\)]/g,""))}),a.sort(function(a,b){return parseInt(a.cname.replace(/\D+/g,""))-parseInt(b.cname.replace(/\D+/g,""))}),this.dataset.DefinitionList=a,a):[]},getDefinition:function(){var a,b=this.getDefinitionList();return"array"!==e.type(b)?"":(e(b).each(function(b,c){if(1===c.sl)return a=c.name,!0}),a)},getCurrentDefinitionName:function(){var a=this.getDefinitionList(),b=this.getDefinition();if("array"!==e.type(a))return"";if(!b)return"";var c="";return e(a).each(function(a,d){if(d.name===b)return c=d.cname,!1}),c=c.replace(/\d+P?/g,"")},getDefinitionFormat:function(){var a,b=this.getDefinitionList();return"array"!==e.type(b)?"":(e(b).each(function(b,c){if(1===c.sl)return a=c.format,!0}),a)},getDefinitionRate:function(){var a,b=this.getDefinitionList();return"array"!==e.type(b)?"":(e(b).each(function(b,c){if(1===c.sl)return a=c.br,!0}),a)},updateDefinitionList:function(a){var b=this,c=this.getDefinitionList(),d=this.getDefinition();if(a&&"array"!==e.type(c)||"array"===e.type(c)&&!c.length)return void b.dataset.$definition.addClass(Txplayer.dataset.hideClass);if(a||c||"array"!==e.type(c)||c.length){if(e(c).each(function(a,b){if("fhd"===b.name)return void(1!==b.lmt&&3!==b.lmt||(b.viplogo=1))}),!d&&(!c||c.length<=1))return b.dataset.$definition.addClass(Txplayer.dataset.hideClass),"";var f={list:c,currentDefinition:d,currentClass:b.dataset.currentClass},g=b.getCurrentDefinitionName(),i=e.tmpl(h,f);b.dataset.$list.html(i),g?b.dataset.$hover.html(g):b.dataset.$hover.html("自适应"),b.dataset.$definition.removeClass(Txplayer.dataset.hideClass)}},addEventListener:function(){function a(){b.updateDefinitionList(!0),b.context.dataset.currentDefinitionFormat=b.getDefinitionFormat(),b.context.dataset.currentDefinitionRate=b.getDefinitionRate(),b.context.dataset.definition=b.getDefinition()}var b=this;b.updateDefinitionList(!1),this.dataset.eventsList={},b.context.dataset.getinfoJSON&&a(),this.dataset.eventsList[f.getUniqueMsgKey("getVideoUrlSuccess")]=function(){a()},this.dataset.eventsList[f.getUniqueMsgKey("videoPlaying")]=function(a){setTimeout(function(){if("film"!=b.context.dataset.currentPlayListType){if(b.dataset.$definition.hasClass("txp_disabled"))return;b.dataset.$list.parent().hide(),b.dataset.$definition.addClass("txp_disabled")}else b.dataset.$definition.removeClass("txp_disabled")},100)},this.dataset.eventsList[f.getUniqueMsgKey("seekStart")]=function(a){b.stopSetDefinition()},this.dataset.eventsList[f.getUniqueMsgKey("disableDefinitionBtn")]=function(a){b.dataset.$definition.addClass("txp_disabled")},this.dataset.eventsList[f.getUniqueMsgKey("vidChange")]=function(a){b.context.msg.off("preloadListChange.switch_definition")},e.each(this.dataset.eventsList,function(a,c){b.context.msg.on(a,c)}),this.dataset.$list.on("click",function(a){if(!b.context.dataset.isPlayingAd){var c=e(a.target),d=c.data("definition");d&&(c.hasClass(b.dataset.currentClass)||(b.context.dataset.useChromeHls||b.context.msg.broadcast("pause"),b.setDefinition(d)))}}),this.dataset.$definition.on("click",function(a){if(!e(a.target).parents().hasClass("txp_popup")){var c=b.dataset.$list.parent();"none"==c.css("display")?(c.show(),e(this).addClass("active")):(c.hide(),e(this).removeClass("active"))}}),this.dataset.$definition.on("mouseleave",function(a){if("block"==b.dataset.$list.parent().css("display")){if(null===a.relatedTarget)return;b.dataset.$list.parent().hide(),e(this).removeClass("active")}}),this.context.userMsg.on("1080pVipGuideClose",function(a){a&&"close1080p"===a.action&&b.context.msg.broadcast("play")}),this.context.msg.on("error",function(){b.stopSetDefinition()}),this.context.msg.on("userStopVideo",function(){b.dataset.$definition.addClass("txp_disabled")})},exportsModuleApis:function(){var a=this;this.dataset.moduleApis={},this.dataset.moduleApis.getDefinitionList=function(){var b=a.getDefinitionList(),c=[];return e(b).each(function(a,b){c.push({name:b.name,cname:b.cname})}),c},this.dataset.moduleApis.getDefinition=this.getDefinition.bind(this),this.dataset.moduleApis.setDefinition=function(){window.console&&window.console.log&&window.console.log("player.setDefinition()  API已废弃")},e.extend(this.context.userApi,this.dataset.moduleApis)}},Txplayer.register("UiDefinition",d)},154:function(a,b){a.exports='<txpdiv data-role="<%=definition%>" class="txp_btn txp_btn_definition txp_disabled" aria-label="清晰度">\r\n  <txpdiv class="txp_label" data-role="<%=hoverBtn%>">自适应</txpdiv>\r\n  <txpdiv class="txp_popup txp_popup_definition" >\r\n  \t<txpdiv class="txp_popup_content" data-role="<%=list%>">\r\n  \t</txpdiv>\t\r\n  </txpdiv>\r\n</txpdiv>'},155:function(a,b){a.exports='<% for(var len = list.length,i=len-1; i>=0; i--){%>\r\n  <txpdiv class="txp_menuitem <% if(list[i].name===currentDefinition) {%><%=currentClass%><% } %>" data-definition="<%=list[i].name%>" data-report="switch-definition">\r\n    <%=list[i].cname%>\r\n    <% if(list[i].viplogo){ %>\r\n      <txpdiv class="txp_icon_vip">VIP</txpdiv>\r\n    <% } %>\r\n  </txpdiv>\r\n<% } %>'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(164)},164:function(a,b,c){function d(a){e=Txplayer.$,this.dataset={},this.context=a,this.init()}var e,f=Txplayer.util,g=c(165),h=c(166),i=d.prototype;i.init=function(){this.dataset.currentClass="txp_current",this.dataset.disableClass="txp_disabled",this.dataset.currentLanguageIndex=-1,this.dataset.setLanguage="videoPlaying.switch_language",this.dataset.languageList=[],this.write(),this.addEventListener(),this.exportsModuleApis()},i.reset=function(){var a=this.dataset;a.languageList=[],a.currentLanguageIndex=-1,a.$list.html(""),a.$hoverBtn.html(""),a.$language.addClass(Txplayer.dataset.hideClass).removeClass("active")},i.write=function(){var a={language:"txp-ui-control-language",hoverBtn:"txp-ui-control-language-hover",list:"txp-ui-control-language-list",tabindex:Txplayer.dataset.tabindex++};this.dataset.renderData=a;var b=e.tmpl(g,a);this.context.$mod.$buttonsrightmod.append(b),this.dataset.$language=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.language+'"]'),this.dataset.$hoverBtn=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.hoverBtn+'"]'),this.dataset.$list=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.list+'"]'),this.dataset.$language.addClass(Txplayer.dataset.hideClass),this.dataset.$language.addClass(this.dataset.disableClass)},i.onLanguageChange=function(a){var b=this.dataset;return a&&0!==a.length?(a.length>0&&b.$language.removeClass(Txplayer.dataset.hideClass),b.languageList=a,void this.updateLanguageList(a)):this.reset()},i.addEventListener=function(){var a=this,b=this.dataset,c=this.context,d=b.disableClass;b.eventsList={},b.eventsList[f.getUniqueMsgKey("videoPlaying")]=function(a){var e=b.languageList;if(a&&"film"!=a.playListType&&e.length>0){if(b.$language.hasClass(d))return;b.$language.addClass(d)}else e.length>0&&b.$language.removeClass(d);a&&"film"===a.playListType&&(c.dataset.adext&&(c.dataset.adext=c.dataset.adext.replace(/\|?page\_langSwitch/g,"")),f.delSessionData(Txplayer.dataset.sessionStorageKey.languageSwitch))},b.eventsList[f.getUniqueMsgKey("isPlayingAdStatusChange")]=function(a){if(a){if(b.$language.hasClass(d))return;b.$language.addClass(d)}else b.$language.removeClass(d),c.dataset.adext&&(c.dataset.adext=c.dataset.adext.replace(/\|?page\_langSwitch/g,"")),f.delSessionData(Txplayer.dataset.sessionStorageKey.languageSwitch)},this.dataset.eventsList[f.getUniqueMsgKey("userStopVideo")]=function(){b.$language.addClass(d)},e.each(this.dataset.eventsList,function(a,b){c.msg.on(a,b)}),b.$language.on("mouseenter",function(a){c.dataset.disableHideControl=!0}),b.$language.on("mouseleave",function(a){c.dataset.disableHideControl=!1;var d=b.$list.parent();if("block"==d.css("display")){if(null===a.relatedTarget)return;d.hide(),e(this).removeClass("active")}}),b.$language.on("click",function(a){if(!e(a.target).parents().hasClass("txp_popup")){var d=b.$list.parent();"none"==d.css("display")?(d.show(),e(this).addClass("active"),c.dataset.disableHideControl=!0):(d.hide(),e(this).removeClass("active"),c.dataset.disableHideControl=!1)}}),b.$list.on("click",function(d){if(!c.dataset.isPlayingAd){var f=e(d.target),g=f.data("language"),h=f.data("lang"),i=f.data("vid"),j=f.data("cid");if(g&&"undefined"!=typeof h&&!f.hasClass(b.currentClass)){c.msg.broadcast("pause");var k={language:g,lang:h,userAction:!0,vid:i};j&&(k.cid=j),a.setLanguage(k),f.addClass(b.currentClass)}}})},i.updateLanguageList=function(a){var b,c=this,d=a||[];b=e.grep(d,function(a){return 1===a.sel}),b&&b.length>0&&(b=b[0]),this.dataset.currentLanguageIndex=b.lang,this.setLanguage({language:b.title,lang:b.lang,userAction:!1});var f={list:d,currentClass:this.dataset.currentClass,currentLanguageIndex:this.dataset.currentLanguageIndex},g=e.tmpl(h,f);c.dataset.$list.html(g)},i.setLanguage=function(a){if(a.language){var b=this.dataset,c=this;if(b.$hoverBtn.text(a.language.substr(0,3)),b.$list.find(".txp_menuitem").removeClass(this.dataset.currentClass),b.$list.parent().hide(),b.$language.removeClass("active"),b.currentLanguageIndex=a.lang,a.userAction){var d=c.context.dataset.currentTime;d||(d=c.context.userApi.getCurrentTime());var e=a.vid+"|"+d+"|"+(new Date).getTime()+"|30000";f.setSessionData(Txplayer.dataset.sessionStorageKey.languageSwitch,e);var g={title:a.language,lang:a.lang,vid:a.vid};a.cid&&(g.cid=a.cid);try{c.context.userMsg.broadcast("languageSet",g)}catch(h){}}}},i.exportsModuleApis=function(){this.dataset.moduleApis={},this.dataset.moduleApis.setLanguage=this.onLanguageChange.bind(this),e.extend(this.context.userApi,this.dataset.moduleApis)},Txplayer.register("UiLanguage",d)},165:function(a,b){a.exports='<txpdiv data-role="<%=language%>" class="txp_btn txp_btn_definition txp_btn_definition_language" aria-label="语言">\r\n  <txpdiv class="txp_label" data-role="<%=hoverBtn%>">语言</txpdiv>\r\n  <txpdiv class="txp_popup txp_popup_definition">\r\n  \t<txpdiv class="txp_popup_content" data-role="<%=list%>">\r\n  \t</txpdiv>\t\r\n  </txpdiv>\r\n</txpdiv>'},166:function(a,b){a.exports='<% for(var i = 0, len = list.length; i < len; i++ ){%>\r\n  <txpdiv class="txp_menuitem <% if( list[i].lang == currentLanguageIndex) {%><%=currentClass%><% } %>"\r\n        data-language="<%=list[i].title%>" \r\n        data-lang="<%=list[i].lang%>"\r\n        data-vid="<%=list[i].vid%>"\r\n        data-cid="<%=list[i].cid || \'\'%>"\r\n        data-report="switch-language">\r\n    <%=list[i].title%>\r\n  </txpdiv>\r\n<% } %>'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(221)},221:function(a,b,c){function d(a){e=Txplayer.$,this.msg=new Txplayer.Events,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util,g=(Txplayer.apiList,c(222));d.prototype={init:function(){this.dataset.volumeKey=Txplayer.dataset.localStorageKey.volumeHistory,this.write(),this.setVolumeByCache(),this.onVolumeUpdate(),this.addEventListener()},write:function(){var a={volumeButton:"txp-control-volume-button",volumeValue:"txp-control-volume-value",volumeClickButton:"txp-control-volume-click-button",volumeDrag:"txp-control-volume-drag",volumeRange:"txp-control-volume-range",volumeHandler:"txp-control-volume-handler",volumePopButton:"txp-control-volume-pop-button",tabindex:Txplayer.dataset.tabindex++};this.dataset.renderData=a;var b=e.tmpl(g,a);this.context.$mod.$buttonsrightmod.append(b),this.dataset.$volumeButton=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.volumeButton+'"]'),this.dataset.$volumeClickButton=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.volumeClickButton+'"]'),this.dataset.$volumeValue=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.volumeValue+'"]'),this.dataset.$volumeDrag=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.volumeDrag+'"]'),this.dataset.$volumeRange=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.volumeRange+'"]'),this.dataset.$volumeHandler=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.volumeHandler+'"]'),this.dataset.$volumePopButton=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.volumePopButton+'"]')},remove:function(){this.dataset.$volumeButton.remove()},setVolumeByCache:function(){if(!this.context.config.disableCacheVolume){var a=this.getData();isNaN(a)&&(a=this.context.dataset.volume);var b=this;"number"===e.type(a)&&(a>100&&(a=100,this.setData(100)),this.context.msg.listenerCount("setVolume")?this.context.msg.broadcast("setVolume",{isUserAction:!1,volume:a}):this.context.msg.on("ready",function(){b.context.msg.broadcast("setVolume",{isUserAction:!1,volume:a})}))}},getData:function(){if(!this.context.config.disableCacheVolume){var a=f.getData(this.dataset.volumeKey),b=parseInt(a);return isNaN(b)||"number"!==e.type(b)?void 0:b}},setData:function(a){this.context.config.disableCacheVolume||f.setData(this.dataset.volumeKey,a)},onVolumeUpdate:function(a){var b;if(a||(a={},b=this.context.dataset.muted,b?a.volume=0:a.volume=this.context.dataset.volume),a&&"number"===e.type(a.volume)&&this.updateVolumeUi(a.volume),a&&a.isUserAction&&"number"===e.type(a.volume)){if(a.volume>100||a.volume<0)return;this.setData(a.volume)}},updateVolumeUi:function(a){this.dataset.$volumeValue.css("height",a+"%"),0===a?this.dataset.$volumeButton.attr("data-status","mute"):this.dataset.$volumeButton.attr("data-status","normal")},volumeDrag:function(){var a,b,c,d,f=!1,g=this,h=function(b,c){"undefined"==typeof c&&(c=!0);var f;f=e(b.target).data("role")===g.dataset.renderData.volumeHandler?b.offsetY+b.target.offsetParent.offsetTop+b.target.offsetTop:e(b.target).data("role")===g.dataset.renderData.volumeValue?b.offsetY+b.target.offsetTop:b.offsetY,f<=0?d=100:f>=a?d=0:(d=a-f,d=parseInt(d/a*100)),c&&g.updateVolumeUi(d),c&&g.context.msg.broadcast("setVolume",{volume:d,showTips:!0,isUserAction:!0})};this.dataset.$volumeRange.on("mousedown",function(d){f=!0,a=g.dataset.$volumeRange.height(),b=g.dataset.$volumeDrag.height(),c=g.dataset.$volumeRange.get(0).offsetTop,h(d,!1)}).on("mousemove",function(a){f&&h(a)}).on("mouseup",function(a){f=!1,h(a)}).on("mouseleave",function(){f=!1})},addEventListener:function(){var a=this;this.dataset.eventsList={},this.dataset.eventsList[f.getUniqueMsgKey("volumeChange")]=function(b){a.onVolumeUpdate(b)},this.dataset.eventsList[f.getUniqueMsgKey("videoEnd")]=function(b){b.playListTypeEnd&&"film"!==b.playListType&&a.setVolumeByCache()},e.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)}),this.dataset.$volumeButton.on("click",function(b){if(!e(b.target).parents().hasClass("txp_popup")){var c=a.dataset.$volumeDrag.parent();"none"==c.css("display")?(c.show(),e(this).addClass("active")):(c.hide(),e(this).removeClass("active"))}}),this.dataset.$volumePopButton.on("click",function(b){var c=e(this);"normal"==c.parents(".txp_btn_volume").attr("data-status")?c.parents(".txp_btn_volume").attr("data-status","mute"):c.parents(".txp_btn_volume").attr("data-status","normal");var d=a.context.dataset.muted,f=a.context.dataset.volume;d||0===f?(0===f?f=a.context.config.volume:d&&a.context.dataset.isPlayingAd&&(f=0),a.context.msg.broadcast("setVolume",{isUserAction:!0,volume:f}),a.updateVolumeUi(f)):(a.context.msg.broadcast("setVolume",{isUserAction:!0,volume:0}),a.updateVolumeUi(0))}),this.dataset.$volumeButton.on("mouseleave",function(b){"block"==a.dataset.$volumeDrag.parent().css("display")&&(a.dataset.$volumeDrag.parent().hide(),e(this).removeClass("active"))}),this.dataset.$volumeClickButton.on("mouseleave",function(a){f.os.mac||a.stopPropagation()}),this.dataset.$volumePopButton.on("mouseleave",function(a){a.stopPropagation()}),this.volumeDrag()}},Txplayer.register("UiVolume",d)},222:function(a,b){a.exports='<txpdiv class="txp_btn txp_btn_volume" data-role="<%=volumeButton%>" data-status="normal" aria-label="音量">\r\n  <svg data-role="<%=volumeClickButton%>" data-report="mute-toggle" class="txp_icon txp_icon_volume" version="1.1" viewBox="0 0 24 24">\r\n    <use class="txp_svg_symbol txp_svg_volume" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_volume"></use>\r\n    <use class="txp_svg_symbol txp_svg_volume_mute" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_volume_mute"></use>\r\n  </svg>\r\n  <txpdiv class="txp_popup txp_popup_volume" data-report="change-volume">\r\n    <txpdiv class="txp_popup_content" data-role="<%=volumeDrag%>" >\r\n      <txpdiv data-role="<%=volumeRange%>" class="txp_volume_range">\r\n        <txpdiv class="txp_volume_range_current" style="height:100%" data-role="<%=volumeValue%>">\r\n          <txpdiv data-role="<%=volumeHandler%>" class="txp_volume_handle"></txpdiv>\r\n        </txpdiv>\r\n      </txpdiv>\r\n      <svg data-role="<%=volumePopButton%>" class="txp_icon txp_icon_volume" version="1.1" viewBox="0 0 24 24" >\r\n        <use class="txp_svg_symbol txp_svg_volume" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_volume"></use>\r\n        <use class="txp_svg_symbol txp_svg_volume_mute" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_volume_mute"></use>\r\n      </svg>\r\n    </txpdiv>\r\n  </txpdiv>\r\n</txpdiv>'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(195)},195:function(a,b,c){function d(a){e=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util,g=(Txplayer.apiList,c(196)),h=c(197);d.prototype={init:function(){this.write(),this.dataset.currentPicWidth=200,this.previewdata=new h(this.context),this.addEventListener()},write:function(){var a={hideClass:Txplayer.dataset.hideClass,previewMod:"txp_preview_mod",timeText:"txp-preview-time-text",previewImage:"txp-preview-image"};this.dataset.renderData=a;var b=e.tmpl(g,a);this.context.$mod.$playermod.append(b),this.dataset.$previewMod=this.context.$mod.$playermod.find('[data-role="'+a.previewMod+'"]'),this.dataset.$timeText=this.context.$mod.$playermod.find('[data-role="'+a.timeText+'"]'),this.dataset.$previewImage=this.context.$mod.$playermod.find('[data-role="'+a.previewImage+'"]'),this.dataset.$progressList=this.context.$mod.$progressmod.find('[data-role="txp-control-progress-list"]')},remove:function(){this.dataset.$previewMod.remove()},updateImage:function(a,b,c){var d=this;if(b||(b=this.previewdata.getDataByTime(a,this.dataset.currentPicWidth)),!(b&&b.url&&b.hasOwnProperty("x")&&b.hasOwnProperty("y")))return this.dataset.$previewMod.addClass("txp_tooltip_preview_tiny"),void this.dataset.$previewImage.css({"background-image":"none"});this.dataset.$previewMod.removeClass("txp_tooltip_preview_tiny");if(!this.dataset.imageUrl){if(!c){var e=new Image;e.onload=function(){d.previewdata.preloadPreviewImg(a,d.dataset.currentPicWidth)},e.src=b.url}this.dataset.$previewImage.css({"background-image":"url("+b.url+")","background-position":b.x+" "+b.y,"background-size":b.size+"px,auto"}),this.showVideoPreview()}},calcProgressByMousePosition:function(a){var b=-1,c=e(a.target),d=c.data("role");return"txp-control-progress-list"===d||"txp-control-progress"===d?b=a.offsetX:"txp-control-progress-indicator"===d?b=a.target.offsetLeft+a.target.offsetParent.offsetLeft+a.offsetX:("txp-control-play-point"===d||"txp-control-play-progress"===d||"txp-control-load-progress"===d||"txp-control-onlywatch-progress"===d||c.hasClass("txp_interact_dot"))&&(b=a.target.offsetLeft+a.offsetX),b},addEventListener:function(){var a=this,b=!1;a.context.$mod.$progressmod.on("mouseenter",function(){a.context.dataset.isPlayingAd||a.context.dataset.isImgAdLoadingShowing||a.context.dataset.isShowPreviewList||a.showVideoPreview()}).on("mouseleave",function(){b=!1,a.hideVideoPreview()}).on("mousedown",function(){b=!0,a.dataset.$previewMod.hasClass("txp_tooltip_preview_tiny")||a.hideVideoPreview()}).on("mouseup",function(){setTimeout(function(){b=!1},500)}).on("mousemove",function(c){if(!a.context.dataset.isPlayingAd&&!a.context.dataset.isImgAdLoadingShowing)return a.context.dataset.isShowPreviewList||b&&!a.dataset.$previewMod.hasClass("txp_tooltip_preview_tiny")?void a.hideVideoPreview():void a.updateVideoPreview({x:a.calcProgressByMousePosition(c),progressWidth:a.dataset.$progressList.width(),duration:a.context.dataset.duration})}),this.dataset.eventsList={},this.dataset.eventsList[f.getUniqueMsgKey("vidChange")]=function(){a.hideVideoPreview(),a.previewdata.destroyData()},this.dataset.eventsList[f.getUniqueMsgKey("hideUiControl")]=function(){a.hideVideoPreview()},this.dataset.eventsList[f.getUniqueMsgKey("previewPreload")]=function(b){a.dataset.$previewMod.hasClass(Txplayer.dataset.hideClass)||a.dataset.currentTime==b.cTime&&a.updateImage(b.cTime,b.imgInfo,b.isPreload)},e.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)})},showVideoPreview:function(){var a=this;if(a.context.dataset.getinfoJSON&&a.context.dataset.isControlShow&&!a.context.dataset.isDisableProgress)return a.context.dataset.disableShowPreview?void a.dataset.$previewMod.addClass(Txplayer.dataset.hideClass):void a.dataset.$previewMod.removeClass(Txplayer.dataset.hideClass)},hideVideoPreview:function(){var a=this;a.dataset.$previewMod.addClass(Txplayer.dataset.hideClass)},updateVideoPreview:function(a){var b=this;if(a){if(a.x>a.progressWidth?a.x=a.progressWidth:a.x<0&&(a.x=0),a.hasOwnProperty("x")){var c=b.dataset.currentPicWidth;b.dataset.$previewMod.hasClass("txp_tooltip_preview_tiny")&&(c=window.Zepto?b.dataset.$timeText.width():b.dataset.$timeText.outerWidth());var d=parseInt(c/2),e=a.x-d;e<=0?e=0:a.progressWidth&&e>a.progressWidth-c&&(e=a.progressWidth-c),b.dataset.$previewMod.css("left",e)}if(a.hasOwnProperty("x")&&a.duration){var g=parseInt(a.duration*(a.x/a.progressWidth)),h=f.formatPlayTime(g);b.dataset.$timeText.html(h),b.dataset.currentTime=g,b.updateImage(g)}}}},Txplayer.register("UiPreview",d)},196:function(a,b){a.exports='<txpdiv data-role="<%=previewMod%>" class="txp_tooltip_preview txp_tooltip_preview_hover <%=hideClass%>" style="left:0;">\r\n  <txpdiv class="txp_tooltip_bg txp_tooltip_current_bg" data-role="<%=previewImage%>">\r\n\t  <txpdiv class="txp_tooltip_text" data-role="<%=timeText%>"></txpdiv>\r\n  </txpdiv>\r\n  <txpdiv class="txp_tooltip_dot_text txp_none"></txpdiv>\r\n</txpdiv>'},197:function(a,b){function c(a){this.context=a,this.dataset={},this.dataset.loaded={}}var d=Txplayer.$;c.prototype={getDataByTime:function(a,b){return"array"===d.type(this.context.dataset.previewData)&&this.context.dataset.previewData.length?this.preFindPosition(a,b):(this.findPreviewData(),"array"===d.type(this.context.dataset.previewData)&&this.context.dataset.previewData.length?this.preFindPosition(a,b):"")},preFindPosition:function(a,b){var c;return this.context.dataset.previewData.length>1?(c=this.findPosition(a,b,this.context.dataset.previewData[this.context.dataset.previewData.length-1]),c?this.dataset.loaded&&this.dataset.loaded[c.url]?c:this.findPosition(a,b,this.context.dataset.previewData[0]):{}):this.findPosition(a,b,this.context.dataset.previewData[0])},findPosition:function(a,b,c,d){var e=this.getsTime(),f=1;a+e>=this.context.dataset.duration?a=this.context.dataset.duration-1:0!=a&&(a+=e);var g=Math.ceil((a||1)/e),h=c[0].picCount,i=Math.ceil(g/h)-1,j=c[i];if(e>1&&0===a&&(g=1),j){var k,l=g-h*i,m=l%j.columnCount;m=0===m?j.columnCount:m;var n=Math.ceil(l/j.columnCount),o=(n-1)*j.picHeight,p=(m-1)*j.picWidth;return k=j.path,f=b/j.picWidth,{url:k,x:p*-1*f+"px",y:o*-1*f+"px",size:j.columnCount*b}}},preloadPreviewImg:function(a,b){var c=this;if("array"===d.type(this.context.dataset.previewData)&&this.context.dataset.previewData.length>1){var e=this.context.dataset.previewData[this.context.dataset.previewData.length-1],f=this.findPosition(a,b,e,!0),g=new Image;g.onload=function(){c.dataset.loaded[this.src]=!0,c.context.msg.broadcast("previewPreload",{cTime:a,imgInfo:f,isPreload:!0})},g.src=f.url}},getsTime:function(){var a,b=this.context.dataset.duration;return a=b<60?1:b<300?2:b<600?5:10},findPreviewData:function(){if("object"===d.type(this.context.dataset.getinfoJSON)){var a,b,c,e,f,g,h=this.context.dataset.getinfoJSON,i=this,j=[],k=this.context.dataset.duration,l=this.getsTime();this.context.dataset.previewData=[];var m=function(a){if(a){for(j=[],c=Math.floor(k/l),b=Math.ceil(c/(a.r*a.c)),f=0;f<b;f++){var d={index:f,path:a.url+o.lnk+"."+a.fn+"."+(f+1)+".jpg/0",picCount:a.r*a.c,picWidth:a.w,picHeight:a.h,rowCount:a.r,columnCount:a.c,filename:a.fn,format:a.fmt};j.push(d)}i.context.dataset.previewData.push(j)}};if(h&&h.vl&&h.vl.vi&&h.vl.vi[0]&&h.vl.vi[0].pl&&h.vl.vi[0].pl[0]&&h.vl.vi[0].pl[0].pd&&h.vl.vi[0].pl[0].pd.length){var n=h.vl.vi[0].pl[0].pd,o=h.vl.vi[0];for(e=0,g=n.length;e<g;e++)a=n[e],m(a)}}},destroyData:function(){this.dataset={},this.dataset.loaded={},this.context.dataset.previewData=[]}},a.exports=c}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(200)},197:function(a,b){function c(a){this.context=a,this.dataset={},this.dataset.loaded={}}var d=Txplayer.$;c.prototype={getDataByTime:function(a,b){return"array"===d.type(this.context.dataset.previewData)&&this.context.dataset.previewData.length?this.preFindPosition(a,b):(this.findPreviewData(),"array"===d.type(this.context.dataset.previewData)&&this.context.dataset.previewData.length?this.preFindPosition(a,b):"")},preFindPosition:function(a,b){var c;return this.context.dataset.previewData.length>1?(c=this.findPosition(a,b,this.context.dataset.previewData[this.context.dataset.previewData.length-1]),c?this.dataset.loaded&&this.dataset.loaded[c.url]?c:this.findPosition(a,b,this.context.dataset.previewData[0]):{}):this.findPosition(a,b,this.context.dataset.previewData[0])},findPosition:function(a,b,c,d){var e=this.getsTime(),f=1;a+e>=this.context.dataset.duration?a=this.context.dataset.duration-1:0!=a&&(a+=e);var g=Math.ceil((a||1)/e),h=c[0].picCount,i=Math.ceil(g/h)-1,j=c[i];if(e>1&&0===a&&(g=1),j){var k,l=g-h*i,m=l%j.columnCount;m=0===m?j.columnCount:m;var n=Math.ceil(l/j.columnCount),o=(n-1)*j.picHeight,p=(m-1)*j.picWidth;return k=j.path,f=b/j.picWidth,{url:k,x:p*-1*f+"px",y:o*-1*f+"px",size:j.columnCount*b}}},preloadPreviewImg:function(a,b){var c=this;if("array"===d.type(this.context.dataset.previewData)&&this.context.dataset.previewData.length>1){var e=this.context.dataset.previewData[this.context.dataset.previewData.length-1],f=this.findPosition(a,b,e,!0),g=new Image;g.onload=function(){c.dataset.loaded[this.src]=!0,c.context.msg.broadcast("previewPreload",{cTime:a,imgInfo:f,isPreload:!0})},g.src=f.url}},getsTime:function(){var a,b=this.context.dataset.duration;return a=b<60?1:b<300?2:b<600?5:10},findPreviewData:function(){if("object"===d.type(this.context.dataset.getinfoJSON)){var a,b,c,e,f,g,h=this.context.dataset.getinfoJSON,i=this,j=[],k=this.context.dataset.duration,l=this.getsTime();this.context.dataset.previewData=[];var m=function(a){if(a){for(j=[],c=Math.floor(k/l),b=Math.ceil(c/(a.r*a.c)),f=0;f<b;f++){var d={index:f,path:a.url+o.lnk+"."+a.fn+"."+(f+1)+".jpg/0",picCount:a.r*a.c,picWidth:a.w,picHeight:a.h,rowCount:a.r,columnCount:a.c,filename:a.fn,format:a.fmt};j.push(d)}i.context.dataset.previewData.push(j)}};if(h&&h.vl&&h.vl.vi&&h.vl.vi[0]&&h.vl.vi[0].pl&&h.vl.vi[0].pl[0]&&h.vl.vi[0].pl[0].pd&&h.vl.vi[0].pl[0].pd.length){var n=h.vl.vi[0].pl[0].pd,o=h.vl.vi[0];for(e=0,g=n.length;e<g;e++)a=n[e],m(a)}}},destroyData:function(){this.dataset={},this.dataset.loaded={},this.context.dataset.previewData=[]}},a.exports=c},200:function(a,b,c){function d(a){e=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util,g=(Txplayer.apiList,c(201)),h=c(197);d.prototype={init:function(){this.write(),this.dataset.currentPicWidth=200,this.dataset.smallPicWidth=160,this.resize(),this.previewdata=new h(this.context),this.addEventListener()},write:function(){var a={hideClass:Txplayer.dataset.hideClass,previewMod:"txp_preview_mod_list",timeText:"txp-preview-time-text-list",previewImage:"txp-preview-image-list",previewPoster:"txp-preview-image-poster",previewPosterMod:"txp-preview-image-poster-mod"};this.dataset.renderData=a;var b=e.tmpl(g,a);this.context.$mod.$playermod.append(b),this.dataset.$previewMod=this.context.$mod.$playermod.find('[data-role="'+a.previewMod+'"]'),this.dataset.$progressList=this.context.$mod.$progressmod.find('[data-role="txp-control-progress-list"]'),this.dataset.$previewPoster=this.context.$mod.$playermod.find('[data-role="'+a.previewPoster+'"]'),this.dataset.$previewPosterMod=this.context.$mod.$playermod.find('[data-role="'+a.previewPosterMod+'"]')},resize:function(){if(this.context.dataset.$playermod.width()!=this.dataset.playermodWidth){this.dataset.playermodWidth=this.context.dataset.$playermod.width();var a=Math.ceil((this.context.dataset.$playermod.width()-this.dataset.currentPicWidth)/this.dataset.smallPicWidth)*this.dataset.smallPicWidth+this.dataset.currentPicWidth;this.dataset.$previewMod.css({width:a+this.dataset.smallPicWidth});var b='<txpdiv class="txp_tooltip_bg" data-role="txp-preview-image-list" ><txpdiv class="txp_tooltip_text" data-role="txp-preview-time-text-list"></txpdiv></txpdiv>',c=Math.ceil((this.dataset.playermodWidth-this.dataset.currentPicWidth)/this.dataset.smallPicWidth)+1;this.dataset.len=c+1,this.dataset.$previewImage&&this.dataset.$previewImage.remove();for(var d=0;d<this.dataset.len;d++)this.dataset.$previewMod.append(b);this.dataset.$previewImage=this.context.$mod.$playermod.find('[data-role="txp-preview-image-list"]'),this.dataset.$timeText=this.context.$mod.$playermod.find('[data-role="txp-preview-time-text-list"]'),this.dataset.currentPicIndex=Math.ceil((this.dataset.playermodWidth/2-this.dataset.currentPicWidth/2)/this.dataset.smallPicWidth),e(this.dataset.$previewImage[this.dataset.currentPicIndex]).addClass("txp_tooltip_current_bg");var f=(this.dataset.playermodWidth/2-this.dataset.currentPicWidth/2)%this.dataset.smallPicWidth-this.dataset.smallPicWidth;this.dataset.$previewMod.css("left",f),this.context.msg.broadcast("previewListSizeChange")}},remove:function(){this.dataset.$previewMod.remove()},updatePoster:function(a){var b=this.dataset.playermodWidth/this.dataset.currentPicWidth,c=a.x.slice(0,-2)*b+"px",d=a.y.slice(0,-2)*b+"px";this.dataset.$previewPoster.css({"background-image":"url("+a.url+")","background-position":c+" "+d,"background-size":a.size*b+"px,auto"})},updatePreloadImg:function(a,b,c){var d=this.previewdata.getsTime(),f=(a-this.dataset.currentTime)/d+this.dataset.currentPicIndex;f<0||f>=this.dataset.len||(e(this.dataset.$previewImage[f]).css({"background-image":"url("+b.url+")","background-position":b.x+" "+b.y,"background-size":b.size+"px,auto"}),f==this.dataset.currentPicIndex&&this.updatePoster(b),this.showVideoPreview())},updateImage:function(a){for(var b=this,c=this.previewdata.getsTime(),d=0;d<this.dataset.len;d++){var g=a+(d-this.dataset.currentPicIndex)*c;if(d!=this.dataset.currentPicIndex&&(g>this.context.dataset.duration||g<0))e(this.dataset.$previewImage[d]).css({"background-image":"none"}),e(this.dataset.$timeText[d]).addClass("txp_none"),e(this.dataset.$timeText[d]).html("");else{var h=d==this.dataset.currentPicIndex?this.dataset.currentPicWidth:this.dataset.smallPicWidth,i=this.previewdata.getDataByTime(g,h);if(i&&i.url&&i.hasOwnProperty("x")&&i.hasOwnProperty("y")){if(d==this.dataset.currentPicIndex){var j=f.formatPlayTime(g);this.dataset.currentTime=g,e(this.dataset.$timeText[d]).removeClass("txp_none"),e(this.dataset.$timeText[d]).html(j)}if(this.dataset.imageUrl)return;var k=new Image;k.onload=function(){b.previewdata.preloadPreviewImg(g,h)}(g),k.src=i.url,e(this.dataset.$previewImage[d]).css({"background-image":"url("+i.url+")","background-position":i.x+" "+i.y,"background-size":i.size+"px,auto"}),d==this.dataset.currentPicIndex&&this.updatePoster(i),this.showVideoPreview()}else e(this.dataset.$previewImage[d]).css({"background-image":"none"}),e(this.dataset.$timeText[d]).addClass("txp_none"),e(this.dataset.$timeText[d]).html("")}}},isInProgressArea:function(a){return 1==a.which&&("txp-control-progress-list"===e(a.target).data("role")||"txp-control-progress"===e(a.target).data("role")||"txp-control-progress-indicator"===e(a.target).data("role")||"txp-control-play-point"===e(a.target).data("role")||"txp-control-play-progress"===e(a.target).data("role")||"txp-control-load-progress"===e(a.target).data("role")||e(a.target).hasClass("txp_interact_dot"))},calcProgressByMousePosition:function(a){var b=a.pageX-this.context.$mod.$playermod.offset().left;return b},addEventListener:function(){var a=this;e("body").on("mousedown",function(b){a.context.dataset.isPlayingAd||a.context.dataset.isImgAdLoadingShowing||a.isInProgressArea(b)&&(a.dataset.mouseUp=!1,a.resize(),setTimeout(function(){a.dataset.mouseUp||(a.dataset.mouseIn=!0,a.updateVideoPreview({x:a.calcProgressByMousePosition(b),progressWidth:a.dataset.$progressList.width(),duration:a.context.dataset.duration}),e(this).addClass("unselectable"))},800))}).on("mouseup",function(){a.dataset.mouseIn=!1,a.dataset.mouseUp=!0,e(this).removeClass("unselectable"),a.hideVideoPreview()}).on("mousemove",function(b){a.dataset.mouseIn&&(a.context.dataset.isImgAdLoadingShowing||a.context.dataset.isPlayingAd||a.updateVideoPreview({x:a.calcProgressByMousePosition(b),progressWidth:a.dataset.$progressList.width(),duration:a.context.dataset.duration}))}),this.dataset.eventsList={},this.dataset.eventsList[f.getUniqueMsgKey("vidChange")]=function(){a.hideVideoPreview(),a.previewdata.destroyData()},this.dataset.eventsList[f.getUniqueMsgKey("hideUiControl")]=function(){a.hideVideoPreview()},this.dataset.eventsList[f.getUniqueMsgKey("previewPreload")]=function(b){a.dataset.$previewMod.hasClass(Txplayer.dataset.hideClass)||a.updatePreloadImg(b.cTime,b.imgInfo,b.isPreload)},e.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)})},showVideoPreview:function(){var a=this;a.context.dataset.getinfoJSON&&(a.context.dataset.isDisableProgress||(a.context.dataset.isShowPreviewList=!0,a.dataset.$previewMod.removeClass(Txplayer.dataset.hideClass),this.dataset.$previewPosterMod.removeClass(Txplayer.dataset.hideClass)))},hideVideoPreview:function(){var a=this;a.dataset.mouseIn||(a.context.dataset.isShowPreviewList=!1,this.dataset.$previewPosterMod.addClass(Txplayer.dataset.hideClass),a.dataset.$previewMod.addClass(Txplayer.dataset.hideClass))},updateVideoPreview:function(a){var b=this;if(a&&(a.hasOwnProperty("x")&&(a.x>=a.progressWidth?a.x=a.progressWidth:a.x<0&&(a.x=0)),a.hasOwnProperty("x")&&a.duration)){var c=parseInt(a.duration*(a.x/a.progressWidth));b.updateImage(c)}}},Txplayer.register("UiPreviewList",d)},201:function(a,b){a.exports='<txpdiv  class="txp_preview <%=hideClass%>" data-role="<%=previewPosterMod%>" >\r\n\t<txpdiv data-role="<%=previewPoster%>" class="txp_preview_img"></txpdiv>\r\n</txpdiv>\r\n<txpdiv data-role="<%=previewMod%>" class="txp_tooltip_preview <%=hideClass%>">\r\n</txpdiv>'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(198)},198:function(a,b,c){function d(a){e=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util,g=c(199);d.prototype={init:function(){this.write(),this.dataset.ppbAdData=null,this.addEventListener()},write:function(){var a={previewAd:"txp-ui-control-preview-ad",previewAdImg:"txp-ui-control-preview-ad-img"};this.dataset.renderData=a,this.dataset.htmldata=e.tmpl(g,a);var b=this.context.$mod.$playermod.find(".txp_tooltip_preview .txp_tooltip_current_bg");b.append(this.dataset.htmldata),this.dataset.$previewAd=b.find('[data-role="'+a.previewAd+'"]'),this.dataset.$previewAdImg=b.find('[data-role="'+a.previewAdImg+'"]')},remove:function(){this.dataset.$previewAd.remove()},refreshPreviewListAd:function(){var a=this.context.$mod.$playermod.find('[data-role="txp_preview_mod_list"]').find(".txp_tooltip_current_bg");a.append(this.dataset.htmldata),this.dataset.$previewAd=this.context.$mod.$playermod.find('[data-role="'+this.dataset.renderData.previewAd+'"]'),this.dataset.$previewAdImg=this.dataset.$previewAd.find('[data-role="'+this.dataset.renderData.previewAdImg+'"]'),this.initShowAd()},requestAd:function(){this.dataset.hasRequest=!0,this.context.msg.broadcast("adPluginMsg",{name:"requestCgi",params:"PPB"})},recievedAd:function(a){this.dataset.src=this.filterAdData(a),this.initShowAd()},initShowAd:function(a){var b=this;return this.dataset.src?(this.dataset.$previewAdImg.removeClass("txp_none"),this.dataset.$previewAdImg.attr("src",this.dataset.src),void this.dataset.$previewAdImg.on("error",function(){b.dataset.$previewAdImg.addClass("txp_none"),setTimeout(function(){b.dataset.$previewAdImg.removeAttr("src")}),b.dataset.src=null})):void this.dataset.$previewAdImg.addClass("txp_none")},filterAdData:function(a){return this.dataset.ppbAdData=a,"array"!=e.type(a)||0==a.length?"":"array"==e.type(a[0].image)&&a[0].image.length>0&&a[0].image[0].url?a[0].image[0].url:""},reportAd:function(){this.dataset.ppbAdData&&this.context.msg.broadcast("adPluginMsg",{name:"reportAd",adtype:"PPB",params:this.dataset.ppbAdData})},addEventListener:function(){var a=this;a.context.$mod.$progressmod.on("mouseenter",function(){a.context.dataset.isPlayingAd||a.context.dataset.isImgAdLoadingShowing||a.dataset.hasRequest||a.requestAd()}),a.context.$mod.$progressmod.on("mouseenter",function(){a.context.dataset.isPlayingAd||a.context.dataset.isImgAdLoadingShowing||a.reportAd()}).on("mousedown",function(){a.context.dataset.isPlayingAd||a.context.dataset.isImgAdLoadingShowing||a.reportAd()}),this.context.msg.on("ppbAdDataReady",function(b){a.recievedAd(b)}),this.dataset.eventsList={},this.dataset.eventsList[f.getUniqueMsgKey("vidChange")]=function(){a.dataset.hasRequest=!1,a.dataset.ppbAdData=null,a.dataset.src=""},this.dataset.eventsList[f.getUniqueMsgKey("previewListSizeChange")]=function(){a.refreshPreviewListAd()},e.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)})}},Txplayer.register("UiPreviewAd",d)},199:function(a,b){a.exports=' <txpdiv data-role="<%=previewAd%>" class="txp_tooltip_preview_ad">\r\n\t<img data-role="<%=previewAdImg%>" class="txp_none">\r\n </txpdiv>'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(209)},209:function(a,b,c){function d(a){e=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util,g=c(210);Txplayer.apiList;d.prototype={init:function(){this.dataset.layerShowClass="txp_show",this.dataset.activeClass="txp_current",this.dataset.hideControlClass="txp_autohide_progress",this.dataset.hideClass="txp_none",this.dataset.playbackRate=1,this.dataset.historySpeed=1,this.dataset.range=[.5,1,1.25,1.5,2],this.dataset.perWidth=44,this.dataset.seekcount=0,this.dataset.lastSeekTime=0,this.dataset.hasDisableAutoPlayNext="v.qq.com"===location.hostname,this.write(),this.getHistorySettings(),this.addEventListener(),this.exportsModuleApis()},getData:function(){var a=f.getData(Txplayer.dataset.localStorageKey.userSetting);try{a=JSON.parse(a)}catch(b){a={}}return a},setData:function(a,b){var c=this.getData(Txplayer.dataset.localStorageKey.userSetting);c[a]=b,f.setData(Txplayer.dataset.localStorageKey.userSetting,JSON.stringify(c))},setSession:function(a,b){try{window.sessionStorage&&window.sessionStorage.setItem(a,b)}catch(c){}},getSession:function(a){var b="";try{window.sessionStorage&&(b=window.sessionStorage.getItem(a))}catch(c){}return b},getHistorySettings:function(){var a=this.getData(),b=this;0===a.isSkipPrelude?(this.context.dataset.skipPrelude=!1,this.dataset.$skipPrelude.removeClass(this.dataset.activeClass)):(this.context.dataset.skipPrelude=!0,b.setData("isSkipPrelude",1),this.dataset.$skipPrelude.addClass(this.dataset.activeClass)),this.dataset.hasDisableAutoPlayNext&&(1===a.disableAutoPlayNext?(this.context.dataset.disableAutoPlayNext=!0,this.dataset.$disableAutoPlayNext.addClass(this.dataset.activeClass)):(this.context.dataset.disableAutoPlayNext=!1,this.dataset.$disableAutoPlayNext.removeClass(this.dataset.activeClass))),1===a.isUseFlash?(this.dataset.isUseFlash=!0,this.dataset.$useFlash.addClass(this.dataset.activeClass)):a.isUseFlash||(this.dataset.isUseFlash=!1,this.dataset.$useFlash.removeClass(this.dataset.activeClass)),1===a.isUsePlaybackRate?this.dataset.isUsePlaybackRate=!0:a.isUsePlaybackRate||(this.dataset.isUsePlaybackRate=!1),1===a.closeSpeedTips?this.dataset.closeSpeedTips=!0:a.closeSpeedTips||(this.dataset.closeSpeedTips=!1),this.initShowPlaybackRate()},write:function(){var a={settings:"txp-ui-control-settings",skipPrelude:"txp-ui-control-setting-skipPrelude",disableAutoPlayNext:"txp-ui-control-setting-disableAutoPlayNext",closeLight:"txp-ui-control-setting-close-light",hidePlayingControl:"txp-ui-control-setting-hide-control",useFlash:"txp-ui-control-setting-use-flash",layer:"txp-ui-control-settings-layer",isMobile:f.mobile,hasDisableAutoPlayNext:this.dataset.hasDisableAutoPlayNext,settingsBtn:"txp-ui-control-setting-btn",hideClass:Txplayer.dataset.hideClass,speedWrap:"txp-ui-control-settings-speed",speedHandle:"txp-ui-control-settings-speed-handle",speedTips:"txp-ui-control-settings-speed-tips",speedTipsClose:"txp-ui-control-settings-speed-tips-close",speedTipsArrow:"txp-ui-control-settings-speed-tips-arrow",danmuInput:"txp-ui-control-settings-danmu-input"};this.dataset.renderData=a;var b=e.tmpl(g,a);this.context.$mod.$buttonsrightmod.append(b),this.dataset.$settings=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.settings+'"]'),this.dataset.$closeLight=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.closeLight+'"]'),this.dataset.$skipPrelude=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.skipPrelude+'"]'),this.dataset.hasDisableAutoPlayNext&&(this.dataset.$disableAutoPlayNext=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.disableAutoPlayNext+'"]')),this.dataset.$hidePlayingControl=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.hidePlayingControl+'"]'),this.dataset.$useFlash=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.useFlash+'"]'),this.dataset.$layer=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.layer+'"]'),this.dataset.$settingsBtn=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.settingsBtn+'"]'),this.dataset.$speedWrap=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.speedWrap+'"]'),this.dataset.$speed=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.speedWrap+'"]').find(".txp_speed_item"),this.dataset.$speedHandle=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.speedHandle+'"]'),this.dataset.$speedTips=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.speedTips+'"]'),this.dataset.$speedTipsClose=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.speedTipsClose+'"]'),this.dataset.$speedTipsArrow=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.speedTipsArrow+'"]'),this.dataset.$danmuInput=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.danmuInput+'"]'),this.context.config.enForcePlayerType&&this.dataset.$useFlash.addClass(Txplayer.dataset.hideClass)},remove:function(){this.dataset.$settings.remove(),this.dataset.$layer.remove()},layerShowHandler:function(){if(f.mobile){var a=this;this.dataset.$settingsBtn.on("click",function(){a.dataset.$layer.toggleClass(a.dataset.layerShowClass)})}},showAndSetPlayBackRate:function(a){if(a){var b=0;if(a.hasOwnProperty("index"))b=a.index,this.dataset.$speedHandle.css({left:5+b*this.dataset.perWidth}),this.setInternalPlaybackRate(this.dataset.range[b],a.isWaitSet);else if(a.hasOwnProperty("left")){var c=a.left;b=c/22,b=c<22?0:c<this.dataset.perWidth+22?1:c<2*this.dataset.perWidth+22?2:c<3*this.dataset.perWidth+22?3:4,this.dataset.$speedHandle.css({left:5+b*this.dataset.perWidth}),this.setInternalPlaybackRate(this.dataset.range[b])}}},initShowPlaybackRate:function(){if(this.dataset.historySpeed=+this.getSession("playbackRate")||1,1!=this.dataset.historySpeed){var a=this.dataset.range.indexOf(this.dataset.historySpeed);if(a==-1)return;this.showAndSetPlayBackRate({index:a,isWaitSet:!0})}},showSpeedTips:function(){var a=this;a.dataset.$speedTips.css({right:a.context.dataset.$playermod.width()-(a.dataset.$settings.offset().left-a.context.dataset.$playermod.offset().left)-a.dataset.$speedTips.outerWidth()/2}),a.dataset.$speedTipsArrow.css({right:a.dataset.$speedTips.width()/2-a.dataset.$settings.width()/2});var b=function(){a.dataset.$speedTips.removeClass(a.dataset.hideClass),a.setData("isUsePlaybackRate",1),a.dataset.isUsePlaybackRate=!0,window.setTimeout(function(){a.dataset.$speedTips.addClass(a.dataset.hideClass)},4500)};a.context.dataset.isControlShow?b():a.context.msg.on("beforeUiControlShow.showSpeedTips",function(){a.context.msg.off("beforeUiControlShow.showSpeedTips"),b()})},setInternalPlaybackRate:function(a,b){a&&this.context.dataset.playbackRate!=a&&(this.dataset.playbackRate=a,this.setData("isUsePlaybackRate",1),this.dataset.isUsePlaybackRate=!0,this.setSession("playbackRate",a),this.context.dataset.isPlayingAd||b||1!=this.context.dataset.playState||this.context.msg.broadcast("setInternalPlaybackRate",a))},addEventListener:function(){var a=this;this.dataset.$speed.on("click",function(b){var c=e(b.target),d=c.data("speed");if(d&&d!=a.dataset.playbackRate){var f=a.dataset.range.indexOf(d);f!=-1&&a.showAndSetPlayBackRate({index:f})}});var b=!1;this.dataset.$speedHandle.on("mousedown",function(){b=!0}).on("mouseup",function(c){if(b){b=!1;var d=c.target.offsetLeft-5;a.showAndSetPlayBackRate({left:d})}}),this.dataset.$speedWrap.on("mousemove",function(c){if(b){if(c.target.offsetLeft+c.offsetX-5<5)return;if(c.target.offsetLeft+c.offsetX-5>5+4*a.dataset.perWidth)return;a.dataset.$speedHandle.css({left:c.target.offsetLeft+c.offsetX-5})}}).on("mouseleave",function(c){b=!1;var d=a.dataset.$speedHandle.css("left").slice(0,-2)-5;a.showAndSetPlayBackRate({left:d})}),this.dataset.$skipPrelude.on("click",function(){a.context.dataset.skipPrelude?(a.setData("isSkipPrelude",0),a.dataset.$skipPrelude.removeClass(a.dataset.activeClass),a.context.dataset.skipPrelude=!1):(a.setData("isSkipPrelude",1),a.dataset.$skipPrelude.addClass(a.dataset.activeClass),a.context.dataset.skipPrelude=!0)}),this.dataset.hasDisableAutoPlayNext&&this.dataset.$disableAutoPlayNext.on("click",function(){a.context.dataset.disableAutoPlayNext?(a.setData("disableAutoPlayNext",0),a.dataset.$disableAutoPlayNext.removeClass(a.dataset.activeClass),a.context.dataset.disableAutoPlayNext=!1):(a.setData("disableAutoPlayNext",1),a.dataset.$disableAutoPlayNext.addClass(a.dataset.activeClass),a.context.dataset.disableAutoPlayNext=!0),a.context.msg.broadcast("updateNextVideoInfo")}),this.dataset.$useFlash.on("click",function(){a.dataset.isUseFlash?(a.setData("isUseFlash",0),a.dataset.$useFlash.removeClass(a.dataset.activeClass),a.dataset.isUseFlash=!1):(a.setData("isUseFlash",1),a.dataset.$useFlash.addClass(a.dataset.activeClass),a.dataset.isUseFlash=!0,window.location.reload())}),this.dataset.$settings.on("click",function(b){if(!e(b.target).parents().hasClass("txp_popup")){var c=a.dataset.$layer.parent();"none"==c.css("display")?(a.dataset.$speedTips.addClass(a.dataset.hideClass),c.show()):c.hide()}}),this.dataset.$speed.on("mouseleave",function(a){a.stopPropagation()}),this.dataset.$settings.on("mouseleave",function(b){"use"==b.target.nodeName&&b.offsetX>=0&&b.offsetX<=e(b.target).parent().width()||"svg"==b.target.nodeName&&b.offsetX>=0&&b.offsetX<=e(b.target).width()||null!==b.relatedTarget&&"block"==a.dataset.$layer.parent().css("display")&&a.dataset.$layer.parent().hide()}),this.layerShowHandler(),this.dataset.eventsList={},this.dataset.eventsList[f.getUniqueMsgKey("videoTimeUpdate")]=function(b){if(b&&"film"===b.playListType&&(a.context.dataset.isTheLastOfCurrentType||b.isTheLastFilm)){var c,d=a.context.dataset.currentTime,g=a.context.dataset.playEndTime,h=a.context.dataset.duration;a.context.dataset.skipPrelude&&g>0&&g<h&&(d>=g-5&&!a.dataset.hasShowTip&&(a.context.msg.broadcast("showUiTips",{text:"腾讯视频即将为您跳过片尾...",time:7,hideClose:!0}),a.dataset.hasShowTip=!0),d>g&&d<=h-3&&!a.dataset.hasSkipVideoEnd&&(a.dataset.hasSkipVideoEnd=!0,"v3"==a.context.config.version?a.dataset.skipTimer=setTimeout(function(){a.context.msg.broadcast("hideUiTips"),c=a.context.msg.getData("getFocusVideoTag"),e(c).trigger("ended",{from:"skipPrelude"})},2e3):(f.v4log("triggerend-skipPrelude",{currentTime:d}),a.context.msg.broadcast("hideUiTips"),c=a.context.msg.getData("getFocusVideoTag"),e(c).trigger("ended",{from:"skipPrelude"}))))}},this.dataset.eventsList[f.getUniqueMsgKey("beforeVideoPlay")]=function(b){a.dataset.skipTimer&&(clearTimeout(a.dataset.skipTimer),a.dataset.skipTimer=null),a.dataset.hasSkipVideoEnd=null,a.dataset.hasShowTip=null},this.dataset.eventsList[f.getUniqueMsgKey("videoPause")]=function(b){a.dataset.skipTimer&&(clearTimeout(a.dataset.skipTimer),a.dataset.skipTimer=null,a.context.msg.broadcast("hideUiTips")),a.dataset.hasSkipVideoEnd=null,a.dataset.hasShowTip=null},this.dataset.eventsList[f.getUniqueMsgKey("videoEnd")]=function(){a.context.msg.broadcast("updateNextVideoInfo")},this.dataset.$speedTipsClose.on("click",function(b){b.stopPropagation(),a.dataset.closeSpeedTips=!0,a.setData("closeSpeedTips",1),a.dataset.$speedTips.addClass(a.dataset.hideClass)}),this.dataset.eventsList[f.getUniqueMsgKey("videoPlaying")]=function(b){b&&"film"===b.playListType?a.context.dataset.playbackRate!=a.dataset.playbackRate&&a.setInternalPlaybackRate(a.dataset.playbackRate):a.context.msg.broadcast("setInternalPlaybackRate",1)},this.dataset.eventsList[f.getUniqueMsgKey("videoPlaying")]=function(b){if(b&&"film"===b.playListType){if(a.dataset.isUsePlaybackRate||a.dataset.closeSpeedTips)return;a.showSpeedTips()}},this.dataset.eventsList[f.getUniqueMsgKey("seekEnd")]=function(b){a.context.dataset.isPlayingAd||a.dataset.closeSpeedTips||a.calcSeekCount(b)},this.dataset.eventsList[f.getUniqueMsgKey("showBulletRegion")]=function(b){b?a.showDanmuInput():a.hideDanmuInput()},this.dataset.$danmuInput.on("click",function(){a.toggleDanmueInput(),a.context.msg.broadcast("barrage_fullScreenInput_change",a.dataset.$danmuInput.hasClass(a.dataset.activeClass))}),this.dataset.eventsList[f.getUniqueMsgKey("setControlDanmuInput")]=function(b){b&&a.toggleDanmueInput(b)},e.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)})},calcSeekCount:function(a){a.seekTime-a.currentTimeWhenSeekStart>=5?(this.dataset.lastSeekTime&&a.seekEndTime-this.dataset.lastSeekTime<=5e3&&1==this.context.dataset.playbackRate&&this.dataset.seekcount++,this.dataset.lastSeekTime=a.seekEndTime):this.dataset.seekcount=0,this.dataset.seekcount>=2&&(this.dataset.seekcount=0,this.showSpeedTips())},setPlaybackRate:function(a){var b=this.dataset.range.indexOf(a);return b==-1?void f.showInfo("setPlaybackRate参数仅支持以下速率：",this.dataset.range):void this.showAndSetPlayBackRate({index:b})},showDanmuInput:function(){this.context.config.showBulletInput&&this.dataset.$danmuInput.removeClass(this.dataset.hideClass)},hideDanmuInput:function(){this.dataset.$danmuInput.addClass(this.dataset.hideClass)},toggleDanmueInput:function(a){a?this.dataset.$danmuInput.addClass(this.dataset.activeClass):this.dataset.$danmuInput.toggleClass(this.dataset.activeClass)},exportsModuleApis:function(){var a=this;this.dataset.privateApis={},this.dataset.privateApis.setPlaybackRate=this.setPlaybackRate.bind(this),e.each(this.dataset.privateApis,function(b,c){a.context.msg.on(b,c)}),this.dataset.moduleApis={},this.dataset.moduleApis.setPlaybackRate=this.setPlaybackRate.bind(this),e.extend(this.context.userApi,this.dataset.moduleApis)}},Txplayer.register("UiSettings",d)},210:function(a,b){a.exports='<txpdiv data-role="<%=settings%>" class="txp_btn txp_btn_setting">\r\n  <svg data-role="<%=settingsBtn%>" class="txp_icon txp_icon_setting" version="1.1" viewBox="0 0 24 24">\r\n    <use class="txp_svg_symbol txp_svg_setting" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_setting"></use>\r\n  </svg>\r\n  <txpdiv class="txp_popup txp_popup_settings">\r\n    <txpdiv class="txp_popup_content" data-role="<%=layer%>" >\r\n      <txpdiv class="txp_menugroup txp_menugroup_play">\r\n        <% if (hasDisableAutoPlayNext) { %>\r\n        <txpdiv data-role="<%=disableAutoPlayNext%>" data-report="disable-auto-play-next" class="txp_menuitem">\r\n          <svg class="txp_icon txp_icon_select" version="1.1" viewBox="0 0 12 12">\r\n            <use class="txp_svg_symbol txp_svg_select" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_select"></use>\r\n            <use class="txp_svg_symbol txp_svg_select_true" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_select_true"></use>\r\n          </svg>\r\n          <txpdiv class="txp_menuitem_label">取消自动连播</txpdiv>\r\n        </txpdiv>\r\n        <% } %>\r\n        <txpdiv data-role="<%=skipPrelude%>" data-report="skip-prelude" class="txp_menuitem">\r\n          <svg class="txp_icon txp_icon_select" version="1.1" viewBox="0 0 12 12">\r\n            <use class="txp_svg_symbol txp_svg_select" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_select"></use>\r\n            <use class="txp_svg_symbol txp_svg_select_true" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_select_true"></use>\r\n          </svg>\r\n          <txpdiv class="txp_menuitem_label">自动跳过片头</txpdiv>\r\n        </txpdiv>\r\n        <txpdiv data-role="<%=danmuInput%>"  class="txp_menuitem txp_none">\r\n          <svg class="txp_icon txp_icon_select" version="1.1" viewBox="0 0 12 12">\r\n            <use class="txp_svg_symbol txp_svg_select" xmlns:xlink="http://www.w3.org/1999/xlink"\r\n                 xlink:href="#txp_svg_select"></use>\r\n            <use class="txp_svg_symbol txp_svg_select_true" xmlns:xlink="http://www.w3.org/1999/xlink"\r\n                 xlink:href="#txp_svg_select_true"></use>\r\n          </svg>\r\n          <txpdiv class="txp_menuitem_label">全屏可发弹幕</txpdiv>\r\n        </txpdiv>\r\n        <% if (!isMobile) {%>\r\n        <txpdiv data-role="<%=useFlash%>" data-report="use-flash" class="txp_menuitem">\r\n          <svg class="txp_icon txp_icon_select" version="1.1" viewBox="0 0 12 12">\r\n            <use class="txp_svg_symbol txp_svg_select" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_select"></use>\r\n            <use class="txp_svg_symbol txp_svg_select_true" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_select_true"></use>\r\n          </svg>\r\n          <txpdiv class="txp_menuitem_label">使用 Flash 播放器</txpdiv>\r\n        </txpdiv>\r\n        <%}%>\r\n      </txpdiv>\r\n\r\n      <txpdiv class="txp_speed_setting">\r\n          <txpdiv class="txp_speed_title">播放倍率</txpdiv>\r\n          <txpdiv data-role="<%=speedWrap%>" class="txp_speed_range">\r\n            <txpdiv data-role="<%=speedHandle%>" class="txp_speed_range_handle" style="left: 49px;"></txpdiv>\r\n            <txpdiv class="txp_speed_item" data-speed="0.5">0.5x</txpdiv>\r\n            <txpdiv class="txp_speed_item" data-speed="1">1.0x</txpdiv>\r\n            <txpdiv class="txp_speed_item" data-speed="1.25">1.25x</txpdiv>\r\n            <txpdiv class="txp_speed_item" data-speed="1.5">1.5x</txpdiv>\r\n            <txpdiv class="txp_speed_item" data-speed="2">2.0x</txpdiv>\r\n          </txpdiv>\r\n      </txpdiv>\r\n    </txpdiv>\r\n  </txpdiv>\r\n  <txpdiv data-role="<%=speedTips%>" class="txp_speed_tips <%=hideClass%>" >\r\n    <txpdiv class="txp_speed_tips_highlight">倍速播放</txpdiv>在这里\r\n    <txpdiv data-role="<%=speedTipsArrow%>" class="txp_speed_tips_arrow" style="left: inherit;right: 50px;"></txpdiv>\r\n    <button data-role="<%=speedTipsClose%>" class="txp_btn txp_btn_close" title=""></button>\r\n  </txpdiv>\r\n</txpdiv>'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(141)},141:function(a,b,c){function d(a){e=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util,g=(Txplayer.apiList,c(142));d.prototype={init:function(){this.dataset.browserFullscreenClass="txp_mode_fullscreen",this.context.dataset.isBrowserFullscreen=!1,this.dataset.playerConfig=this.context.config,this.write(),this.addEventListerner(),this.exportsModuleApis()},write:function(){var a={fakeBtn:"txp-ui-control-fakebtn",toolTip:"browser-fullscreen",tabindex:Txplayer.dataset.tabindex++},b=e.tmpl(g,a);this.context.$mod.$buttonsrightmod.append(b),this.dataset.$fakebtn=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.fakeBtn+'"]'),this.dataset.$txp_tooltip=this.dataset.$fakebtn.find('[data-role="'+a.toolTip+'"]'),this.dataset.$playermod=this.context.$mod.$playermod,this.initDisplay()},remove:function(){this.dataset.$fakebtn.remove()},initDisplay:function(){this.dataset.playerConfig&&this.dataset.playerConfig.showBrowserFullScreen?this.dataset.$fakebtn.removeClass(Txplayer.dataset.hideClass):this.dataset.$fakebtn.addClass(Txplayer.dataset.hideClass)},toggleBrowserFullScreen:function(){this.context.dataset.isBrowserFullscreen?this.context.msg.broadcast("exitBrowserFullscreen"):this.context.msg.broadcast("enterBrowserFullscreen")},bindMouseEvent:function(){},addEventListerner:function(){var a=this;this.dataset.$fakebtn.on("mouseenter",function(a){e(this).addClass("txp_hover")}),this.dataset.$fakebtn.on("mouseleave",function(a){e(this).removeClass("txp_hover")}),this.dataset.$fakebtn.on(Txplayer.dataset.clickEventName,function(){e(this).removeClass("txp_hover"),a.toggleBrowserFullScreen()}),f.mobile||this.bindMouseEvent(),this.context.msg.on("closeAdClick",function(){a.exitBrowserFullscreen()}),this.dataset.eventsList={},this.dataset.eventsList[f.getUniqueMsgKey("error")]=function(b){a.context.dataset.isBrowserFullscreen&&a.context.msg.broadcast("exitBrowserFullscreen")},e.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)}),this.context.msg.on("followButtonClick",function(){a.context.config.loginHandler&&"function"==e.type(a.context.config.loginHandler.isLogin)&&a.context.config.loginHandler.isLogin()||a.context.dataset.isBrowserFullscreen&&a.exitBrowserFullscreen()})},enterBrowserFullscreen:function(){var a=this,b=function(){a.context.$mod.$playermod.addClass(a.dataset.browserFullscreenClass),a.dataset.$fakebtn.attr("data-status","true"),a.context.dataset.isBrowserFullscreen=!0,a.dataset.$txp_tooltip.html("退出网页全屏"),e("html").addClass("txp_html_fullscreen");try{a.context.userMsg.broadcast("browserFullscreenChange",a.context.dataset.isBrowserFullscreen)}catch(b){}a.context.msg.broadcast("browserFullscreenChange",a.context.dataset.isBrowserFullscreen)};a.context.dataset.isWindowFullscreen?a.context.msg.once("windowFullscreenChange",function(a){setTimeout(function(){b()},10)}):b(),a.context.msg.broadcast("exitWindowFullscreen"),a.dataset.$fakebtn.removeClass(Txplayer.dataset.btnHoverClass),a.context.dataset.isShowBulletRegion?e("html").addClass("txp_html_barrage_on"):e("html").removeClass("txp_html_barrage_on")},exitBrowserFullscreen:function(a){var b=this;a=a||{},a.noUpdateClass||(b.context.$mod.$playermod.removeClass(b.dataset.browserFullscreenClass),b.context.msg.broadcast("exitWindowFullscreen")),b.dataset.$fakebtn.attr("data-status",!1),b.context.dataset.isBrowserFullscreen=!1,b.dataset.$txp_tooltip.html("网页全屏"),e("html").removeClass("txp_html_fullscreen").removeClass("txp_html_barrage_on");try{b.context.userMsg.broadcast("browserFullscreenChange",b.context.dataset.isBrowserFullscreen)}catch(c){}b.context.msg.broadcast("browserFullscreenChange",b.context.dataset.isBrowserFullscreen),b.dataset.$fakebtn.removeClass(Txplayer.dataset.btnHoverClass)},exportsModuleApis:function(){var a=this;this.dataset.moduleApis={},this.dataset.moduleApis.toggleBrowserFullScreen=a.toggleBrowserFullScreen.bind(this),this.dataset.moduleApis.enterBrowserFullscreen=a.enterBrowserFullscreen.bind(this),this.dataset.moduleApis.exitBrowserFullscreen=a.exitBrowserFullscreen.bind(this),this.dataset.moduleApis.isBrowserFullscreen=function(){return a.context.dataset.isBrowserFullscreen},e.extend(this.context.userApi,this.dataset.moduleApis),e.each(this.dataset.moduleApis,function(b,c){a.context.msg.on(b,c)})}},Txplayer.register("UiBrowserFullScreen",d)},142:function(a,b){a.exports='<txpdiv class="txp_btn txp_btn_fake txp_none" data-role="<%=fakeBtn%>" data-status="false" data-report="browser-fullscreen" aria-label="网页全屏">\r\n  <svg class="txp_icon txp_icon_fake" version="1.1" viewBox="0 0 24 24">\r\n    <use class="txp_svg_symbol txp_svg_fake" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_fake"></use>\r\n    <use class="txp_svg_symbol txp_svg_fake_true" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_fake_true"></use>\r\n  </svg>\r\n  <txpdiv class="txp_tooltip" data-role="<%=toolTip%>">网页全屏</txpdiv>\r\n</txpdiv>\r\n'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(228)},228:function(a,b,c){function d(a){e=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util,g=(Txplayer.apiList,c(229));d.prototype={init:function(){this.dataset.browserFullscreenClass="txp_mode_fullscreen",this.context.dataset.isWindowFullscreen=!1,this.write(),this.addEventListerner(),this.exportsModuleApis()},write:function(){var a={fullscreenBtn:"txp-ui-control-fullscreenbtn",toolTip:"window-fullscreen",tabindex:Txplayer.dataset.tabindex++},b=e.tmpl(g,a);this.context.$mod.$buttonsrightmod.append(b),this.dataset.$fullscreenBtn=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.fullscreenBtn+'"]'),this.dataset.$txp_tooltip=this.dataset.$fullscreenBtn.find('[data-role="'+a.toolTip+'"]'),this.dataset.$playermod=this.context.$mod.$playermod,this.dataset.$fullscreenContainer=this.context.$mod.$playermod[0],this.isIE10()&&this.dataset.$txp_tooltip.html("您的浏览器不支持全屏")},remove:function(){this.dataset.$fullscreenBtn.remove()},isIE10:function(){return Txplayer.util.browser.ie&&"10.0"==Txplayer.util.browser.ie.version},toggleWindowFullScreen:function(){this.isIE10()||(this.context.dataset.isWindowFullscreen?this.exitWindowFullscreen():this.enterWindowFullscreen())},requestFullScreen:function(a,b,c){a=a||this.dataset.$fullscreenContainer,b=b||"enter","enter"===b?(c=a.requestFullscreen||a.mozRequestFullScreen||a.webkitRequestFullscreen||a.webkitRequestFullscreen||a.msRequestFullscreen,c||(a=document,c=a.requestFullscreen||a.mozRequestFullScreen||a.webkitRequestFullscreen||a.webkitRequestFullscreen||a.msRequestFullscreen)):(c=a.cancelFullScreen||a.mozCancelFullScreen||a.webkitCancelFullScreen||a.exitFullscreen||a.webkitExitFullscreen||a.msExitFullscreen,c||(a=document,c=a.cancelFullScreen||a.mozCancelFullScreen||a.webkitCancelFullScreen||a.exitFullscreen||a.webkitExitFullscreen||a.msExitFullscreen));try{c?c.call(a):c||"enter"!==b||this.context.msg.broadcast("videoRequestFullScreen")}catch(d){f.showError("requestFullScreen error",d),this.context.msg.broadcast("reportError",{msg:d.message,code:Txplayer.define.reportCode.JS_ERROR,stack:d.stack})}},isFullScreen:function(){var a=document.mozFullScreen||document.webkitIsFullScreen;return a||(a=!!document.fullScreenElement||!!document.msFullscreenElement),a},exitWindowFullscreen:function(a){var b=this;b.dataset.$fullscreenBtn.attr("data-status",!1),b.context.dataset.isWindowFullscreen=!1,b.dataset.$txp_tooltip.html("全屏"),a||b.requestFullScreen(null,"exit")},enterWindowFullscreen:function(a){var b=this;b.context.msg.broadcast("exitBrowserFullscreen",{noUpdateClass:!0}),b.dataset.$fullscreenBtn.attr("data-status",!0),b.context.dataset.isWindowFullscreen=!0,b.dataset.$txp_tooltip.html("退出全屏"),b.context.dataset.isShowBulletRegion?e("html").addClass("txp_html_barrage_on"):e("html").removeClass("txp_html_barrage_on"),a||b.requestFullScreen(null,"enter")},bindMouseEvent:function(){},addEventListerner:function(){var a=this;this.dataset.$fullscreenBtn.on("mouseenter",function(a){e(this).addClass("txp_hover")}),this.dataset.$fullscreenBtn.on("mouseleave",function(a){e(this).removeClass("txp_hover")}),this.dataset.$fullscreenBtn.on(Txplayer.dataset.clickEventName,function(){e(this).removeClass("txp_hover"),a.toggleWindowFullScreen()}),f.mobile||a.bindMouseEvent(),e(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(b){a.context.dataset.isWindowFullscreen=a.isFullScreen(),a.context.dataset.isWindowFullscreen?(a.enterWindowFullscreen(!0),a.context.$mod.$playermod.addClass(a.dataset.browserFullscreenClass),e("html").addClass("txp_html_fullscreen")):(a.exitWindowFullscreen(!0),a.context.$mod.$playermod.removeClass(a.dataset.browserFullscreenClass),e("html").removeClass("txp_html_fullscreen"));try{a.context.userMsg.broadcast("windowFullscreenChange",a.context.dataset.isWindowFullscreen)}catch(c){}a.context.msg.broadcast("windowFullscreenChange",a.context.dataset.isWindowFullscreen)}),this.context.msg.on("closeAdClick",function(){a.exitWindowFullscreen()}),this.context.msg.on("UiShadownDblClick",function(){a.toggleWindowFullScreen()}),this.context.msg.on("webkitendfullscreen",function(){a.exitWindowFullscreen()}),this.dataset.eventsList={},this.dataset.eventsList[f.getUniqueMsgKey("error")]=function(b){a.context.dataset.isWindowFullscreen&&a.context.msg.broadcast("exitWindowFullscreen")},e.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)}),this.context.msg.on("followButtonClick",function(){a.context.config.loginHandler&&"function"==e.type(a.context.config.loginHandler.isLogin)&&a.context.config.loginHandler.isLogin()||a.context.dataset.isWindowFullscreen&&a.exitWindowFullscreen()})},exportsModuleApis:function(){var a=this;this.dataset.moduleApis={},this.dataset.moduleApis.toggleWindowFullScreen=a.toggleWindowFullScreen.bind(this),this.dataset.moduleApis.enterWindowFullscreen=a.enterWindowFullscreen.bind(this),this.dataset.moduleApis.exitWindowFullscreen=a.exitWindowFullscreen.bind(this),this.dataset.moduleApis.isWindowFullscreen=function(){return a.context.dataset.isWindowFullscreen},e.extend(this.context.userApi,this.dataset.moduleApis),e.each(this.dataset.moduleApis,function(b,c){a.context.msg.on(b,c)})}},Txplayer.register("UiWindowFullScreen",d)},229:function(a,b){a.exports='<txpdiv class="txp_btn txp_btn_fullscreen" data-role="<%=fullscreenBtn%>" data-status="false" data-report="window-fullscreen" aria-label="系统全屏">\r\n  <svg class="txp_icon txp_icon_fullscreen" version="1.1" viewBox="0 0 24 24">\r\n    <use class="txp_svg_symbol txp_svg_fullscreen" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_fullscreen"></use>\r\n    <use class="txp_svg_symbol txp_svg_fullscreen_true" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_fullscreen_true"></use>\r\n  </svg>\r\n  <txpdiv class="txp_tooltip" data-role="<%=toolTip%>">全屏</txpdiv>\r\n</txpdiv>\r\n'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(172)},172:function(a,b,c){function d(a){e=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util,g=c(173);d.prototype={init:function(){this.dataset.playerConfig=this.context.config,this.dataset.vidsList=this.dataset.playerConfig.vidsList,this.write(),this.initDisplay(),this.addEventListerner(),this.exportsModuleApis()},initDisplay:function(){this.dataset.playerConfig.showLogo?this.dataset.$logo.removeClass(Txplayer.dataset.hideClass):this.dataset.$logo.addClass(Txplayer.dataset.hideClass)},write:function(){var a={logo:"txp-ui-control-logo",hideClass:Txplayer.dataset.hideClass,tabindex:Txplayer.dataset.tabindex++};this.dataset.renderData=a;var b=e.tmpl(g,a);this.context.$mod.$buttonsrightmod.append(b),this.dataset.$logo=this.context.$mod.$buttonsrightmod.find('[data-role="'+a.logo+'"]')},remove:function(){this.dataset.$logo.remove()},openAtTencentVideo:function(){if("ke.qq.com"===location.hostname)return void window.open("https://v.qq.com");var a=this.context.dataset.vid,b=this.context.dataset.currentTime;if(a){var c=f.getTxVideoPageURLByVid(a,0,b);c&&(f.showInfo("到 腾讯视频 播放",c),window.open(c))}},addEventListerner:function(){var a=this;this.dataset.$logo.on("click",function(){a.openAtTencentVideo()})},exportsModuleApis:function(){var a=this;this.dataset.moduleApis={},this.dataset.moduleApis.openAtTencentVideo=function(){a.openAtTencentVideo()},e.each(this.dataset.moduleApis,function(b,c){a.context.msg.on(b,c)})}},Txplayer.register("UiLogo",d)},173:function(a,b){a.exports='<a data-role="<%=logo%>" class="txp_btn txp_btn_logo <%=hideClass%>" data-report="click-logo" aria-label="腾讯视频logo">\r\n  <span class="txp_logo"></span>\r\n  <txpdiv class="txp_tooltip">到腾讯视频观看此视频</txpdiv>\r\n</a>'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(276)},276:function(a,b,c){function d(a){e=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util,g=c(277),h=c(278);d.prototype={init:function(){this.write(),this.dataset.hideElemsList={},this.addEventListerner()},write:function(){f.loadCss("//vm.gtimg.cn/c/=/tencentvideo/txp/style/txp_barrage.css,/tencentvideo/vstyle/web/common/style/x_emoji.css,x_bubble.css");var a={mod:"txp-interactive-mod"},b=e.tmpl(h,a);this.context.dataset.$playermod.append(b),this.dataset.$mod=this.context.dataset.$playermod.find("[data-role="+a.mod+"]")},requestData:function(){var a="//ncgi.video.qq.com/fcgi-bin/livemark/get_video_mark?callback=?",b={idlist:this.context.dataset.vid,otype:"json",pr:1},c=this;this.context.dataset.cid&&(b.cid=this.context.dataset.cid),this.context.dataset.columnId&&(b.lid=this.context.dataset.columnId),this.dataset.request=e.jsonp({url:a,data:b,callback:Txplayer.util.getJsonpCallbackName("get_video_mark")}).done(function(a){c.filter(a)})},remove:function(){},clear:function(){this.clearDom(),this.dataset.hideElemsList={},this.dataset.listData={}},clearDom:function(){this.dataset.$mod&&this.dataset.$mod.html(""),this.dataset.hideElemsList={}},filter:function(a){var b=a,c=this;this.dataset.listData={},e.each(b,function(a,b){b=b||{};var d;1344==b.cate&&b.gds[0]&&b.gds[0].img&&b.gds[0].hasOwnProperty("bt")&&(d=parseInt(b.gds[0].bt/1e3),c.dataset.listData[d]={type:1344,x:b.gds[0].mg_x,y:b.gds[0].mg_y,link:b.gds[0].imglink,imgSrc:b.gds[0].img,showTime:parseInt(b.gds[0].du)||10,did:b.did||"",startTime:d,endTime:d+(parseInt(b.gds[0].du)||10)})})},checkTimeList:function(a){if(!e.isEmptyObject(this.dataset.listData)&&a)for(var b in this.dataset.listData)b==a&&this.insertBulletByType(this.dataset.listData[b])},checkHideList:function(a){if(!e.isEmptyObject(this.dataset.hideElemsList)&&a){var b,c;for(var d in this.dataset.hideElemsList)b=d.split(":"),c=b[1],b=b[0],this.dataset.hideElemsList[d].isShow&&(a>c||a<b)&&(this.dataset.hideElemsList[d].isShow=!1,this.fadeInElem(this.dataset.hideElemsList[d].elem))}},insertBulletByType:function(a){if(a=a||{},!a.inserted){var b,c,d,f,h=this,i=1-150/this.context.dataset.playerWidth,j=1-150/this.context.dataset.playerHeight;1344==a.type&&(a.inserted=!0,b=g,a.x/100>i&&(a.x=100*i-1),a.y/100>j&&(a.y=100*j-1),d={cssStyle:"left: "+a.x+"%;top: "+a.y+"%;display:none;"},d=e.extend(d,a),c=e.tmpl(b,d),f=e(c),this.dataset.$mod.append(f),this.fadeOutElem(f),this.report(e.extend(a,{isClick:!1})),f.off("click").on("click",function(){h.report(e.extend(a,{isClick:!0}))}),this.dataset.hideElemsList[a.startTime+":"+a.endTime]={elem:f,startTime:a.startTime,isShow:!0})}},fadeInElem:function(a){a&&a.animate?a.animate({opacity:0},3e3,function(){a.remove&&a.remove()}):a&&a.animate&&a.remove()},fadeOutElem:function(a){a&&a.animate?(a.css({display:"block",opacity:0}),a.animate({opacity:1},3e3)):a&&a.css&&a.css({display:"block"})},report:function(a){var b="//btrace.video.qq.com/kvcollect?BossId=4434&Pwd=2077065645&",c={pid:this.context.dataset.playerId,hh_ref:encodeURIComponent(f.getTopFrameUrl()),hc_main_login:f.cookie.get("main_login"),hh_uin:f.getQQFromCookie(),hc_vuserid:f.cookie.get("vuserid"),hc_openid:f.cookie.get("openid"),hc_appid:f.cookie.get("appid"),hc_ua:f.getReportUA(),cate:a.type,itype:a.isClick?2:1,bt:a.startTime,et:a.endTime,vid:this.context.dataset.vid||"",cid:this.context.dataset.cid||"",lid:this.context.dataset.columnId||"",pla:this.context.dataset.platform,url:encodeURIComponent(document.URL)};b+=f.param(c),f.report(b)},addEventListerner:function(){var a=this;this.dataset.eventsList={},this.dataset.eventsList[f.getUniqueMsgKey("videoTimeUpdate")]=function(b){a.checkTimeList(a.context.dataset.currentTime),a.checkHideList(a.context.dataset.currentTime)},this.dataset.eventsList[f.getUniqueMsgKey("vidChange")]=function(b){a.dataset.request&&a.dataset.request.abort&&a.dataset.request.abort(),a.clear()},this.dataset.eventsList[f.getUniqueMsgKey("smallWindowModeChange")]=function(b){b&&b.isSmallWindow&&a.clearDom()},this.dataset.eventsList["getVideoMarkDataReady.1344"]=function(b){b=b||[],a.filter(b)},e.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)})},exportsModuleApis:function(){var a=this;this.dataset.moduleApis={},this.dataset.moduleApis.openAtTencentVideo=function(){a.openAtTencentVideo()},e.each(this.dataset.moduleApis,function(b,c){a.context.msg.on(b,c)})}},Txplayer.register("VideoInteractive",d)},277:function(a,b){a.exports='<txpdiv class="txp_barrage_item_img" style="<%=cssStyle%>">\r\n  <a href="<%=link%>" target="_blank">\r\n    <img src="<%=imgSrc%>">\r\n  </a>\r\n</txpdiv>'},278:function(a,b){a.exports='<txpdiv class="txp_barrage" data-role="<%=mod%>"></txpdiv>'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(217)},217:function(a,b,c){function d(a){e=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util,g=(Txplayer.apiList,c(218));d.prototype={init:function(){this.dataset.playerConfig=this.context.config,this.write(),this.initDisplay(),this.addEventListener(),this.exportsModuleApis()},write:function(){var a={hideClass:Txplayer.dataset.hideClass,title:"txp-ui-title-mod",titleText:"txp-ui-title-text"};this.dataset.renderData=a;var b=e.tmpl(g,a);this.context.dataset.$playermod.append(b),this.dataset.$title=this.context.dataset.$playermod.find('[data-role="'+a.title+'"]'),this.dataset.$titleText=this.context.dataset.$playermod.find('[data-role="'+a.titleText+'"]')},remove:function(){this.dataset.$title.remove()},initDisplay:function(){this.dataset.playerConfig&&this.dataset.playerConfig.showTitle?this.dataset.$title.removeClass(Txplayer.dataset.hideClass):this.dataset.$title.addClass(Txplayer.dataset.hideClass)},updateTitle:function(){var a,b=this.context.dataset.title;b||(a=this.context.dataset.getinfoJSON,a&&a.vl&&a.vl.vi&&a.vl.vi[0]&&a.vl.vi[0].ti&&(b=a.vl.vi[0].ti)),b&&(this.dataset.title=b,this.dataset.$titleText.html(f.xss(b)+(this.context.dataset.titleExt||"")))},hideUiTitle:function(a){var b=this;b.context.dataset.isRightClickMenu||(a=a||0,a?(b.dataset.hide_TIMER&&(clearTimeout(b.dataset.hide_TIMER),b.dataset.hide_TIMER=null),b.dataset.hide_TIMER=setTimeout(function(){b.dataset.$title.addClass(Txplayer.dataset.hideClass)},a)):b.dataset.$title.addClass(Txplayer.dataset.hideClass))},showUiTitle:function(){var a=this;if(!a.context.dataset.isPlayingAd&&!a.context.dataset.isSmallWindowMode){var b=a.context.dataset.isWindowFullscreen||a.context.dataset.isBrowserFullscreen;(a.dataset.playerConfig.showTitle||b)&&(a.dataset.$title.removeClass(Txplayer.dataset.hideClass),a.hideUiTitle(3e3))}},addEventListener:function(){var a=this;a.updateTitle(),this.context.dataset.$playermod.on("mouseleave",function(){a.hideUiTitle()}).on("mousemove",function(b){a.dataset.screenX==b.screenX&&a.dataset.screenY==b.screenY||(a.dataset.screenX=b.screenX,a.dataset.screenY=b.screenY,a.showUiTitle())}),this.dataset.eventsList={},this.dataset.eventsList[f.getUniqueMsgKey("getVideoUrlSuccess")]=function(){a.updateTitle()},this.dataset.eventsList[f.getUniqueMsgKey("userPausePlayer")]=function(){a.showUiTitle()},this.dataset.eventsList[f.getUniqueMsgKey("userPlayPlayer")]=function(){a.hideUiTitle()},this.dataset.eventsList[f.getUniqueMsgKey("windowFullscreenChange")]=function(b){b?a.showUiTitle():a.hideUiTitle()},this.dataset.eventsList[f.getUniqueMsgKey("browserFullscreenChange")]=function(b){b?a.showUiTitle():a.hideUiTitle()},this.dataset.eventsList[f.getUniqueMsgKey("vidChange")]=function(){a.hideUiTitle()},this.dataset.eventsList[f.getUniqueMsgKey("seekStart")]=function(){a.hideUiTitle()},this.dataset.eventsList[f.getUniqueMsgKey("videoPlaying")]=function(b){b&&"film"!=b.playListType&&a.hideUiTitle()},e.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)})},exportsModuleApis:function(){var a=this;this.dataset.moduleApis={},this.dataset.moduleApis.setOnlineNum=function(b){b=+b;var c=!isNaN(b)&&b>0?'<txpdiv class="txp_video_online"><txpdiv class="txp_video_online_num">'+f.xss(b)+"</txpdiv>人正在看</txpdiv>":"";a.context.dataset.titleExt=c,a.updateTitle()},e.extend(this.context.userApi,this.dataset.moduleApis)}},Txplayer.register("UiTitle",d)},218:function(a,b){a.exports='<txpdiv data-role="<%=title%>" class="txp_video_title <%=hideClass%>">\r\n  <a data-role="<%=titleText%>" class="txp_title_link"></a>\r\n</txpdiv>'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(95)},95:function(a,b){function c(a){d=Txplayer.$,this.msg=new Txplayer.Events,this.dataset={},this.context=a,this.init()}var d=Txplayer.$,e=Txplayer.util;Txplayer.apiList;c.prototype={init:function(){this.dataset.$playermod=this.context.dataset.$playermod,this.addEventListener()},remove:function(){this.dataset.$playermod.off("keydown").off("keyup")},reportUsrAction:function(a){this.context.msg.broadcast("reportUsrAction",{usr_action:"press-key",usr_action_detail:a})},addEventListener:function(){var a=this,b=[.5,1,1.25,1.5,2];this.dataset.$playermod.on("keydown",function(c){if(!a.context.dataset.disableHotKey){var d,e,f,g=a.context.dataset.isPlayingAd,h=!1;if(c.shiftKey||38!==c.keyCode)if(c.shiftKey||40!==c.keyCode)if(c.shiftKey||221!==c.keyCode)if(c.shiftKey||219!==c.keyCode){if(c.shiftKey&&48===c.keyCode){if(g)return;a.context.msg.broadcast("setPlaybackRate",1),a.reportUsrAction("shift+"+c.keyCode),h=!0}}else{if(g)return;if(f=.5,e=a.context.dataset.playbackRate,b.indexOf(e)>=1&&(e=b[b.indexOf(e)-1]),e<.5)return;a.context.msg.broadcast("setPlaybackRate",e),a.reportUsrAction("shift+"+c.keyCode),h=!0}else{if(g)return;if(e=a.context.dataset.playbackRate,b.indexOf(e)>=0&&b.indexOf(e)<b.length&&(e=b[b.indexOf(e)+1]),e>2)return;a.context.msg.broadcast("setPlaybackRate",e),a.reportUsrAction("shift+"+c.keyCode),h=!0}else{if(g)return;d=a.context.dataset.volume-5,d<=0&&(d=0),a.context.msg.broadcast("setVolume",{volume:d,showTips:!0,isUserAction:!0}),a.reportUsrAction(c.keyCode),h=!0}else{if(g)return;d=a.context.dataset.volume+5,d>=100&&(d=100),a.context.msg.broadcast("setVolume",{volume:d,showTips:!0,isUserAction:!0}),a.reportUsrAction("38"),h=!0}return h?(c.preventDefault?c.preventDefault():window.event&&(window.event.returnValue=!1),c.stopPropagation?c.stopPropagation():window.event&&(window.event.cancelBubble=!0),!1):void 0}}).on("keyup",function(b){if(!a.context.dataset.disableHotKey){var c,f=d.inArray(b.keyCode,[48,49,50,51,52,53,54,55,56,57,58]),g=!1;if(b.shiftKey||32!==b.keyCode)if(b.shiftKey||39!==b.keyCode)if(b.shiftKey||37!==b.keyCode)if(b.shiftKey||77!==b.keyCode)if(70!==b.keyCode||b.shiftKey)if(70===b.keyCode&&b.shiftKey)e.browser&&e.browser.ie||(a.context.msg.broadcast("toggleBrowserFullScreen"),a.reportUsrAction("shift+"+b.keyCode),g=!0);else if(!b.shiftKey&&f>-1){if(a.context.dataset.isPlayingAd)return;var h=a.context.dataset.duration,i=10*f/100*h;0==i&&(i=.1),h&&a.context.msg.broadcast("seekTo",i),a.reportUsrAction(b.keyCode),g=!0}else 27===b.keyCode?(a.dataset.$playermod.trigger("blur"),a.context.dataset.isBrowserFullscreen&&a.context.msg.broadcast("exitBrowserFullscreen"),a.reportUsrAction(b.keyCode)):b.shiftKey||86!==b.keyCode?b.shiftKey&&80===b.keyCode&&a.context.msg.broadcast("showUiConsole"):("v.qq.com"!==window.location.hostname&&(a.context.msg.broadcast("openAtTencentVideo"),a.reportUsrAction(b.keyCode)),g=!0);else e.browser&&e.browser.ie||(a.context.msg.broadcast("toggleWindowFullScreen"),a.reportUsrAction(b.keyCode),g=!0);else a.context.dataset.isMuted?a.context.msg.broadcast("unMute"):a.context.msg.broadcast("mute"),a.reportUsrAction(b.keyCode),g=!0;else c=a.context.dataset.currentTime,a.context.msg.broadcast("seekTo",c-5),a.reportUsrAction(b.keyCode),g=!0;else c=a.context.dataset.currentTime,a.context.msg.broadcast("seekTo",c+5),a.reportUsrAction(b.keyCode),g=!0;else{if(a.context.dataset.isPlayingAd)return;1===a.context.dataset.playState||3===a.context.dataset.playState?(a.context.msg.broadcast("pause"),a.context.msg.broadcast("userPausePlayer")):!a.context.dataset.getinfoJSON&&a.context.dataset.disableAutoPlayNext?(a.context.msg.broadcast("beforeVideoRePlay"),a.context.msg.broadcast("playControl",{playStartTime:a.context.dataset.playStartTime,playEndTime:a.context.dataset.playEndTime,vid:a.context.dataset.vid,connectionPlayType:1}),a.context.msg.broadcast("userPlayPlayer")):(a.context.msg.broadcast("playControl",{connectionPlayTime:a.context.dataset.connectionPlayTime,playStartTime:a.context.dataset.playStartTime,connectionPlayType:1}),a.context.msg.broadcast("userPlayPlayer")),a.reportUsrAction(b.keyCode),g=!0}return g?(b.preventDefault?b.preventDefault():window.event&&(window.event.returnValue=!1),b.stopPropagation?b.stopPropagation():window.event&&(window.event.cancelBubble=!0),!1):void 0}}).on("keypress",function(a){if(32===a.which)return!1})}},Txplayer.register("HdHotKey",c)}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(207)},207:function(a,b,c){function d(a){e=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util,g=(Txplayer.apiList,c(208));d.prototype={init:function(){this.dataset.currentClass="txp_current",this.dataset.currentPercent="100",this.dataset.percentClassList=["txp_video_50","txp_video_75","txp_video_100"],this.write(),this.addEventListener()},write:function(){var a={screenPercentWrap:"txp-ui-screen-percent-wrap",screenPercent50:"txp-ui-screen-percent-50",screenPercent75:"txp-ui-screen-percent-75",screenPercent100:"txp-ui-screen-percent-100",hideClass:Txplayer.dataset.hideClass};this.dataset.renderData=a;var b=e.tmpl(g,a);this.context.dataset.$playermod.append(b),this.dataset.$screenPercentWrap=this.context.dataset.$playermod.find('[data-role="'+a.screenPercentWrap+'"]'),this.dataset.$screenPercent50=this.context.dataset.$playermod.find('[data-role="'+a.screenPercent50+'"]'),this.dataset.$screenPercent75=this.context.dataset.$playermod.find('[data-role="'+a.screenPercent75+'"]'),this.dataset.$screenPercent100=this.context.dataset.$playermod.find('[data-role="'+a.screenPercent100+'"]')},remove:function(){this.dataset.$screenPercentWrap.remove()},setScreenPercent:function(a){this.context.msg.broadcast("setVideoClass",{removeList:this.dataset.percentClassList}),this.dataset.$screenPercentWrap.children().removeClass(this.dataset.currentClass),50===a?(this.context.msg.broadcast("setVideoClass",{addList:["txp_video_fit_none","txp_video_50"]}),this.dataset.currentPercent="50",this.dataset.$screenPercent50.addClass(this.dataset.currentClass)):75===a?(this.context.msg.broadcast("setVideoClass",{addList:["txp_video_fit_none","txp_video_75"]}),this.dataset.currentPercent="75",this.dataset.$screenPercent75.addClass(this.dataset.currentClass)):100===a&&(this.context.msg.broadcast("setVideoClass",{addList:["txp_video_fit_none","txp_video_100"]}),this.dataset.currentPercent="100",this.dataset.$screenPercent100.addClass(this.dataset.currentClass)),this.getVideoTags().css({position:"absolute",top:0,rigth:0,bottom:0,left:0,width:this.dataset.currentPercent+"%",height:this.dataset.currentPercent+"%"}),this.context.msg.broadcast("videoScreenPercentChange",this.dataset.currentPercent)},getVideoTags:function(){return this.context.dataset.$shadow.siblings("video")},showUiScreenPercent:function(){var a=this,b=a.context.dataset.isWindowFullscreen||a.context.dataset.isBrowserFullscreen;a.context.dataset.isPlayingAd||a.context.dataset.isSmallWindowMode||b&&(a.dataset.$screenPercentWrap.removeClass(Txplayer.dataset.hideClass),a.hideUiScreenPercent(3e3))},hideUiScreenPercent:function(a){var b=this;b.context.dataset.isRightClickMenu||(a=a||0,a?(b.dataset.hide_TIMER&&(clearTimeout(b.dataset.hide_TIMER),b.dataset.hide_TIMER=null),b.dataset.hide_TIMER=setTimeout(function(){b.dataset.$screenPercentWrap.addClass(Txplayer.dataset.hideClass)},a)):b.dataset.$screenPercentWrap.addClass(Txplayer.dataset.hideClass))},handlerWheelScroll:function(a){var b=this.context.dataset.isWindowFullscreen||this.context.dataset.isBrowserFullscreen;if(b&&!this.dataset.wheelDelayTimer){var c=this.dataset.$screenPercentWrap.find("."+this.dataset.currentClass),d=this;c=c[a>0?"next":"prev"](),c&&c.trigger&&c.trigger("click"),this.dataset.wheelDelayTimer=setTimeout(function(){d.dataset.wheelDelayTimer=null},1e3)}},addEventListener:function(){var a=this;this.dataset.$screenPercentWrap.on("click",function(b){var c=e(b.target),d=c.data("percent");d&&(d==a.dataset.currentPercent&&c.hasClass(a.dataset.currentClass)||a.setScreenPercent(d))}),this.context.dataset.$playermod.on("mouseleave",function(){a.hideUiScreenPercent()}).on("mousemove",function(b){a.dataset.screenX==b.screenX&&a.dataset.screenY==b.screenY||(a.dataset.screenX=b.screenX,a.dataset.screenY=b.screenY,a.showUiScreenPercent())}).on("mousewheel DOMMouseScroll",function(b){var c=b.originalEvent;if(c){var d=c.wheelDelta||c.detail;c.detail&&(d=c.detail*-40),a.handlerWheelScroll(d)}}),this.dataset.eventsList={},this.dataset.eventsList[f.getUniqueMsgKey("windowFullscreenChange")]=function(b){a.setScreenPercent(100),b?a.showUiScreenPercent():(a.context.msg.broadcast("setVideoClass",{removeList:a.dataset.percentClassList}),a.hideUiScreenPercent()),a.dataset.currentPercent=100},this.dataset.eventsList[f.getUniqueMsgKey("browserFullscreenChange")]=function(b){a.setScreenPercent(100),b?a.showUiScreenPercent():(a.context.msg.broadcast("setVideoClass",{removeList:a.dataset.percentClassList}),a.hideUiScreenPercent()),a.dataset.currentPercent=100},this.dataset.eventsList[f.getUniqueMsgKey("userPausePlayer")]=function(){a.showUiScreenPercent()},this.dataset.eventsList[f.getUniqueMsgKey("userPlayPlayer")]=function(){a.hideUiScreenPercent()},this.dataset.eventsList[f.getUniqueMsgKey("vidChange")]=function(){a.hideUiScreenPercent()},this.dataset.eventsList[f.getUniqueMsgKey("seekStart")]=function(){a.hideUiScreenPercent()},this.dataset.eventsList[f.getUniqueMsgKey("videoPlaying")]=function(b){b&&"film"!=b.playListType&&a.hideUiScreenPercent()},e.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)})}},Txplayer.register("UiScreenPercent",d)},208:function(a,b){a.exports='<txpdiv data-role="<%=screenPercentWrap%>" class="txp_screen_percent <%=hideClass%>">\r\n\t<txpdiv data-role="<%=screenPercent50%>" data-percent="50" class="txp_screen_50">50%</txpdiv>\r\n\t<txpdiv data-role="<%=screenPercent75%>" data-percent="75" class="txp_screen_75">75%</txpdiv>\r\n\t<txpdiv data-role="<%=screenPercent100%>" data-percent="100" class="txp_screen_100 txp_current">100%</txpdiv>\r\n</txpdiv>\r\n'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(185)},185:function(a,b,c){function d(a){e=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util,g=(Txplayer.apiList,c(186));d.prototype={init:function(){this.write(),this.addEventListerner()},write:function(){var a={overlayPlay:"txp_overlay_play",hide:Txplayer.dataset.hideClass,overlayPlayStatus:"txp_overlay_play_status"};this.dataset.renderData=a;var b=e.tmpl(g,a);this.context.dataset.$playermod.append(b),this.dataset.$overlayPlay=this.context.dataset.$playermod.find("[data-role="+a.overlayPlay+"]"),this.dataset.$overlayPlayStatus=this.context.dataset.$playermod.find("[data-role="+a.overlayPlayStatus+"]")},remove:function(){this.dataset.$overlayPlay.remove()},animateDone:function(){this.dataset.$overlayPlay.removeClass("txp_overlay_play_animate"),this.dataset.$overlayPlay.addClass(Txplayer.dataset.hideClass)},showUiOverlayPlay:function(a){var b=this;b.context.dataset.isPlayingAd||("pause"===a?b.dataset.$overlayPlayStatus.attr("data-status","pause"):"play"===a&&b.dataset.$overlayPlayStatus.attr("data-status","play"),b.dataset.$overlayPlay.removeClass(Txplayer.dataset.hideClass),b.dataset.$overlayPlay.addClass("txp_overlay_play_animate"),b.dataset.$overlayPlay.on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd animationend",function(){b.animateDone()}),setTimeout(function(){b.animateDone()},1100))},addEventListerner:function(){var a=this;this.dataset.eventsList={},this.dataset.eventsList[f.getUniqueMsgKey("userPausePlayer")]=function(){a.context.dataset.isVideoSeeking||a.showUiOverlayPlay("pause")},this.dataset.eventsList[f.getUniqueMsgKey("userPlayPlayer")]=function(){a.context.dataset.isVideoSeeking||a.showUiOverlayPlay("play")},e.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)})}},Txplayer.register("UiOverlayPlay",d)},186:function(a,b){a.exports='<txpdiv class="txp_overlay_play <%=hide%>" " data-role="<%=overlayPlay%>">\r\n\t<button class="txp_btn txp_btn_play_lg" data-status="play" data-role="<%=overlayPlayStatus%>">\r\n\t\t<svg class="txp_icon txp_icon_play" version="1.1" viewBox="0 0 36 36" width="36" height="36">\r\n\t\t\t<use class="txp_svg_symbol txp_svg_play" xlink:href="#txp_svg_play" />\r\n\t\t\t<use class="txp_svg_symbol txp_svg_pause" xlink:href="#txp_svg_pause" />\r\n\t\t\t<use class="txp_svg_symbol txp_svg_replay" xlink:href="#txp_svg_replay" />\r\n\t\t</svg>\r\n\t</button>\r\n</txpdiv>\r\n'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(143)},143:function(a,b,c){function d(a){e=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util,g=(Txplayer.apiList,c(144));d.prototype={init:function(){this.write(),this.addEventListener()},write:function(){var a={hideClass:Txplayer.dataset.hideClass,clock:"txp-ui-clock-mod"};this.dataset.renderData=a;var b=e.tmpl(g,a);this.context.dataset.$playermod.append(b),this.dataset.$clock=this.context.dataset.$playermod.find('[data-role="'+a.clock+'"]')},remove:function(){this.dataset.$clock.remove()},hideUiClock:function(a){var b=this;b.context.dataset.isRightClickMenu||(a=a||0,a?(b.dataset.hide_TIMER&&(clearTimeout(b.dataset.hide_TIMER),b.dataset.hide_TIMER=null),b.dataset.hide_TIMER=setTimeout(function(){b.dataset.$clock.addClass(Txplayer.dataset.hideClass)},a)):b.dataset.$clock.addClass(Txplayer.dataset.hideClass))},showUiClock:function(){var a=this,b=a.context.dataset.isWindowFullscreen||a.context.dataset.isBrowserFullscreen;a.context.dataset.isPlayingAd||a.context.dataset.isSmallWindowMode||b&&(a.dataset.$clock.removeClass(Txplayer.dataset.hideClass),a.dataset.$clock.html(f.dateFormat("hh:mm")),a.hideUiClock(3e3))},addEventListener:function(){var a=this;this.context.dataset.$playermod.on("mouseleave",function(){a.hideUiClock()}).on("mousemove",function(b){a.dataset.screenX==b.screenX&&a.dataset.screenY==b.screenY||(a.dataset.screenX=b.screenX,a.dataset.screenY=b.screenY,a.showUiClock())}),this.dataset.eventsList={},this.dataset.eventsList[f.getUniqueMsgKey("windowFullscreenChange")]=function(b){b?a.showUiClock():a.hideUiClock()},this.dataset.eventsList[f.getUniqueMsgKey("browserFullscreenChange")]=function(b){b?a.showUiClock():a.hideUiClock()},this.dataset.eventsList[f.getUniqueMsgKey("userPausePlayer")]=function(){a.showUiClock()},this.dataset.eventsList[f.getUniqueMsgKey("userPlayPlayer")]=function(){a.hideUiClock()},this.dataset.eventsList[f.getUniqueMsgKey("vidChange")]=function(){a.hideUiClock()},this.dataset.eventsList[f.getUniqueMsgKey("seekStart")]=function(){a.hideUiClock()},this.dataset.eventsList[f.getUniqueMsgKey("videoPlaying")]=function(b){b&&"film"!=b.playListType&&a.hideUiClock()},e.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)})}},Txplayer.register("UiClock",d)},144:function(a,b){a.exports='<!-- 时间 -->\r\n<txpdiv data-role="<%=clock%>" class="txp_clock <%=hideClass%>"></txpdiv>\r\n'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(145)},145:function(a,b,c){function d(a){e=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=Txplayer.$,f=Txplayer.util,g=c(146),h=c(147);d.prototype={init:function(){this.dataset.timeInterval=1,this.dataset.reportTimesLimit=3,this.dataset.dlSpeed=[],this.resetConsole(),this.write(),this.addEventListerner(),this.moduleExportApis()},resetConsole:function(){this.dataset.consoleData={flow:[]},this.dataset.reportTimes=null,this.dataset.dlSpeed=[]},write:function(){var a={console:"txp-ui-console",vid:"txp-ui-console-vid",volume:"txp-ui-console-volume",bufferPercent:"txp-ui-console-buf-per",bufferSeconds:"txp-ui-console-buf-seconds",errorCode:"txp-ui-console-errorcode",close:"txp-ui-console-close",videoSize:"txp-ui-console-videoSize",downloadSpeed:"txp-ui-console-downloadspeed",downloadSpeedChart:"txp-ui-console-downloadspeed-chart",cdn:"txp-ui-console-cdn",protocol:"txp-ui-console-protocol",report:"txp-ui-console-report",errorCodeWrap:"txp-ui-console-errorcode-wrap",flowIdRole:"txp-ui-console-flowid",playerTypeMode:"txp-ui-console-playertype-mode",vidStr:this.context.dataset.vid,playerType:this.context.config.playerType,errcodeVal:this.dataset.errorcode,resolution:screen.width+" x "+screen.height,videoSizeStr:this.context.dataset.videoWidth?[this.context.dataset.videoWidth," x ",this.context.dataset.videoHeight].join(""):"",volumeStr:this.context.dataset.volume+"%",version:Txplayer.dataset.ver+" ("+Txplayer.dataset.lastModify+")",flowId:this.context.dataset.flowid};this.dataset.renderData=a;var b=e.tmpl(g,a),c=this.context.dataset.$playermod;c.append(b),this.dataset.$console=c.find('[data-role="'+a.console+'"]'),this.dataset.$vid=c.find('[data-role="'+a.vid+'"]'),this.dataset.$volume=c.find('[data-role="'+a.volume+'"]'),this.dataset.$close=c.find('[data-role="'+a.close+'"]'),this.dataset.$bufferPercent=c.find('[data-role="'+a.bufferPercent+'"]'),this.dataset.$bufferSeconds=c.find('[data-role="'+a.bufferSeconds+'"]'),this.dataset.$errorCode=c.find('[data-role="'+a.errorCode+'"]'),this.dataset.$videoSize=c.find('[data-role="'+a.videoSize+'"]'),this.dataset.$downloadSpeed=c.find('[data-role="'+a.downloadSpeed+'"]'),this.dataset.$downloadSpeedChart=c.find('[data-role="'+a.downloadSpeedChart+'"]'),this.dataset.$cdn=c.find('[data-role="'+a.cdn+'"]'),this.dataset.$protocol=c.find('[data-role="'+a.protocol+'"]'),this.dataset.$report=c.find('[data-role="'+a.report+'"]'),this.dataset.$errorCodeWrap=c.find('[data-role="'+a.errorCodeWrap+'"]'),this.dataset.$flowIdRole=c.find('[data-role="'+a.flowIdRole+'"]'),this.dataset.$playerTypeMode=c.find('[data-role="'+a.playerTypeMode+'"]')},remove:function(){this.dataset.$console.remove()},hide:function(){this.context.dataset.disableCalcDownloadSpeed=!0,this.dataset.$console.addClass(Txplayer.dataset.hideClass),this.stop()},show:function(){this.context.dataset.disableCalcDownloadSpeed=!1,this.isShowing()||(this.dataset.$console.removeClass(Txplayer.dataset.hideClass),this.start(),this.updateShowErrorCode())},updateShowErrorCode:function(){this.dataset.errorcode?(this.dataset.$errorCodeWrap.removeClass(Txplayer.dataset.hideClass),this.dataset.$errorCode.html(this.dataset.errorcode)):(this.dataset.$errorCodeWrap.addClass(Txplayer.dataset.hideClass),this.dataset.$errorCode.html(""))},isShowing:function(){return!this.dataset.$console.hasClass(Txplayer.dataset.hideClass)},getSpeedStart:function(){if(!this.dataset.timer){var a=this;this.dataset.timer=setInterval(function(){a.updateDownloadSpeedValue(a.context.dataset.videoDownloadSpeed),a.updateDownloadSpeendChart(a.context.dataset.videoDownloadSpeed)},1e3)}},getSpeedStop:function(){this.dataset.timer&&(clearInterval(this.dataset.timer),this.dataset.timer=null)},start:function(){this.dataset.isConsoleShow=!0,this.getSpeedStart()},stop:function(){this.dataset.isConsoleShow=!1,this.getSpeedStop()},updateDownloadSpeedValue:function(a){this.dataset.$downloadSpeed.html(f.formatDownloadSpeed(a))},animate:function(a,b){a&&("function"===e.type(a.animate)?a.animate(b):a.css(b))},collectConsoleData:function(){this.dataset.consoleData.vid=this.context.dataset.vid,this.dataset.consoleData.cid=this.context.dataset.cid,this.dataset.consoleData.now=f.dateFormat(),this.dataset.consoleData.defn=this.context.dataset.definition,this.dataset.consoleData.uid=this.context.config.guid,this.dataset.consoleData.pid=this.context.config.playerId,this.dataset.errorcode&&(this.dataset.consoleData.errorcode=this.dataset.errorcode),this.getPlayerData(),this.report()},updateBuffer:function(){if(this.dataset.isConsoleShow){this.context.dataset.disableCalcDownloadSpeed=!1;var a,b,c=180;b=this.context.dataset.bufferHealth?this.context.dataset.bufferHealth:0,b<0||(this.dataset.$bufferSeconds.html(b+"s"),a=b>=c?"100%":parseInt(b/c*100)+"%",this.animate(this.dataset.$bufferPercent,{width:a}))}},getPlayerData:function(a){a=a||{};var b=this,c={pid:b.context.dataset.playerId,url:encodeURIComponent(f.getPlayerPageUrl()),vid:b.context.dataset.vid,version:Txplayer.dataset.ver,platform:b.context.dataset.platform,playtype:"",emsg2:"",id:a.id||"",action:"//btrace.qq.com/kvcollect?BossId=4372&Pwd=967411786",getinfo:encodeURIComponent(b.dataset.getinfoURL),getkey:encodeURIComponent(b.dataset.getkeyURL||"")||"",uin:f.getQQFromCookie(),ua:f.getReportUA(),refer:f.getTopFrameUrl(),pvid:f.cookie.get("pgv_pvid"),sessionid:f.cookie.get("psessionid"),main_login:f.cookie.get("main_login"),vuserid:f.cookie.get("vuserid"),openid:f.cookie.get("openid"),appid:f.cookie.get("appid")};return b.context.dataset.useHls?c.playtype=1:c.playtype=3,c.vurl=encodeURIComponent(b.context.dataset.currentVideoUrl),window.JSON&&JSON.stringify&&(c.emsg2=JSON.stringify(b.dataset.consoleData),c.emsg2=encodeURIComponent(c.emsg2)),this.dataset.reportData=c,c},getConsoleData:function(){var a=this.getPlayerData();return a.vid=this.context.dataset.vid,a.cid=this.context.dataset.cid,a.now=f.dateFormat(),a.defn=this.context.dataset.definition,a.uid=this.context.config.guid,a.pid=this.context.config.playerId,this.dataset.errorcode&&(a.errorcode=this.dataset.errorcode),a},report:function(){function a(){var a="txp-console-report-form";e("#"+a).remove();var b=c.getPlayerData({id:a}),d=e.tmpl(h,b);e(document.body).append(d);var f=e("#"+a);f.ajaxForm({type:"post",iframe:!0,resetForm:!0,clearForm:!0}),f.submit(),c.context.msg.broadcast("showConsoleReportTips")}if(!(this.dataset.reportTimes>=this.dataset.reportTimesLimit)){var b="//vm.gtimg.cn/tencentvideo/txp/js/jquery.form.min.js?t="+Txplayer.dataset.ts,c=this;this.dataset.reportTimes||(this.dataset.reportTimes=0),this.dataset.reportTimes++,e().ajaxForm?a():f.loadScript({url:b,onsuccess:function(){a()}})}},updateDownloadSpeendChart:function(a){var b;b=a>1024?"100%":(a/10.24).toFixed(0)+"%";var c='<txpdiv class="txp_box_value" style="width:0.5%;height:{per}"></txpdiv>';c=c.replace("{per}",b),this.dataset.$downloadSpeedChart.append(c);var d,f,g=175;f=this.dataset.$downloadSpeedChart.find(".txp_box_value"),d=f.length,d>g&&f.each(function(a,b){a<d-g&&e(b).remove()})},updatePlayerType:function(){var a="";a=this.context.dataset.useChromeHls?"chromehls":this.context.config.playerType,this.dataset.$playerTypeMode.html(a)},addEventListerner:function(){var a=this;this.dataset.eventsList={},this.dataset.eventsList[f.getUniqueMsgKey("vidChange")]=function(){a.dataset.$vid.html(a.context.dataset.vid),a.dataset.$flowIdRole.html(a.context.dataset.flowid),a.resetConsole()},this.dataset.eventsList[f.getUniqueMsgKey("volumeChange")]=function(b){a.dataset.$volume.html(a.context.dataset.volume+"%")},this.dataset.eventsList[f.getUniqueMsgKey("getVideoUrlSuccess")]=function(b){var c=a.context.dataset.videoWidth?[a.context.dataset.videoWidth," x ",a.context.dataset.videoHeight].join(""):"";c&&a.dataset.$videoSize.html(c),b&&(a.dataset.$cdn.html(f.getDomainOfURL(b)),a.dataset.$protocol.html(f.getProtocolOfURL(b)))},this.dataset.eventsList[f.getUniqueMsgKey("setFocusVideoUrl")]=function(b){b&&b.url&&a.dataset.$cdn.html(f.getDomainOfURL(b.url))},this.dataset.eventsList[f.getUniqueMsgKey("getinfoFinish")]=function(b){a.dataset.getinfoURL=b.getinfoURL,b.err?a.dataset.consoleData.flow.push(+new Date+" getinfo err "+b.costTime+" "+["code="+(b.code||0),"exem="+(b.exem||0)].join(" ")):a.dataset.consoleData.flow.push(+new Date+" getinfo ok "+b.costTime)},this.dataset.eventsList[f.getUniqueMsgKey("getkeyFinish")]=function(b){a.dataset.getkeyURL=b.getkeyURL,b.err?a.dataset.consoleData.flow.push(+new Date+" getkey err "+b.costTime+" "+["code="+(b.code||0),"exem="+(b.exem||0),"msg="+b.err].join(" ")):a.dataset.consoleData.flow.push(+new Date+" getkey ok "+b.costTime)},this.dataset.eventsList[f.getUniqueMsgKey("error")]=function(b){b&&b.type&&e.inArray(b.type,["loadingad","insertad","endingad"])>-1&&a.dataset.consoleData.flow.push([+new Date,b.type,b.index,"err"].join(" ")),b&&(b.code||b.errCode)&&(a.dataset.errorcode=b.errCode||b.code,a.updateShowErrorCode())},this.dataset.eventsList[f.getUniqueMsgKey("reportVideoError")]=function(b){a.dataset.consoleData.flow.push([+new Date,b.type,b.index,"err",b.code,"ctime",a.context.dataset.currentTime||0,a.context.dataset.videoCurrentTime||0].join(" ")),b&&b.code&&(a.dataset.errorcode=b.code,a.updateShowErrorCode())},this.dataset.eventsList[f.getUniqueMsgKey("videoEnd")]=function(b){b&&b.playListType&&"videoEvent"===b.from&&a.dataset.consoleData.flow.push([+new Date,b.playListType,b.index,"played"].join(" "))},this.dataset.eventsList[f.getUniqueMsgKey("loadingAdDataReady")]=function(b){a.dataset.consoleData.flow.push([+new Date,"loadingad data",b&&b.length||0].join(" "))},this.dataset.eventsList[f.getUniqueMsgKey("insertAdDataReady")]=function(b){a.dataset.consoleData.flow.push([+new Date,"insertad data",b&&b.data&&b.data.length||0].join(" "))},this.dataset.eventsList[f.getUniqueMsgKey("endingAdDataReady")]=function(b){a.dataset.consoleData.flow.push([+new Date,"endingad data",b&&b.length||0].join(" "))},this.dataset.eventsList[f.getUniqueMsgKey("loadingadIsEmpty")]=function(){a.dataset.consoleData.flow.push([+new Date,"loadingad data 0"].join(" "))},this.dataset.eventsList[f.getUniqueMsgKey("loadingAdRequestError")]=function(b){a.dataset.consoleData.flow.push([+new Date,"loadingad cgi err",b&&b.code||0].join(" "))},this.dataset.eventsList[f.getUniqueMsgKey("videoTimeUpdate")]=function(b){a.updateBuffer()},this.dataset.eventsList[f.getUniqueMsgKey("videoPlay")]=function(b){a.updateBuffer(),a.updatePlayerType()},this.dataset.eventsList[f.getUniqueMsgKey("videoPlaying")]=function(b){a.dataset.errorcode=null,a.updateShowErrorCode()},this.dataset.eventsList[f.getUniqueMsgKey("chromehlsErrorSwitchToHtml5hd")]=function(b){setTimeout(function(){a.updatePlayerType()},100)},e.each(this.dataset.eventsList,function(b,c){a.context.msg.on(b,c)}),this.dataset.$close.on("click",function(){a.hide()}),this.dataset.$report.on("dblclick",function(){a.context.msg.broadcast("reportChromeHlsLog"),"function"===e.type(document.execCommand)&&(a.collectConsoleData(),document.execCommand("copy"))}).on("copy",function(b){b.preventDefault();var c="";a.dataset.reportData&&(window.JSON&&JSON.stringify&&(c=JSON.stringify(a.dataset.reportData)),b.clipboardData?b.clipboardData.setData("text/plain",c):b.originalEvent&&b.originalEvent.clipboardData?b.originalEvent.clipboardData.setData("text/plain",c):window.clipboardData&&window.clipboardData.setData("Text",c))})},moduleExportApis:function(){var a=this;this.dataset.privateApis={},this.dataset.privateApis.showUiConsole=this.show.bind(this),e.each(this.dataset.privateApis,function(b,c){a.context.msg.on(b,c)}),this.dataset.dataApis={},this.dataset.dataApis.getConsoleData=function(b,c){c.data=a.getConsoleData()},e.each(this.dataset.dataApis,function(b,c){a.context.msg.setData(b,c)})}},Txplayer.register("UiConsole",d)},146:function(a,b){a.exports='<txpdiv data-role="<%=console%>" class="txp_console <%=Txplayer.dataset.hideClass%>">\r\n  <txpdiv class="txp_console_inner">\r\n    <button data-role="<%=close%>" class="txp_btn_close" title="关闭"></button>\r\n    <txpdiv data-role="<%=report%>" class="txp_line" title="双击发送错误信息" style="cursor: pointer;">\r\n      <txpdiv class="txp_label">VID</txpdiv><txpdiv data-role="<%=vid%>" class="txp_value"><%=vidStr%></txpdiv>\r\n    </txpdiv>\r\n    <txpdiv class="txp_line">\r\n      <txpdiv class="txp_label">播放模式</txpdiv><txpdiv data-role="<%=playerTypeMode%>" class="txp_value"><%=playerType%></txpdiv>\r\n    </txpdiv>\r\n    <txpdiv class="txp_line">\r\n      <txpdiv class="txp_label">分辨率</txpdiv><txpdiv class="txp_value"><%=resolution%></txpdiv>\r\n    </txpdiv>\r\n    <txpdiv class="txp_line">\r\n      <txpdiv class="txp_label">视频宽高</txpdiv><txpdiv data-role="<%=videoSize%>" class="txp_value"><%=videoSizeStr%></txpdiv>\r\n    </txpdiv>\r\n    <txpdiv class="txp_line">\r\n      <txpdiv class="txp_label">音量</txpdiv><txpdiv data-role="<%=volume%>" class="txp_value"><%=volumeStr%></txpdiv>\r\n    </txpdiv>\r\n    <txpdiv class="txp_line">\r\n      <txpdiv class="txp_label">视频协议</txpdiv><txpdiv data-role="<%=protocol%>" class="txp_value"></txpdiv>\r\n    </txpdiv>\r\n    <txpdiv class="txp_line">\r\n      <txpdiv class="txp_label">CDN</txpdiv><txpdiv data-role="<%=cdn%>" class="txp_value"></txpdiv>\r\n    </txpdiv>\r\n    <txpdiv class="txp_line">\r\n      <txpdiv class="txp_label">下载速度</txpdiv><txpdiv class="txp_value">\r\n        <txpdiv data-role="<%=downloadSpeedChart%>" class="txp_box_progress"></txpdiv>\r\n        <span data-role="<%=downloadSpeed%>"></span>\r\n      </txpdiv>\r\n    </txpdiv>\r\n    <txpdiv class="txp_line">\r\n      <txpdiv class="txp_label">缓冲质量</txpdiv><txpdiv class="txp_value">\r\n        <txpdiv class="txp_box_progress">\r\n          <txpdiv data-role="<%=bufferPercent%>" class="txp_box_value" style="width:0%"></txpdiv>\r\n        </txpdiv>\r\n        <span data-role="<%=bufferSeconds%>"></span>\r\n      </txpdiv>\r\n    </txpdiv>\r\n    <txpdiv data-role="<%=errorCodeWrap%>" class="txp_line">\r\n      <txpdiv class="txp_label">错误码</txpdiv>\r\n      <txpdiv data-role="<%=errorCode%>" class="txp_value"><%=errcodeVal%></txpdiv>\r\n    </txpdiv>\r\n    <txpdiv class="txp_line">\r\n      <txpdiv class="txp_label">版本号</txpdiv>\r\n      <txpdiv class="txp_value"><%=version%></txpdiv>\r\n    </txpdiv>\r\n    <txpdiv class="txp_line">\r\n      <txpdiv class="txp_label">播放流水</txpdiv>\r\n      <txpdiv data-role="<%=flowIdRole%>" class="txp_value"><%=flowId%></txpdiv>\r\n    </txpdiv>\r\n  </txpdiv>\r\n</txpdiv>'},147:function(a,b){a.exports='<form id="<%=id%>" action="<%=action%>" method="post" class2="<%=Txplayer.dataset.hideClass%>" enctype="application/x-www-form-urlencoded">\r\n  <input type="hidden" name="pid" value="<%=pid%>" />\r\n  <input type="hidden" name="url" value="<%=url%>" />\r\n  <input type="hidden" name="vid" value="<%=vid%>" />\r\n  <input type="hidden" name="version" value="<%=version%>" />\r\n  <input type="hidden" name="platform" value="<%=platform%>" />\r\n  <input type="hidden" name="playtype" value="<%=playtype%>" />\r\n  <input type="hidden" name="emsg2" value="<%=emsg2%>" />\r\n  <input type="hidden" name="vurl" value="<%=vurl%>" />\r\n  <input type="hidden" name="getinfo" value="<%=getinfo%>" />\r\n  <input type="hidden" name="getkey" value="<%=getkey%>" />\r\n  <input type="hidden" name="encv" value="0" />\r\n  <input type="hidden" name="hc_uin" value="<%=uin%>" />\r\n  <input type="hidden" name="hc_ua" value="<%=ua%>" />\r\n  <input type="hidden" name="hh_ref" value="<%=refer%>" />\r\n  <input type="hidden" name="hc_pvid" value="<%=pvid%>" />\r\n  <input type="hidden" name="hc_ssid" value="<%=sessionid%>" />\r\n  <input type="hidden" name="hc_main_login" value="<%=main_login%>" />\r\n  <input type="hidden" name="hc_vuserid" value="<%=vuserid%>" />\r\n  <input type="hidden" name="hc_openid" value="<%=openid%>" />\r\n  <input type="hidden" name="hc_appid" value="<%=appid%>" />\r\n</form>'}});
/*! Txplayer - v3.0.0 - 2017-09-12 22:42:51
 * Copyright (c) 2017
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(24)},24:function(a,b){function c(a){d=Txplayer.$,this.dataset={},this.context=a,this.init()}var d=Txplayer.$;Txplayer.util;c.prototype={init:function(){this.addEventListeners()},reset:function(){delete this.dataset.fileData,delete this.dataset.fileSize,delete this.dataset.prevBuffer,delete this.dataset.buffer},updateSpeed:function(a){this.dataset.hasOwnProperty("speeds")||(this.dataset.speeds=[]),"number"==typeof a&&(a>12288&&(a=12e3),this.context.dataset.videoDownloadSpeed=a,this.dataset.speeds.push(a));var b=10;this.dataset.speeds.length>b&&this.dataset.speeds.splice(0,this.dataset.speeds.length-b);var c={speed:this.dataset.speed,average:this.getAverSpeed()};this.context.msg.broadcast("downloadSpeedUpdate",c)},getAverSpeed:function(){if(!this.dataset.hasOwnProperty("speeds"))return 0;var a=0,b=0;return this.dataset.speeds&&this.dataset.speeds.length&&(d.each(this.dataset.speeds,function(b,c){a+=parseInt(c)}),b=parseInt(a/this.dataset.speeds.length)),b},calcMp4:function(){if(!this.context.dataset.disableCalcDownloadSpeed&&!this.dataset.isStop&&this.dataset.video&&this.dataset.fileData&&this.dataset.fileData.filesize){this.dataset.fileData.filesize=parseInt(this.dataset.fileData.filesize);var a=this;if(a.dataset.video.buffered.length&&(a.dataset.buffer=a.dataset.video.buffered.end(a.dataset.video.buffered.length-1),a.dataset.fileSize=a.dataset.fileData.filesize/1024,a.dataset.duration=a.dataset.fileData.data&&a.dataset.fileData.data.duration||a.dataset.video.duration,a.dataset.duration=parseFloat(a.dataset.duration),a.dataset.duration)){if(parseInt(a.dataset.buffer)>=parseInt(a.dataset.duration))return a.dataset.speed=0,void a.stop();if(a.dataset.hasOwnProperty("prevBuffer")||(a.dataset.prevBuffer=0),a.dataset.bufferUpdateTime=+new Date,a.dataset.bufferIncrease=a.dataset.buffer-a.dataset.prevBuffer,a.dataset.bufferIncrease<=0)return a.dataset.speed=0,void a.updateSpeed(a.dataset.speed);a.dataset.bufferUpdateCostTime=a.dataset.bufferUpdateTime-a.dataset.prevBufferUpdateTime,a.dataset.updateFileSize=a.dataset.fileSize*(a.dataset.bufferIncrease/a.dataset.duration),a.dataset.speed=a.dataset.updateFileSize/(a.dataset.bufferUpdateCostTime/1e3),a.dataset.speed=parseInt(a.dataset.speed),isNaN(a.dataset.speed)||a.updateSpeed(a.dataset.speed),a.dataset.prevBufferUpdateTime=a.dataset.bufferUpdateTime,a.dataset.prevBuffer=a.dataset.buffer}}},calcHLS:function(a){if(!this.context.dataset.disableCalcDownloadSpeed&&!this.dataset.isStop&&a&&a.loaded){if(this.dataset.prevBuffer||(this.dataset.prevBuffer=0),this.dataset.bufferIncrease=a.loaded-this.dataset.prevBuffer,this.dataset.bufferUpdateTime=+new Date,this.dataset.bufferIncrease<=0)return this.dataset.prevBufferUpdateTime=this.dataset.bufferUpdateTime,this.dataset.prevBuffer=a.loaded,void(this.context.dataset.videoDownloadSpeed=0);this.dataset.bufferUpdateCostTime=this.dataset.bufferUpdateTime-this.dataset.prevBufferUpdateTime,this.dataset.bufferUpdateCostTime<0||(this.dataset.speed=this.dataset.bufferIncrease/1024/(this.dataset.bufferUpdateCostTime/1e3),this.dataset.speed=parseInt(this.dataset.speed),isNaN(this.dataset.speed)||this.updateSpeed(this.dataset.speed),this.dataset.prevBufferUpdateTime=this.dataset.bufferUpdateTime,this.dataset.prevBuffer=a.loaded)}},getRealDownloadSpeedWhenNetFree:function(){var a={},b=this;setInterval(function(){var c=b.context.dataset.videoDownloadSpeed;a.hasOwnProperty(c)?"number"!=typeof a[c]?a[c]=1:(a[c]++,4===a[c]&&(b.context.dataset.videoDownloadSpeed=0,a={})):(a={},a[c]=1)},500)},addEventListeners:function(){var a=this;this.context.msg.on("adLoadProgress",function(b){b&&b.speed&&(a.context.dataset.videoDownloadSpeed=+b.speed)}),this.context.msg.on("videoPlay",function(b){b&&b.videoTag&&(0==b.videoTag.buffered.length&&(a.reset(),a.dataset.prevBufferUpdateTime=+new Date),a.dataset.video=b.videoTag,a.dataset.fileData=a.context.dataset.playList[a.context.dataset.playListIndex])}),this.context.msg.on("error.download-monitor",function(b){b&&b.type&&a.stop()}),"chromehls"===this.context.config.playerType&&this.context.msg.on("hlsProgress",function(b){a.dataset.isStop||a.calcHLS(b)}),this.context.msg.on("videoPlay.download-monitor",function(){"chromehls"!=a.context.config.playerType&&a.startTimer()}),a.getRealDownloadSpeedWhenNetFree()},startTimer:function(){if(!this.dataset.calcTimer){var a=this;this.dataset.calcTimer=setInterval(function(){a.calcMp4()},100)}},stop:function(){this.dataset.isStop=!0,this.dataset.startTimer&&clearInterval(this.dataset.startTimer)}},Txplayer.register("DownloadMonitor",c)}});